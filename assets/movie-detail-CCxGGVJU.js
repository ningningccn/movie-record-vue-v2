import{_ as H,Z as st,W as P,y as ot,a as o,j as it,k as nt,b as e,u as p,a1 as lt,K as w,a2 as ct,a4 as J,a5 as rt,L as dt,x as Z,a6 as ut,$ as pt,ab as Q,N as X,O as tt,r as q,i as mt,a9 as _t,g as vt,o as yt,ac as L,J as ft,E as gt,c as i,G as ht,v as m,t as v,z as xt,F as C,d as A,ad as bt,ae as kt}from"./index-DvKwHlgR.js";const et=c=>(X("data-v-9f958078"),c=c(),tt(),c),wt={class:"absolute inset-0 h-full overflow-auto"},St={class:"main-gradient relative mx-auto my-[128px] w-[489px] rounded-[50px] border border-[#FFFFFF33] bg-black p-20"},$t=et(()=>e("p",{class:"text-heading-s"},"修改記錄",-1)),Dt={class:"mt-8 space-y-6"},Mt={class:"mt-8 space-y-3"},Ft=et(()=>e("i",{class:"icon-close text-[32px]"},null,-1)),Lt=[Ft],Ct={__name:"edit-modal",props:{updatedMovie:{type:Function},name:{type:String},original_name:{type:String},year:{type:String},country:{type:String},poster_img:{type:String},background_image:{type:String},type:{type:String},genres:{type:Object},categoryList:{type:Object},mark:{type:Number},watched:{type:Boolean},favorite:{type:Boolean}},setup(c){const r=c;console.log(r.categoryList);const t=st(),S=P(),{name:k,original_name:$,year:D,country:M,type:y,mark:F,watched:d,favorite:u}=r,a=ot({name:k,original_name:$,year:D,country:M,type:y,mark:F,watched:d,favorite:u}),f=l=>a.type=l,g=l=>a.favorite=l,h=l=>a.watched=l,x=l=>a.mark=l,b=async()=>{a.watched_date=a.watched?pt(new Date).format("DD-MM-YYYY"):"",await Q(S.params.id,a),await r.updatedMovie(),console.log("updated movie"),t.close("edit-movie-id")};return(l,s)=>(o(),it(Z(ut),{"modal-id":"edit-movie-id","content-class":"absolute inset-0  bg-[#30313299]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:nt(()=>[e("div",wt,[e("div",St,[e("div",null,[$t,e("div",Dt,[p(lt,{attrSelected:a==null?void 0:a.type,onSelected:f},null,8,["attrSelected"]),p(w,{placeholder:"名稱",text:a.name,"onUpdate:text":s[0]||(s[0]=n=>a.name=n)},null,8,["text"]),p(w,{placeholder:"原始名稱(選項)",text:a.original_name,"onUpdate:text":s[1]||(s[1]=n=>a.original_name=n)},null,8,["text"]),p(w,{placeholder:"年份",text:a.year,"onUpdate:text":s[2]||(s[2]=n=>a.year=n)},null,8,["text"]),p(w,{placeholder:"產地",text:a.country,"onUpdate:text":s[3]||(s[3]=n=>a.country=n)},null,8,["text"]),p(ct,{data:r.categoryList,category:a.categoryList,"onUpdate:category":s[4]||(s[4]=n=>a.categoryList=n)},null,8,["data","category"])]),e("div",Mt,[p(J,{title:"最愛",current:a.favorite,onSelected:g},null,8,["current"]),p(J,{title:"已觀看",current:a.watched,onSelected:h},null,8,["current"]),p(rt,{current:a.mark,onSelected:x},null,8,["current"])]),p(dt,{text:"修改",class:"mt-8",disable:!0,onClick:s[5]||(s[5]=n=>b())})]),e("button",{type:"button",class:"absolute right-10 top-10",onClick:s[6]||(s[6]=n=>Z(t).close("edit-movie-id"))},Lt)])])]),_:1}))}},It=H(Ct,[["__scopeId","data-v-9f958078"]]),I=c=>(X("data-v-acb1605a"),c=c(),tt(),c),zt={class:"z-1 relative flex h-[375px] items-end md:flex md:h-full md:min-h-[500px] md:items-center",id:"backdrop"},Tt={key:0,alt:"",class:"absolute inset-0 size-full object-cover"},Ut=I(()=>e("div",{class:"bg-overlay absolute bottom-0 left-0 h-full w-[100%]"},null,-1)),jt={class:"container relative z-10"},Bt={class:"text-heading-m"},Nt={class:"text-heading-s mt-1"},Ot={class:"mb-20 mt-10 md:mt-20"},Vt={class:"container"},Wt={class:"relative z-10 w-full items-center justify-between md:flex"},Yt={class:"mx-auto w-full md:ml-0 md:w-[35%]",id:"poster"},Et=["src"],Gt={class:"w-full md:w-[55%]"},Kt={key:0,class:"text-body-s-medium info-anim mt-6 w-fit rounded-[4px] bg-primary px-1 py-[2px] text-second md:mt-0",id:"watched-wrap"},Rt={class:"text-body-l mt-3 grid gap-y-2",id:"info-wrap"},Jt={key:0,class:"info-anim"},Zt={key:1,class:"info-anim"},qt={key:2,class:"info-anim"},At={key:3,class:"info-anim"},Ht={key:4,class:"info-anim"},Pt={key:5,class:"info-anim"},Qt={class:"info-anim mt-6 flex items-center",id:"star-wrap"},Xt={key:0,class:"icon-star-fill text-[24px]"},te={key:1,class:"icon-star text-[24px]"},ee={class:"info-anim info-anim mt-6 flex space-x-6 text-[32px] opacity-0"},ae={key:0,class:"icon-heart-fill"},se={key:1,class:"icon-heart"},oe=I(()=>e("i",{class:"icon-pencil-simple"},null,-1)),ie=[oe],ne=I(()=>e("i",{class:"icon-trash"},null,-1)),le=[ne],ce={__name:"movie-detail",setup(c){const r=P(),t=q();q({language:"zh-TW"});const S=mt(()=>{var d;return bt[(d=t.value)==null?void 0:d.type]??""}),k=_t({component:It,attrs:{updatedMovie:async()=>{console.log("test"),t.value=await L(r.params.id)}}}),$=async()=>{var d;await Q(r.params.id,{favorite:!((d=t.value)!=null&&d.favorite)}),t.value=await L(r.params.id)},D=async()=>{console.log(t.value);const{name:d,original_name:u,year:a,country:f,type:g,mark:h,watched:x,favorite:b,categoryList:l}=t.value;k.open(),k.patchOptions({attrs:{name:d,original_name:u,year:a,country:f,type:g,mark:h,watched:x,favorite:b,categoryList:l}})},M=async()=>{await kt(r.params.id)};let y=vt.timeline();const F=async()=>{y.fromTo("#backdrop",{opacity:0},{duration:1,delay:0,opacity:1}),y.fromTo("#backdrop p",{opacity:0,x:200},{x:0,duration:.5,opacity:1,stagger:.2},"-=0.5"),y.fromTo("#poster",{opacity:0,scale:.5},{x:0,duration:1,scale:1,opacity:1},"-=0.3"),y.fromTo(".info-anim",{opacity:0,x:100},{x:0,duration:.5,opacity:1,stagger:.1},"-=1")};return yt(async()=>{t.value=await L(r.params.id),ft(async()=>{await F()})}),(d,u)=>{var f,g,h,x,b,l,s,n,z,T,U,j,B,N,O,V,W,Y,E,G;const a=gt("lazy");return o(),i(C,null,[e("section",null,[e("div",zt,[((f=t.value)==null?void 0:f.background_image)??((g=t.value)==null?void 0:g.postImageUrl)?ht((o(),i("img",Tt,null,512)),[[a,((h=t.value)==null?void 0:h.background_image)??((x=t.value)==null?void 0:x.postImageUrl)]]):m("",!0),Ut,e("div",jt,[e("p",Bt,v((b=t.value)==null?void 0:b.name),1),e("p",Nt,v((l=t.value)==null?void 0:l.original_name),1)])])]),e("section",Ot,[e("div",Vt,[e("div",Wt,[e("div",Yt,[e("img",{src:(s=t.value)==null?void 0:s.postImageUrl,alt:"",class:"rounded-[8px]"},null,8,Et)]),e("div",Gt,[(n=t.value)!=null&&n.watched?(o(),i("div",Kt," 已觀看 ")):m("",!0),e("div",Rt,[(z=t.value)!=null&&z.year?(o(),i("p",Jt,"上映年份: "+v((T=t.value)==null?void 0:T.year),1)):m("",!0),(U=t.value)!=null&&U.record_date?(o(),i("p",Zt," 記錄日期: "+v((j=t.value)==null?void 0:j.record_date),1)):m("",!0),(B=t.value)!=null&&B.watched?(o(),i("p",qt," 觀看日期: "+v((N=t.value)==null?void 0:N.watched_date),1)):m("",!0),(O=t.value)!=null&&O.type?(o(),i("p",At,"種類: "+v(S.value),1)):m("",!0),(V=t.value)!=null&&V.categoryList?(o(),i("p",Ht,[xt(" 分類: "),(o(!0),i(C,null,A((W=t.value)==null?void 0:W.categoryList,_=>(o(),i("span",{key:_},v(_.label)+",",1))),128))])):m("",!0),(Y=t.value)!=null&&Y.country?(o(),i("p",Pt,"產地: "+v((E=t.value)==null?void 0:E.country),1)):m("",!0)]),e("div",Qt,[(o(),i(C,null,A(5,(_,at)=>{var K,R;return e("div",{key:at},[_<=((K=t.value)==null?void 0:K.mark)?(o(),i("i",Xt)):m("",!0),_>((R=t.value)==null?void 0:R.mark)?(o(),i("i",te)):m("",!0)])}),64))]),e("div",ee,[e("button",{onClick:u[0]||(u[0]=_=>$()),class:"transition-transform duration-200 hover:scale-125"},[(G=t.value)!=null&&G.favorite?(o(),i("i",ae)):(o(),i("i",se))]),e("button",{class:"transition-transform duration-200 hover:scale-125",onClick:u[1]||(u[1]=_=>D())},ie),e("button",{class:"transition-transform duration-200 hover:scale-125",onClick:u[2]||(u[2]=_=>M())},le)])])])])])],64)}}},de=H(ce,[["__scopeId","data-v-acb1605a"]]);export{de as default};
