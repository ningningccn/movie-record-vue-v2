import{u as ne,r as y,w as W,g as V,o as H,a as c,c as p,b as e,F as C,d as w,n as L,t as $,e as ee,f as G,h as P,i as z,s as oe,j as B,k as E,l as re,m as ie,p as ae,q as ce,v as j,x as k,y as S,z as R,A as F,B as D,C as ue,D as de,E as pe,G as te,R as se,H as K,S as J,I as fe,J as xe,K as _e}from"./index-Hpi7XxpT.js";import{L as ve}from"./loading-BuulBnvn.js";const he={class:"sticky top-0 z-10 bg-second",id:"category-section"},ye={class:"container relative z-10"},ge={class:"z-10 flex items-center justify-center pt-6"},be={class:"relative"},me=["onClick"],ke=e("div",{class:"-translate-y-[1px] border-b border-enable",id:"category-bar"},null,-1),Ce={__name:"type-tab",emits:["selected"],setup(f,{emit:a}){const o=a,{width:d,height:r}=ne(),s=y(0),t=y(0),_=y(""),x=(l,h)=>{_.value=l;const i=document.querySelector(`.btn-${h}`);s.value=i.clientWidth,t.value=i.offsetLeft,o("selected",l)},b=y([{title:"全部",slug:""},{title:"電影",slug:"movie"},{title:"電視劇",slug:"tv"},{title:"動漫",slug:"cartoon"}]);W(()=>d.value,(l,h)=>{const i=document.querySelector(".btn-0");s.value=i.clientWidth});let n=V.timeline();const u=()=>{n.fromTo("#category-bar",{width:0,opacity:0},{duration:.5,opacity:1,width:"100%",onComplete:()=>{const l=document.querySelector(".btn-0");s.value=l.clientWidth}}),n.fromTo(".category-text",{opacity:0,y:10},{duration:.5,opacity:1,stagger:.1,y:0})};return H(()=>{u()}),(l,h)=>(c(),p("div",he,[e("div",ye,[e("div",ge,[e("div",be,[(c(!0),p(C,null,w(b.value,(i,g)=>(c(),p("button",{key:i.slug,class:L(["text-body-xl-medium category-text relative px-6 py-4 text-enable hover:text-white md:px-[60px]",[{"text-white":_.value==i.slug},`btn-${g}`]]),onClick:v=>x(i.slug,g)},$(i.title),11,me))),128)),e("div",{class:"absolute bottom-0 h-[3px] bg-primary transition-all duration-300",style:ee({width:`${s.value}px`,left:`${t.value}px`})},null,4)])])]),ke]))}},le="--vc-auto-duration",$e=`height var(${le}) cubic-bezier(0.33, 1, 0.68, 1)`,Y={padding:0},we=300,Le={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"},Se=()=>typeof navigator<"u"&&navigator.userAgent.includes("Firefox");function Q(f){return f.value?parseFloat(getComputedStyle(f.value).height):0}function U(f){var a;return{height:`${((a=f.value)==null?void 0:a.scrollHeight)||0}px`}}function X(f){if(!f.value)return{};const{transition:a}=getComputedStyle(f.value);return a==="all 0s ease 0s"||Se()&&a==="all"?{transition:$e}:{transition:a}}function Z(f){if(!f.value)return!0;const{transition:a}=getComputedStyle(f.value);return typeof window.requestAnimationFrame>"u"||window.matchMedia("(prefers-reduced-motion: reduce)").matches||a.includes("none")||a.includes("height 0s")}function Re(f=0){if(f===0)return 0;const a=f/36,o=Math.round((4+15*a**.25+a/5)*10);return Number.isFinite(o)?o:0}const M=G({inheritAttrs:!0,__name:"Collapse",props:{when:{type:Boolean},baseHeight:{default:0},as:{default:"div"}},emits:["collapse","expand","collapsed","expanded"],setup(f,{emit:a}){const o=f,d=a,r=P(o,"when"),s=P(o,"baseHeight"),t=z(()=>({overflow:"hidden",height:`${s.value}px`})),_=z(()=>({...Y,...s.value===0?{display:"none"}:t.value})),x=y(null),b=y(r.value?"expanded":"collapsed"),n=m=>b.value=m;function u(){return r.value?Y:s.value===0?Le:_.value}const l=oe(u()),h=m=>l.value=m,i=m=>h({...l.value,...m}),g=y(we),v=m=>g.value=m,A=z(()=>({[le]:`${g.value}ms`}));function O(){h(Y),n("expanded"),d("expanded")}function I(){h(_.value),n("collapsed"),d("collapsed")}H(()=>{if(!x.value)return;const m=Re(x.value.scrollHeight-s.value);m>0&&v(m),!r.value&&s.value===0&&h(_.value)}),W(r,m=>{if(x.value)if(m){if(Z(x))return O();n("expanding"),d("expand"),h({...Y,...t.value,...A.value}),requestAnimationFrame(()=>{if(x.value.scrollHeight===0)return O();i({...U(x),...X(x),willChange:"height"})})}else{if(Z(x)||(n("collapsing"),d("collapse"),i({...A.value,...U(x)}),x.value.scrollHeight===0))return I();requestAnimationFrame(()=>{i({...t.value,...X(x),willChange:"height"})})}}),W(s,m=>{r.value||(m>0?i({display:void 0,height:`${m}px`}):i({display:"none"}))});function T(m){m.target&&m.target===x.value&&m.propertyName==="height"&&(r.value?Math.abs(x.value.scrollHeight-Q(x))<1&&O():Math.abs(s.value-Q(x))<1&&I())}return(m,q)=>(c(),B(ce(o.as),{ref_key:"collapseRef",ref:x,style:ee(l.value),onTransitionend:T,"data-collapse":b.value},{default:E(()=>[re(m.$slots,"default",ie(ae({state:b.value})))]),_:3},40,["style","data-collapse"]))}}),Ae={class:"cursor-pointer rounded-[8px] bg-card"},Ee=e("div",{class:"flex space-x-2"},[e("i",{class:"icon-sort text-[22px]"}),e("p",null,"排序")],-1),je={class:"flex flex-col space-y-6 p-6 pb-4"},Fe=["onClick"],ze={key:0,class:"icon-check text-[20px]"},Oe={__name:"sort",setup(f){const a=j(),o=y(!1),d=[{title:"最新加入",key:"latest_addition",slug:"desc",filterWord:"createAt"},{title:"最舊加入",key:"oldest_addition",slug:"asc",filterWord:"createAt"},{title:"最新年份",key:"latest_year",slug:"desc",filterWord:"year"},{title:"最舊年份",key:"oldest_year",slug:"asc",filterWord:"year"}],r=(s,t,_)=>{a.setOrder({key:s,slug:t,filterWord:_})};return(s,t)=>(c(),p("div",Ae,[e("div",{class:"flex items-center justify-between px-6 py-2",onClick:t[0]||(t[0]=_=>o.value=!o.value)},[Ee,e("i",{class:L(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":o.value}])},null,2)]),k(S(M),{when:o.value},{default:E(()=>[e("div",je,[(c(),p(C,null,w(d,_=>e("button",{type:"button",class:"text-body-m-medium flex items-center justify-between text-left",key:_.key,onClick:x=>r(_.key,_.slug,_.filterWord)},[e("p",null,$(_.title),1),_.key==S(a).currKey?(c(),p("i",ze)):R("",!0)],8,Fe)),64))])]),_:1},8,["when"])]))}},Ie={key:0,class:"absolute size-full rounded-[4px] bg-primary"},Ve=e("i",{class:"icon-check text-[20px] text-second"},null,-1),We=[Ve],N={__name:"checkbox",props:{title:String,slug:String|Number,disabled:{type:Boolean,default:!1},isChecked:Boolean},emits:["selected"],setup(f,{expose:a,emit:o}){const d=o,r=f,s=y(r.isChecked),t=()=>{r.disabled||(s.value=!s.value,d("selected",{label:r.title,id:r.slug}))},_=()=>{s.value=!1,d("selected","clear")};return W(()=>r.isChecked,x=>{s.value=x}),a({clearCheckbox:_}),(x,b)=>(c(),p("div",{onClick:b[0]||(b[0]=n=>t()),class:L(["flex items-center space-x-2",[{"text-disable":f.disabled},{"cursor-pointer":!f.disabled}]])},[e("div",{class:L(["relative size-[20px] rounded-[4px]",[{border:!s.value},{"border-disable":f.disabled}]])},[s.value?(c(),p("div",Ie,We)):R("",!0)],2),e("p",null,$(f.title),1)],2))}},Be=e("p",null,"狀態",-1),Me={class:"flex flex-col space-y-3 pt-3"},Te={__name:"status",props:{isAllExpanded:{type:Boolean}},setup(f,{expose:a}){const o=j(),d=[{title:"最愛",slug:"favorite"},{title:"已觀看",slug:"watched"},{title:"待觀看",slug:"to_be_watching"}],r=y(!0),s=F(o.currStatusLists),t=y(),_=u=>!!(s.includes("watched")&&u=="to_be_watching"||s.includes("to_be_watching")&&u=="watched"),x=u=>s.findIndex(h=>h===u)>-1,b=u=>{if(u=="clear")s.length=0;else{const l=s.indexOf(u.id);l!==-1?s.splice(l,1):s.push(u.id),o.setCurrStatusList(s)}};return a({clearAllCheckbox:()=>{t.value.forEach(u=>{u.clearCheckbox()})}}),(u,l)=>(c(),p("div",null,[e("div",{class:"flex cursor-pointer items-center justify-between",onClick:l[0]||(l[0]=h=>r.value=!r.value)},[Be,e("i",{class:L(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":r.value}])},null,2)]),k(S(M),{when:r.value},{default:E(()=>[e("div",Me,[(c(),p(C,null,w(d,(h,i)=>e("div",{key:i,class:""},[k(N,{title:h.title,slug:h.slug,disabled:_(h.slug),isChecked:x(h.slug),onSelected:b,ref_for:!0,ref_key:"statusRef",ref:t},null,8,["title","slug","disabled","isChecked"])])),64))])]),_:1},8,["when"])]))}},Ye={key:0},He={class:"flex flex-col space-y-3 pt-3"},De={__name:"year",setup(f,{expose:a}){const o=j(),d=z(()=>o.yearLists.map(n=>({title:n,slug:n}))),r=y(),s=y(!0),t=F(o.currYearLists),_=n=>{if(n=="clear")t.length=0;else{const u=t.findIndex(l=>l==n.id);u!==-1?t.splice(u,1):t.push(n.id),o.setCurrYearLists(t)}},x=n=>t.findIndex(l=>l===n)>-1;return a({clearAllCheckbox:()=>{r.value.forEach(n=>{n.clearCheckbox()})}}),(n,u)=>(c(),p("div",null,[e("div",{class:"flex cursor-pointer items-center justify-between",onClick:u[0]||(u[0]=l=>s.value=!s.value)},[e("p",null,[D(" 年份 "),t.length>0?(c(),p("span",Ye,"("+$(t.length)+")",1)):R("",!0)]),e("i",{class:L(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":s.value}])},null,2)]),k(S(M),{when:s.value},{default:E(()=>[e("div",He,[(c(!0),p(C,null,w(d.value,(l,h)=>(c(),p("div",{key:h,class:""},[k(N,{title:l.title,slug:l.slug,isChecked:x(l.slug),onSelected:_,ref_for:!0,ref_key:"yearRef",ref:r},null,8,["title","slug","isChecked"])]))),128))])]),_:1},8,["when"])]))}},Ne={key:0},qe={class:"flex flex-col space-y-3 pt-3"},Ge={__name:"category",emits:["emitCurrCategory"],setup(f,{expose:a,emit:o}){const d=j(),r=y(),s=y(!0),t=F(d.currCategoryLists),_=n=>t.findIndex(l=>l.id===n)>-1,x=n=>{if(n=="clear")t.length=0;else{const u=t.findIndex(l=>l.id==n.id);u!==-1?t.splice(u,1):t.push(n),d.setCurrCategoryLists(t)}};return a({clearAllCheckbox:()=>{r.value.forEach(n=>{n.clearCheckbox()})}}),(n,u)=>(c(),p("div",null,[e("div",{class:"flex cursor-pointer items-center justify-between",onClick:u[0]||(u[0]=l=>s.value=!s.value)},[e("p",null,[D(" 類別 "),t.length>0?(c(),p("span",Ne,"("+$(t.length)+")",1)):R("",!0)]),e("i",{class:L(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":s.value}])},null,2)]),k(S(M),{when:s.value},{default:E(()=>[e("div",qe,[(c(!0),p(C,null,w(S(d).categoryLists,(l,h)=>(c(),p("div",{key:h,class:""},[k(N,{title:l.label,slug:l.id,isChecked:_(l.id),onSelected:x,ref_for:!0,ref_key:"categoryRef",ref:r},null,8,["title","slug","isChecked"])]))),128))])]),_:1},8,["when"])]))}},Pe={key:0},Ke={class:"flex flex-col space-y-3 pt-3"},Je={__name:"country",setup(f,{expose:a}){const o=j(),d=z(()=>o.countryLists.map(n=>({title:n,slug:n}))),r=y(),s=y(!0),t=F(o.currCountyLists),_=n=>t.findIndex(l=>l===n)>-1,x=n=>{if(n=="clear")t.length=0;else{const u=t.findIndex(l=>l==n.id);u!==-1?t.splice(u,1):t.push(n.id),o.setCurrCountryLists(t)}};return a({clearAllCheckbox:()=>{r.value.forEach(n=>{n.clearCheckbox()})}}),(n,u)=>(c(),p("div",null,[e("div",{class:"flex cursor-pointer items-center justify-between",onClick:u[0]||(u[0]=l=>s.value=!s.value)},[e("p",null,[D(" 產地 "),t.length>0?(c(),p("span",Pe,"("+$(t.length)+")",1)):R("",!0)]),e("i",{class:L(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":s.value}])},null,2)]),k(S(M),{when:s.value},{default:E(()=>[e("div",Ke,[(c(!0),p(C,null,w(d.value,(l,h)=>(c(),p("div",{key:l.slug,class:""},[k(N,{title:l.title,slug:l.slug,isChecked:_(l.slug),onSelected:x,ref_for:!0,ref_key:"countryRef",ref:r},null,8,["title","slug","isChecked"])]))),128))])]),_:1},8,["when"])]))}},Qe={class:"rounded-[8px] bg-card"},Ue={class:"flex items-center justify-between px-6 py-2"},Xe={class:"flex space-x-2"},Ze=e("i",{class:"icon-filter text-[22px]"},null,-1),et={class:"flex flex-col space-y-6 px-6 pb-4 pt-6"},tt={__name:"index",setup(f){const a=j(),o=y(!0),d=y(),r=y(),s=y(),t=y(),_=()=>{d.value.clearAllCheckbox(),r.value.clearAllCheckbox(),s.value.clearAllCheckbox(),t.value.clearAllCheckbox()},x=z(()=>{const{selectedStatusLists:b,selectedYearLists:n,selectedCategoryLists:u,selectedCountryLists:l}=a.getFilterList;return b.length>0||n.length>0||u.length>0||l.length>0});return(b,n)=>(c(),p("div",Qe,[e("div",Ue,[e("div",Xe,[Ze,e("p",{class:"cursor-pointer",onClick:n[0]||(n[0]=u=>o.value=!o.value)},"篩選")]),e("p",{class:L(["text-body-s",[x.value?"cursor-pointer text-primary hover:text-white":"text-disable"]]),onClick:n[1]||(n[1]=u=>_())}," 清除 ",2)]),e("div",et,[k(Te,{isAllExpanded:o.value,ref_key:"statusRef",ref:d},null,8,["isAllExpanded"]),k(De,{ref_key:"yearRef",ref:r},null,512),k(Ge,{ref_key:"categoryRef",ref:s},null,512),k(Je,{ref_key:"countryRef",ref:t},null,512)])]))}},st={class:"skeleton-card relative aspect-[3/4.3] overflow-hidden rounded-[8px]"},lt={alt:"",class:"absolute aspect-[3/4.3] size-full cursor-pointer object-cover"},nt={class:"absolute left-0 top-0",id:"card-watched-wrap"},ot={key:0,class:"text-body-s-medium rounded-[4px] bg-primary px-1 py-[2px] text-second"},rt={class:"mt-2 flex justify-between"},it={class:"text-body-m-medium"},at={key:0,class:"icon-heart-fill pt-1"},ct={key:1,class:"icon-heart pt-1"},ut={class:"text-body-s-medium mt-1 flex justify-between text-enable"},dt={class:"flex flex-wrap gap-x-2"},pt={key:0,class:"flex items-center"},ft={key:0},xt={__name:"card",props:{data:{type:Object}},setup(f){const a=f;ue(),y(!1);const o=V.timeline(),d=()=>{o.fromTo("#card-watched-wrap",{x:-200},{x:0,delay:.5})},r=z(()=>{var s,t;return(t=(s=a==null?void 0:a.data)==null?void 0:s.movie)==null?void 0:t.year.slice(0,4)});return H(async()=>{await d()}),(s,t)=>{const _=de("RouterLink"),x=pe("lazy");return c(),B(_,{to:`/list/${a.data.id}`,class:"relative cursor-pointer overflow-hidden"},{default:E(()=>{var b,n,u,l,h,i,g,v,A,O;return[e("div",st,[te(e("img",lt,null,512),[[x,(n=(b=f.data)==null?void 0:b.movie)==null?void 0:n.postImageUrl]])]),e("div",nt,[(l=(u=f.data)==null?void 0:u.movie)!=null&&l.watched?(c(),p("div",ot," 已觀看 ")):R("",!0)]),e("div",null,[e("div",rt,[e("div",it,$((i=(h=f.data)==null?void 0:h.movie)==null?void 0:i.name),1),(v=(g=f.data)==null?void 0:g.movie)!=null&&v.favorite?(c(),p("i",at)):(c(),p("i",ct))]),e("div",ut,[e("div",dt,[(c(!0),p(C,null,w((O=(A=f.data)==null?void 0:A.movie)==null?void 0:O.categoryList,(I,T)=>{var m,q;return c(),p("div",{key:I.slug},[T<3?(c(),p("div",pt,[D($(I.label)+" ",1),((q=(m=f.data)==null?void 0:m.movie)==null?void 0:q.categoryList.length)>3&&T==2?(c(),p("span",ft,"...")):R("",!0)])):R("",!0)])}),128))]),e("div",null,$(r.value),1)])])]}),_:1},8,["to"])}}},_t={class:"container"},vt=e("div",{class:"text-heading-m flex items-center justify-center gap-x-2"},[e("i",{class:"icon-sort"}),e("p",{class:"text-heading-s"},"排序")],-1),ht=["onClick"],yt={key:0,class:"icon-check"},gt=G({__name:"sort-modal",props:{title:{}},setup(f){const a=j(),o=[{title:"最新加入",slug:"desc"},{title:"最舊加入",slug:"asc"}],d=r=>a.setOrder(r);return(r,s)=>(c(),B(S(se),{"content-class":"absolute bottom-0 w-full p-4 bg-card container rounded-t-[20px] pb-10","swipe-to-close":"down","content-transition":"vfm-slide-down","overlay-transition":"vfm-fade"},{default:E(()=>[e("div",_t,[vt,e("div",null,[(c(),p(C,null,w(o,t=>e("button",{type:"button",class:"text-body-xl-medium flex items-center justify-between py-2 w-full",key:t.slug,onClick:_=>d(t.slug)},[e("p",null,$(t.title),1),t.slug==S(a).currOrder?(c(),p("i",yt)):R("",!0)],8,ht)),64))])])]),_:1}))}}),bt={class:"container"},mt=e("div",{class:"text-heading-m flex items-center justify-center gap-x-2"},[e("i",{class:"icon-filter"}),e("p",{class:"text-heading-s"},"篩選")],-1),kt=e("div",{class:"text-body-xl-medium"},"狀態",-1),Ct={class:"mt-2 flex gap-3"},$t=["onClick"],wt={class:"mt-6"},Lt=e("div",{class:"text-body-xl-medium"},"年份",-1),St={class:"mt-2 flex flex-wrap gap-3"},Rt=["onClick"],At={class:"mt-6"},Et=e("div",{class:"text-body-xl-medium"},"類別",-1),jt={class:"mt-2 flex flex-wrap gap-3"},Ft=["onClick"],zt={class:"mt-6"},Ot=e("div",{class:"text-body-xl-medium"},"產地",-1),It={class:"mt-2 flex flex-wrap gap-3"},Vt=["onClick"],Wt=G({__name:"filter-modal",setup(f){const a=[{title:"最愛",slug:"favorite"},{title:"已觀看",slug:"watched"},{title:"待觀看",slug:"to_be_watching"}],o=j(),d=F(o.currStatusLists),r=F(o.currYearLists),s=F(o.currCategoryLists),t=F(o.currCountyLists),_=z(()=>o.countryLists.map(i=>({title:i,slug:i}))),x=i=>s.findIndex(v=>v.id===i)>-1,b=i=>!!(d.includes("watched")&&i=="to_be_watching"||d.includes("to_be_watching")&&i=="watched"),n=i=>{if(console.log(i),i=="clear")d.length=0;else{const g=d.indexOf(i.slug);g!==-1?d.splice(g,1):d.push(i.slug),o.setCurrStatusList(d)}},u=i=>{if(i=="clear")r.length=0;else{const g=r.indexOf(i);g!==-1?r.splice(g,1):r.push(i),o.setCurrYearLists(r)}},l=i=>{if(i=="clear")s.length=0;else{const g=s.findIndex(v=>v.id===i.id);g!==-1?s.splice(g,1):s.push(i)}},h=i=>{if(i=="clear")t.length=0;else{const g=t.indexOf(i.slug);g!==-1?t.splice(g,1):t.push(i.slug),o.setCurrCountryLists(t)}};return(i,g)=>(c(),B(S(se),{"content-class":"absolute bottom-0 w-full p-4 bg-card container rounded-t-[20px] pb-10","swipe-to-close":"down","content-transition":"vfm-slide-down","overlay-transition":"vfm-fade"},{default:E(()=>[e("div",bt,[mt,e("div",null,[kt,e("div",Ct,[(c(),p(C,null,w(a,v=>e("button",{type:"button",class:L(["rounded-[8px] border border-enable px-2 py-1",{"border-primary bg-primary":d.indexOf(v.slug)>=0,"cursor-default border-disable text-disable":b(v.slug)}]),key:v.slug,onClick:A=>n(v)},[e("p",null,$(v.title),1)],10,$t)),64))])]),e("div",wt,[Lt,e("div",St,[(c(!0),p(C,null,w(S(o).yearLists,v=>(c(),p("button",{type:"button",class:L(["rounded-[8px] border border-enable px-2 py-1",{"border-primary bg-primary":r.indexOf(v)>=0}]),key:v,onClick:A=>u(v)},[e("p",null,$(v),1)],10,Rt))),128))])]),e("div",At,[Et,e("div",jt,[(c(!0),p(C,null,w(S(o).categoryLists,v=>(c(),p("button",{type:"button",class:L(["rounded-[8px] border border-enable px-2 py-1",{"border-primary bg-primary":x(v.id)}]),key:v.id,onClick:A=>l(v)},[e("p",null,$(v.label),1)],10,Ft))),128))])]),e("div",zt,[Ot,e("div",It,[(c(!0),p(C,null,w(_.value,v=>(c(),p("button",{type:"button",class:L(["rounded-[8px] border border-enable px-2 py-1",{"border-primary bg-primary":t.indexOf(v.slug)>=0}]),key:v.slug,onClick:A=>h(v)},[e("p",null,$(v.title),1)],10,Vt))),128))])])])]),_:1}))}}),Bt={class:"mt-6 flex items-center gap-x-2"},Mt=e("i",{class:"icon-sort text-[24px]"},null,-1),Tt=e("p",{class:"text-body-xl-medium"},"排序",-1),Yt=[Mt,Tt],Ht=e("i",{class:"icon-filter text-[24px]"},null,-1),Dt=e("p",{class:"text-body-xl-medium"},"篩選",-1),Nt=[Ht,Dt],qt={__name:"filter-m",setup(f){const a=K({component:gt,attrs:{}}),o=K({component:Wt,attrs:{}}),d=()=>{a.open()},r=()=>{o.open()};return(s,t)=>(c(),p("section",Bt,[e("button",{type:"button",class:"flex flex-1 items-center justify-center gap-x-2 rounded-[8px] bg-card py-3",onClick:t[0]||(t[0]=_=>d())},Yt),e("button",{type:"button",class:"flex flex-1 items-center justify-center gap-x-2 rounded-[8px] bg-card py-3",onClick:t[1]||(t[1]=_=>r())},Nt)]))}},Gt={class:"container mb-20"},Pt={class:"mt-6 flex md:mt-14 md:space-x-5"},Kt={class:"hidden min-w-[197px] max-w-[197px] md:block"},Jt={class:"space-y-4"},Qt={class:"card-wrap grid grid-cols-4 gap-5 md:grid-cols-6 lg:grid-cols-6 xl:grid-cols-10",id:"card-wrap"},Ut={key:0,class:"text-heading-s flex size-full items-center justify-center"},Xt={key:0},ts={__name:"index",setup(f){const a=j(),o=y(!1),d=y(""),r=y([]),s=y(null),t=async(l,h)=>{o.value=!0;const{dataDoc:i,latestDoc:g}=await _e(l,h,s.value);s.value=g,i.forEach(v=>{r.value.push({id:v.id,movie:v.data()})}),o.value=!1};V.registerPlugin(J),t(d.value,a.getFilterList);const _=l=>{r.value=[],s.value=null,d.value=l,t(d.value,a.getFilterList)};W(()=>a.getFilterList,(l,h)=>{r.value=[],s.value=null,t(d.value,a.getFilterList)},{deep:!0});const x=y(null),b=y(null);fe(b,([{isIntersecting:l}])=>{l&&s.value&&t(d.value,a.getFilterList)},{pageViewRef:x});const n=V.timeline(),u=()=>{n.fromTo(".an-sidebar",{display:"hidden",x:-100,opacity:0},{duration:.5,opacity:1,stagger:.2,delay:.5,x:0,display:"block"})};return V.registerPlugin(J),H(async()=>{await u()}),(l,h)=>(c(),p(C,null,[k(Ce,{onSelected:_}),e("div",Gt,[k(qt,{class:"block md:hidden"}),e("main",Pt,[e("div",Kt,[e("div",Jt,[k(Oe,{class:"an-sidebar"}),k(tt,{class:"an-sidebar"})])]),e("div",{class:"w-full",ref_key:"pageViewRef",ref:x},[e("div",Qt,[(c(!0),p(C,null,w(r.value,(i,g)=>(c(),B(xt,{data:i,class:"card col-span-2",key:g},null,8,["data"]))),128))]),r.value.length==0||o.value?(c(),p("div",Ut,[te(k(ve,null,null,512),[[xe,o.value]]),r.value.length==0&&!o.value?(c(),p("div",Xt,"尚無資料")):R("",!0)])):R("",!0),e("div",{ref_key:"infiniteRef",ref:b},null,512)],512)])])],64))}};export{ts as default};
