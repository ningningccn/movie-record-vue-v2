import{_ as M,J as ae,K as se,h as w,a as m,c as p,q as v,j as Z,L as le,t as i,P as oe,v as $,u as S,R as ne,b as t,F as D,d as H,y as I,E as U,G as C,S as de,r as f,T as J,w as re,i as ce,U as ie,V as ue,B as k,W as me,X as q,Y as ve,C as pe,Z as _e,$ as ge,a0 as ye,O as he,a1 as be,a2 as xe}from"./index-KQRSv2Nd.js";const X={JP:"日本",TW:"台灣",US:"美國",KR:"韓國"},Q={28:"動作",12:"冒險",16:"動畫",35:"喜劇",80:"犯罪",99:"紀錄",18:"劇情",10751:"家庭",14:"奇幻",36:"歷史",27:"恐怖",10402:"音樂",9648:"懸疑",10749:"愛情",878:"科學",10770:"電視電影",53:"驚悚",10752:"戰爭",37:"西部",10759:"動作冒險",10762:"兒童",10763:"新聞",10764:"真人秀",10765:"科幻與奇幻",10766:"肥皂劇",10767:"脱口秀",10768:"戰爭與政治"},fe=l=>(U("data-v-6bb0c7e7"),l=l(),C(),l),we={key:0},$e={class:"flex flex-wrap items-center gap-3"},ke=["onClick"],Se=fe(()=>t("i",{class:"icon-close text-[16px]"},null,-1)),De=[Se],Ie={__name:"category",props:ae({data:{type:Object}},{category:{},categoryModifiers:{}}),emits:["update:category"],setup(l){const s=l,e=se(l,"category"),h=w(()=>{var _;return(_=s.data)==null?void 0:_.map(u=>({label:Q[u.id]??u.id,slug:u.id}))}),a=_=>{const u=e.value.findIndex(d=>d.slug===_);u!==-1&&e.value.splice(u,1)};return(_,u)=>(m(),p(D,null,[h.value.length>0?(m(),p("div",we,[v(S(ne),{modelValue:e.value,"onUpdate:modelValue":u[0]||(u[0]=d=>e.value=d),options:h.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"label","track-by":"slug"},{selection:Z(({values:d,search:b,isOpen:c})=>[d.length?le((m(),p("span",{key:0,class:"multiselect__single"},i(d.length)+" options selected",513)),[[oe,!c]]):$("",!0)]),_:1},8,["modelValue","options"])])):$("",!0),t("div",$e,[(m(!0),p(D,null,H(e.value,d=>(m(),p("div",{class:"text-body-l-semibold flex items-center space-x-3 rounded-[8px] border border-enable px-2 py-1 text-enable",key:d.slug},[I(i(d.label)+" ",1),t("button",{type:"button",onClick:b=>a(d==null?void 0:d.slug)},De,8,ke)]))),128))])],64))}},Me=M(Ie,[["__scopeId","data-v-6bb0c7e7"]]),ee=l=>(U("data-v-ffd3099f"),l=l(),C(),l),Ue={class:"absolute inset-0 h-full overflow-auto"},Ce={class:"main-gradient relative mx-auto my-[128px] w-[489px] rounded-[50px] border border-[#FFFFFF33] bg-black p-20"},Te=ee(()=>t("p",{class:"text-heading-s"},"添加記錄",-1)),Fe={class:"mt-8 space-y-6"},Ye={class:"space-y-3"},Ve=ee(()=>t("i",{class:"icon-close text-[32px]"},null,-1)),je=[Ve],Ne={__name:"add-movie-modal",props:{name:{type:String},year:{type:String},country:{type:String},poster_img:{type:String},type:{type:String},genres:{type:Object}},setup(l){const s=l;console.log(s);const e=de();f("");const h=f(null),a=f({record_date:J(new Date).format("DD/MM/YYYY"),type:"",name:"",year:"",country:"",mark:0,favorite:!1,categoryList:[],watched:!1,postImageUrl:"",background_image:null});a.value.type=(s==null?void 0:s.type)??"",a.value.name=(s==null?void 0:s.name)??"",a.value.year=(s==null?void 0:s.year)??"",a.value.country=(s==null?void 0:s.country)??"",a.value.background_image=(s==null?void 0:s.background_image)??null;const _=o=>a.value.record_date=o,u=o=>a.value.type=o,d=o=>a.value.favorite=o,b=o=>a.value.watched=o,c=o=>a.value.mark=o,g=async o=>h.value=o,x=async()=>{a.value={...a.value,watched_date:a.value.watched?J(new Date).format("DD/MM/YYYY"):""},s.poster_img?a.value.postImageUrl=`https://image.tmdb.org/t/p/w780${s.poster_img}`:a.value.postImageUrl=await ge(h.value),await ye(a.value),console.log("added movie"),e.close("add-movie-id")},y=w(()=>!!(a.value.country&&a.value.type&&a.value.name&&a.value.year));return re(a,o=>{o.country&&o.type&&o.name&&o.year&&(y.value=!0)},{deep:!0}),(o,n)=>(m(),ce(S(_e),{"modal-id":"add-movie-id","content-class":"absolute inset-0  bg-[#30313299]"},{default:Z(()=>[t("div",Ue,[t("div",Ce,[t("div",null,[Te,t("div",Fe,[v(ie,{onSelected:_,date:a.value.record_date,"onUpdate:date":n[0]||(n[0]=r=>a.value.record_date=r)},null,8,["date"]),v(ue,{attrSelected:l.type,onSelected:u},null,8,["attrSelected"]),v(k,{placeholder:"名稱",text:a.value.name,"onUpdate:text":n[1]||(n[1]=r=>a.value.name=r)},null,8,["text"]),v(k,{placeholder:"年份",text:a.value.year,"onUpdate:text":n[2]||(n[2]=r=>a.value.year=r)},null,8,["text"]),v(k,{placeholder:"產地",text:a.value.country,"onUpdate:text":n[3]||(n[3]=r=>a.value.country=r)},null,8,["text"]),v(Me,{data:l.genres,category:a.value.categoryList,"onUpdate:category":n[4]||(n[4]=r=>a.value.categoryList=r)},null,8,["data","category"])]),v(me,{class:"my-8",imgUrl:`https://image.tmdb.org/t/p/w780${l.poster_img}`,movieName:l.name,onImageData:g},null,8,["imgUrl","movieName"]),t("div",Ye,[v(q,{title:"最愛",onSelected:d}),v(q,{title:"已觀看",onSelected:b}),v(ve,{onSelected:c})]),v(pe,{text:"添加",class:"mt-8",disable:y.value,onClick:n[5]||(n[5]=r=>x())},null,8,["disable"])]),t("button",{type:"button",class:"absolute right-10 top-10",onClick:n[6]||(n[6]=r=>S(e).close("add-movie-id"))},je)])])]),_:1}))}},ze=M(Ne,[["__scopeId","data-v-ffd3099f"]]),Be=l=>l==null?void 0:l.map(s=>({label:Q[s.id]??s.id,slug:s.id})),T=l=>(U("data-v-738d9464"),l=l(),C(),l),Oe={class:"relative"},Re={class:"z-5 relative flex h-[375px] items-end md:flex md:h-[500px] md:items-center"},Pe=["src"],We=["src"],Ae=T(()=>t("div",{class:"bg-overlay absolute bottom-0 left-0 h-full w-[100%]"},null,-1)),Ke={class:"container relative hidden md:block"},Le={class:"w-[100%] md:w-[45%]"},Ee={class:"text-heading-m"},Ge={class:"text-heading-s mt-1"},Je={class:"text-body-l mt-3 text-enable"},qe={key:0},Xe={class:"md: container relative z-20 mt-[-150px] block translate-y-[110px] md:hidden md:translate-y-0"},Ze={class:"w-[100%] md:w-[45%]"},He={class:"text-heading-m"},Qe={class:"text-heading-s mt-1"},et={class:"text-body-l mt-3 text-enable"},tt={key:0},at=T(()=>t("button",{class:"text-body-l-semibold mt-[24px] w-full rounded-[8px] border border-primary py-2 text-center text-primary md:max-w-[329px]"}," 添加 ",-1)),st={class:"container mt-10 translate-y-[110px] md:mt-20 md:hidden md:translate-y-0"},lt={class:"md:flex md:justify-between"},ot={class:"mx-auto w-[50%] md:ml-0 md:w-[30%] lg:w-[24%]"},nt=["src"],dt={class:"mt-10 w-full md:mt-0 md:w-[66%]"},rt=T(()=>t("div",null,null,-1)),ct={__name:"search-detail",setup(l){const s=he(),e=f(),h=f({language:"zh-TW"}),a=async()=>{const c=await xe(s.path,{params:h.value});e.value=c.data,console.log(e.value)},_=be({component:ze,attrs:{}}),u=async()=>{var c,g,x,y,o,n,r;_.open(),_.patchOptions({attrs:{name:((c=e.value)==null?void 0:c.title)??((g=e.value)==null?void 0:g.name),year:((x=e.value)==null?void 0:x.release_date)??((y=e.value)==null?void 0:y.first_air_date),country:b.value,poster_img:(o=e.value)==null?void 0:o.poster_path,background_image:(n=e.value)!=null&&n.backdrop_path?"https://image.tmdb.org/t/p/w1280${data?.backdrop_path}":null,genres:(r=e.value)==null?void 0:r.genres,type:s.params.mediaType}})};a();const d=w(()=>{var c;return Be((c=e.value)==null?void 0:c.genres)});console.log(d.value);const b=w(()=>{var g;const c=(g=e.value)==null?void 0:g.origin_country[0];return X.hasOwnProperty(c)?X[c]:c});return(c,g)=>{var x,y,o,n,r,F,Y,V,j,N,z,B,O,R,P,W,A,K,L,E;return m(),p("div",Oe,[t("div",Re,[(x=e.value)!=null&&x.backdrop_path?(m(),p("img",{key:0,src:`https://image.tmdb.org/t/p/w1280${(y=e.value)==null?void 0:y.backdrop_path}`,alt:"",class:"absolute inset-0 size-full object-cover"},null,8,Pe)):(m(),p("img",{key:1,src:`https://image.tmdb.org/t/p/w1280${(o=e.value)==null?void 0:o.poster_path}`,alt:"",class:"absolute inset-0 size-full object-cover"},null,8,We)),Ae,t("div",Ke,[t("div",Le,[t("p",Ee,i(((n=e.value)==null?void 0:n.title)??((r=e.value)==null?void 0:r.name)),1),t("p",Ge,i(((F=e.value)==null?void 0:F.original_title)??((Y=e.value)==null?void 0:Y.original_name)),1),t("div",Je,[t("p",null,"上映日期:"+i(((V=e.value)==null?void 0:V.release_date)??((j=e.value)==null?void 0:j.first_air_date)),1),(N=e.value)!=null&&N.runtime?(m(),p("p",qe,"片長:"+i((z=e.value)==null?void 0:z.runtime)+"分鐘",1)):$("",!0),t("p",null,"產地:"+i(b.value),1),t("p",null,[I(" 類型:"),(m(!0),p(D,null,H(d.value,(G,te)=>(m(),p("span",{key:te},i(G.label),1))),128))])]),t("button",{class:"text-body-l-semibold mt-[24px] w-full rounded-[8px] border border-primary py-2 text-center text-primary md:max-w-[329px]",onClick:g[0]||(g[0]=G=>u())}," 添加紀錄 ")])])]),t("section",Xe,[t("div",Ze,[t("p",He,i(((B=e.value)==null?void 0:B.title)??((O=e.value)==null?void 0:O.name)),1),t("p",Qe,i((R=e.value)==null?void 0:R.original_title),1),t("div",et,[t("p",null,"上映日期:"+i(((P=e.value)==null?void 0:P.release_date)??((W=e.value)==null?void 0:W.first_air_date)),1),(A=e.value)!=null&&A.runtime?(m(),p("p",tt,"片長:"+i((K=e.value)==null?void 0:K.runtime)+"分鐘",1)):$("",!0),t("p",null,"產地:"+i(b.value),1)]),at])]),t("section",st,[t("div",lt,[t("div",ot,[t("img",{src:`https://image.tmdb.org/t/p/w780${(L=e.value)==null?void 0:L.poster_path}`,alt:"",class:"rounded-[8px]"},null,8,nt)]),t("div",dt,[I(i((E=e.value)==null?void 0:E.overview)+" ",1),rt])])])])}}},ut=M(ct,[["__scopeId","data-v-738d9464"]]);export{ut as default};
