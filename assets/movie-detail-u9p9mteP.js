import{_ as R,U as X,R as T,x as A,a as l,i as H,j as P,b as t,q as p,X as Q,E as k,Y as Z,$ as V,a0 as tt,G as et,u as Y,a1 as at,V as st,a7 as G,I as W,J as q,r as E,h as ot,a4 as nt,o as lt,a8 as I,c as i,t as _,v as S,y as it,F as C,d as O,a9 as ct}from"./index-BjXT1xGw.js";const J=r=>(W("data-v-9cb93a5c"),r=r(),q(),r),rt={class:"absolute inset-0 h-full overflow-auto"},dt={class:"main-gradient relative mx-auto my-[128px] w-[489px] rounded-[50px] border border-[#FFFFFF33] bg-black p-20"},ut=J(()=>t("p",{class:"text-heading-s"},"修改記錄",-1)),pt={class:"mt-8 space-y-6"},mt={class:"mt-8 space-y-3"},vt=J(()=>t("i",{class:"icon-close text-[32px]"},null,-1)),_t=[vt],yt={__name:"edit-movie-modal",props:{updatedMovie:{type:Function},name:{type:String},original_name:{type:String},year:{type:String},country:{type:String},poster_img:{type:String},background_image:{type:String},type:{type:String},genres:{type:Object},categoryList:{type:Object},mark:{type:Number},watched:{type:Boolean},favorite:{type:Boolean}},setup(r){const d=r;console.log(d.categoryList);const e=X(),$=T(),{name:b,original_name:M,year:F,country:D,type:u,mark:n,watched:m,favorite:y}=d,a=A({name:b,original_name:M,year:F,country:D,type:u,mark:n,watched:m,favorite:y}),g=c=>a.type=c,h=c=>a.favorite=c,x=c=>a.watched=c,f=c=>a.mark=c,w=async()=>{a.watched_date=a.watched?st(new Date).format("DD-MM-YYYY"):"",await G($.params.id,a),await d.updatedMovie(),console.log("updated movie"),e.close("edit-movie-id")};return(c,s)=>(l(),H(Y(at),{"modal-id":"edit-movie-id","content-class":"absolute inset-0  bg-[#30313299]"},{default:P(()=>[t("div",rt,[t("div",dt,[t("div",null,[ut,t("div",pt,[p(Q,{attrSelected:a==null?void 0:a.type,onSelected:g},null,8,["attrSelected"]),p(k,{placeholder:"名稱",text:a.name,"onUpdate:text":s[0]||(s[0]=o=>a.name=o)},null,8,["text"]),p(k,{placeholder:"原始名稱(選項)",text:a.original_name,"onUpdate:text":s[1]||(s[1]=o=>a.original_name=o)},null,8,["text"]),p(k,{placeholder:"年份",text:a.year,"onUpdate:text":s[2]||(s[2]=o=>a.year=o)},null,8,["text"]),p(k,{placeholder:"產地",text:a.country,"onUpdate:text":s[3]||(s[3]=o=>a.country=o)},null,8,["text"]),p(Z,{data:d.categoryList,category:a.categoryList,"onUpdate:category":s[4]||(s[4]=o=>a.categoryList=o)},null,8,["data","category"])]),t("div",mt,[p(V,{title:"最愛",current:a.favorite,onSelected:h},null,8,["current"]),p(V,{title:"已觀看",current:a.watched,onSelected:x},null,8,["current"]),p(tt,{current:a.mark,onSelected:f},null,8,["current"])]),p(et,{text:"修改",class:"mt-8",disable:!0,onClick:s[5]||(s[5]=o=>w())})]),t("button",{type:"button",class:"absolute right-10 top-10",onClick:s[6]||(s[6]=o=>Y(e).close("edit-movie-id"))},_t)])])]),_:1}))}},gt=R(yt,[["__scopeId","data-v-9cb93a5c"]]),L=r=>(W("data-v-79ef7a04"),r=r(),q(),r),ht={class:"z-1 relative flex h-[375px] items-end md:flex md:h-full md:min-h-[500px] md:items-center"},xt=["src"],ft=["src"],bt=L(()=>t("div",{class:"bg-overlay absolute bottom-0 left-0 h-full w-[100%]"},null,-1)),wt={class:"container relative z-10"},kt={class:"text-heading-m"},St={class:"text-heading-s mt-1"},$t={class:"mb-20 mt-10 md:mt-20"},Mt={class:"container"},Ft={class:"relative z-10 w-full items-center justify-between md:flex"},Dt={class:"mx-auto w-full md:ml-0 md:w-[35%]"},It=["src"],Ct={class:"w-full md:w-[55%]"},Lt={key:0,class:"text-body-s-medium mt-6 w-fit rounded-[4px] bg-primary px-1 py-[2px] text-second md:mt-0"},Ut={class:"text-body-l mt-3 grid gap-y-2"},jt={key:0},zt={class:"mt-6 flex items-center"},Bt={key:0,class:"icon-star-fill text-[24px]"},Nt={key:1,class:"icon-star text-[24px]"},Vt={class:"mt-6 flex space-x-6 text-[32px]"},Yt={key:0,class:"icon-heart-fill"},Et={key:1,class:"icon-heart"},Ot=L(()=>t("i",{class:"icon-pencil-simple"},null,-1)),Rt=[Ot],Tt=L(()=>t("i",{class:"icon-trash"},null,-1)),Gt=[Tt],Wt={__name:"movie-detail",setup(r){const d=T(),e=E();E({language:"zh-TW"});const $=ot(()=>{var u,n,m;if(((u=e.value)==null?void 0:u.type)==="movie")return"電影";if(((n=e.value)==null?void 0:n.type)==="tv")return"電視劇";if(((m=e.value)==null?void 0:m.type)==="show")return"綜藝"}),b=nt({component:gt,attrs:{updatedMovie:async()=>{console.log("test"),e.value=await I(d.params.id)}}}),M=async()=>{var u;await G(d.params.id,{favorite:!((u=e.value)!=null&&u.favorite)}),e.value=await I(d.params.id)},F=async()=>{console.log(e.value);const{name:u,original_name:n,year:m,country:y,type:a,mark:g,watched:h,favorite:x,categoryList:f}=e.value;b.open(),b.patchOptions({attrs:{name:u,original_name:n,year:m,country:y,type:a,mark:g,watched:h,favorite:x,categoryList:f}})},D=async()=>{await ct(d.params.id)};return lt(async()=>{e.value=await I(d.params.id)}),(u,n)=>{var m,y,a,g,h,x,f,w,c,s,o,U,j,z;return l(),i(C,null,[t("section",null,[t("div",ht,[(m=e.value)!=null&&m.background_image?(l(),i("img",{key:0,src:(y=e.value)==null?void 0:y.background_image,alt:"",class:"absolute inset-0 size-full object-cover"},null,8,xt)):(l(),i("img",{key:1,src:(a=e.value)==null?void 0:a.postImageUrl,alt:"",class:"absolute inset-0 size-full object-cover"},null,8,ft)),bt,t("div",wt,[t("p",kt,_((g=e.value)==null?void 0:g.name),1),t("p",St,_((h=e.value)==null?void 0:h.original_name),1)])])]),t("section",$t,[t("div",Mt,[t("div",Ft,[t("div",Dt,[t("img",{src:(x=e.value)==null?void 0:x.postImageUrl,alt:"",class:"rounded-[8px]"},null,8,It)]),t("div",Ct,[(f=e.value)!=null&&f.watched?(l(),i("div",Lt," 已觀看 ")):S("",!0),t("div",Ut,[t("p",null,"上映年份: "+_((w=e.value)==null?void 0:w.year),1),t("p",null,"記錄日期: "+_((c=e.value)==null?void 0:c.record_date),1),(s=e.value)!=null&&s.watched?(l(),i("p",jt,"觀看日期: "+_((o=e.value)==null?void 0:o.watched_date),1)):S("",!0),t("p",null,"種類: "+_($.value),1),t("p",null,[it(" 分類: "),(l(!0),i(C,null,O((U=e.value)==null?void 0:U.categoryList,v=>(l(),i("span",{key:v},_(v.label)+",",1))),128))]),t("p",null,"產地: "+_((j=e.value)==null?void 0:j.country),1)]),t("div",zt,[(l(),i(C,null,O(5,(v,K)=>{var B,N;return t("div",{key:K},[v<=((B=e.value)==null?void 0:B.mark)?(l(),i("i",Bt)):S("",!0),v>((N=e.value)==null?void 0:N.mark)?(l(),i("i",Nt)):S("",!0)])}),64))]),t("div",Vt,[t("button",{onClick:n[0]||(n[0]=v=>M()),class:"transition-transform duration-200 hover:scale-125"},[(z=e.value)!=null&&z.favorite?(l(),i("i",Yt)):(l(),i("i",Et))]),t("button",{class:"transition-transform duration-200 hover:scale-125",onClick:n[1]||(n[1]=v=>F())},Rt),t("button",{class:"transition-transform duration-200 hover:scale-125",onClick:n[2]||(n[2]=v=>D())},Gt)])])])])])],64)}}},Jt=R(Wt,[["__scopeId","data-v-79ef7a04"]]);export{Jt as default};
