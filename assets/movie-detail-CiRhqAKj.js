import{_ as H,Z as ot,W as P,y as st,a as s,j as it,k as nt,b as a,u as p,a1 as lt,K as b,a2 as ct,a4 as J,a5 as rt,L as dt,v as Z,a6 as ut,$ as pt,ab as Q,N as X,O as tt,r as q,i as mt,a9 as vt,g as _t,o as yt,ac as L,J as ft,E as gt,c as i,G as ht,x as m,t as _,z as xt,F as C,d as A,ad as kt}from"./index-Dzb2c2h5.js";const et=r=>(X("data-v-4652d3c6"),r=r(),tt(),r),wt={class:"absolute inset-0 h-full overflow-auto"},bt={class:"main-gradient relative mx-auto my-[128px] w-[489px] rounded-[50px] border border-[#FFFFFF33] bg-black p-20"},St=et(()=>a("p",{class:"text-heading-s"},"修改記錄",-1)),$t={class:"mt-8 space-y-6"},Dt={class:"mt-8 space-y-3"},Mt=et(()=>a("i",{class:"icon-close text-[32px]"},null,-1)),Ft=[Mt],Lt={__name:"edit-movie-modal",props:{updatedMovie:{type:Function},name:{type:String},original_name:{type:String},year:{type:String},country:{type:String},poster_img:{type:String},background_image:{type:String},type:{type:String},genres:{type:Object},categoryList:{type:Object},mark:{type:Number},watched:{type:Boolean},favorite:{type:Boolean}},setup(r){const d=r;console.log(d.categoryList);const t=ot(),S=P(),{name:w,original_name:$,year:D,country:M,type:y,mark:F,watched:u,favorite:l}=d,e=st({name:w,original_name:$,year:D,country:M,type:y,mark:F,watched:u,favorite:l}),f=c=>e.type=c,g=c=>e.favorite=c,h=c=>e.watched=c,x=c=>e.mark=c,k=async()=>{e.watched_date=e.watched?pt(new Date).format("DD-MM-YYYY"):"",await Q(S.params.id,e),await d.updatedMovie(),console.log("updated movie"),t.close("edit-movie-id")};return(c,o)=>(s(),it(Z(ut),{"modal-id":"edit-movie-id","content-class":"absolute inset-0  bg-[#30313299]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:nt(()=>[a("div",wt,[a("div",bt,[a("div",null,[St,a("div",$t,[p(lt,{attrSelected:e==null?void 0:e.type,onSelected:f},null,8,["attrSelected"]),p(b,{placeholder:"名稱",text:e.name,"onUpdate:text":o[0]||(o[0]=n=>e.name=n)},null,8,["text"]),p(b,{placeholder:"原始名稱(選項)",text:e.original_name,"onUpdate:text":o[1]||(o[1]=n=>e.original_name=n)},null,8,["text"]),p(b,{placeholder:"年份",text:e.year,"onUpdate:text":o[2]||(o[2]=n=>e.year=n)},null,8,["text"]),p(b,{placeholder:"產地",text:e.country,"onUpdate:text":o[3]||(o[3]=n=>e.country=n)},null,8,["text"]),p(ct,{data:d.categoryList,category:e.categoryList,"onUpdate:category":o[4]||(o[4]=n=>e.categoryList=n)},null,8,["data","category"])]),a("div",Dt,[p(J,{title:"最愛",current:e.favorite,onSelected:g},null,8,["current"]),p(J,{title:"已觀看",current:e.watched,onSelected:h},null,8,["current"]),p(rt,{current:e.mark,onSelected:x},null,8,["current"])]),p(dt,{text:"修改",class:"mt-8",disable:!0,onClick:o[5]||(o[5]=n=>k())})]),a("button",{type:"button",class:"absolute right-10 top-10",onClick:o[6]||(o[6]=n=>Z(t).close("edit-movie-id"))},Ft)])])]),_:1}))}},Ct=H(Lt,[["__scopeId","data-v-4652d3c6"]]),I=r=>(X("data-v-d5acd235"),r=r(),tt(),r),It={class:"z-1 relative flex h-[375px] items-end md:flex md:h-full md:min-h-[500px] md:items-center",id:"backdrop"},zt={key:0,alt:"",class:"absolute inset-0 size-full object-cover"},Tt=I(()=>a("div",{class:"bg-overlay absolute bottom-0 left-0 h-full w-[100%]"},null,-1)),Ut={class:"container relative z-10"},jt={class:"text-heading-m"},Bt={class:"text-heading-s mt-1"},Nt={class:"mb-20 mt-10 md:mt-20"},Ot={class:"container"},Vt={class:"relative z-10 w-full items-center justify-between md:flex"},Wt={class:"mx-auto w-full md:ml-0 md:w-[35%]",id:"poster"},Yt=["src"],Et={class:"w-full md:w-[55%]"},Gt={key:0,class:"text-body-s-medium info-anim mt-6 w-fit rounded-[4px] bg-primary px-1 py-[2px] text-second md:mt-0",id:"watched-wrap"},Kt={class:"text-body-l mt-3 grid gap-y-2",id:"info-wrap"},Rt={key:0,class:"info-anim"},Jt={key:1,class:"info-anim"},Zt={key:2,class:"info-anim"},qt={key:3,class:"info-anim"},At={key:4,class:"info-anim"},Ht={key:5,class:"info-anim"},Pt={class:"info-anim mt-6 flex items-center",id:"star-wrap"},Qt={key:0,class:"icon-star-fill text-[24px]"},Xt={key:1,class:"icon-star text-[24px]"},te={class:"info-anim info-anim mt-6 flex space-x-6 text-[32px] opacity-0"},ee={key:0,class:"icon-heart-fill"},ae={key:1,class:"icon-heart"},oe=I(()=>a("i",{class:"icon-pencil-simple"},null,-1)),se=[oe],ie=I(()=>a("i",{class:"icon-trash"},null,-1)),ne=[ie],le={__name:"movie-detail",setup(r){const d=P(),t=q();q({language:"zh-TW"});const S=mt(()=>{var u,l,e;if(((u=t.value)==null?void 0:u.type)==="movie")return"電影";if(((l=t.value)==null?void 0:l.type)==="tv")return"電視劇";if(((e=t.value)==null?void 0:e.type)==="show")return"綜藝"}),w=vt({component:Ct,attrs:{updatedMovie:async()=>{console.log("test"),t.value=await L(d.params.id)}}}),$=async()=>{var u;await Q(d.params.id,{favorite:!((u=t.value)!=null&&u.favorite)}),t.value=await L(d.params.id)},D=async()=>{console.log(t.value);const{name:u,original_name:l,year:e,country:f,type:g,mark:h,watched:x,favorite:k,categoryList:c}=t.value;w.open(),w.patchOptions({attrs:{name:u,original_name:l,year:e,country:f,type:g,mark:h,watched:x,favorite:k,categoryList:c}})},M=async()=>{await kt(d.params.id)};let y=_t.timeline();const F=async()=>{y.fromTo("#backdrop",{opacity:0},{duration:1,delay:0,opacity:1}),y.fromTo("#backdrop p",{opacity:0,x:200},{x:0,duration:.5,opacity:1,stagger:.2},"-=0.5"),y.fromTo("#poster",{opacity:0,scale:.5},{x:0,duration:1,scale:1,opacity:1},"-=0.3"),y.fromTo(".info-anim",{opacity:0,x:100},{x:0,duration:.5,opacity:1,stagger:.1},"-=1")};return yt(async()=>{t.value=await L(d.params.id),ft(async()=>{await F()})}),(u,l)=>{var f,g,h,x,k,c,o,n,z,T,U,j,B,N,O,V,W,Y,E,G;const e=gt("lazy");return s(),i(C,null,[a("section",null,[a("div",It,[((f=t.value)==null?void 0:f.background_image)??((g=t.value)==null?void 0:g.postImageUrl)?ht((s(),i("img",zt,null,512)),[[e,((h=t.value)==null?void 0:h.background_image)??((x=t.value)==null?void 0:x.postImageUrl)]]):m("",!0),Tt,a("div",Ut,[a("p",jt,_((k=t.value)==null?void 0:k.name),1),a("p",Bt,_((c=t.value)==null?void 0:c.original_name),1)])])]),a("section",Nt,[a("div",Ot,[a("div",Vt,[a("div",Wt,[a("img",{src:(o=t.value)==null?void 0:o.postImageUrl,alt:"",class:"rounded-[8px]"},null,8,Yt)]),a("div",Et,[(n=t.value)!=null&&n.watched?(s(),i("div",Gt," 已觀看 ")):m("",!0),a("div",Kt,[(z=t.value)!=null&&z.year?(s(),i("p",Rt,"上映年份: "+_((T=t.value)==null?void 0:T.year),1)):m("",!0),(U=t.value)!=null&&U.record_date?(s(),i("p",Jt," 記錄日期: "+_((j=t.value)==null?void 0:j.record_date),1)):m("",!0),(B=t.value)!=null&&B.watched?(s(),i("p",Zt," 觀看日期: "+_((N=t.value)==null?void 0:N.watched_date),1)):m("",!0),(O=t.value)!=null&&O.type?(s(),i("p",qt,"種類: "+_(S.value),1)):m("",!0),(V=t.value)!=null&&V.categoryList?(s(),i("p",At,[xt(" 分類: "),(s(!0),i(C,null,A((W=t.value)==null?void 0:W.categoryList,v=>(s(),i("span",{key:v},_(v.label)+",",1))),128))])):m("",!0),(Y=t.value)!=null&&Y.country?(s(),i("p",Ht,"產地: "+_((E=t.value)==null?void 0:E.country),1)):m("",!0)]),a("div",Pt,[(s(),i(C,null,A(5,(v,at)=>{var K,R;return a("div",{key:at},[v<=((K=t.value)==null?void 0:K.mark)?(s(),i("i",Qt)):m("",!0),v>((R=t.value)==null?void 0:R.mark)?(s(),i("i",Xt)):m("",!0)])}),64))]),a("div",te,[a("button",{onClick:l[0]||(l[0]=v=>$()),class:"transition-transform duration-200 hover:scale-125"},[(G=t.value)!=null&&G.favorite?(s(),i("i",ee)):(s(),i("i",ae))]),a("button",{class:"transition-transform duration-200 hover:scale-125",onClick:l[1]||(l[1]=v=>D())},se),a("button",{class:"transition-transform duration-200 hover:scale-125",onClick:l[2]||(l[2]=v=>M())},ne)])])])])])],64)}}},re=H(le,[["__scopeId","data-v-d5acd235"]]);export{re as default};
