import{_ as Q,$ as it,Y as X,A as nt,a as o,j as lt,k as K,b as e,x as u,a2 as ct,M as b,a3 as rt,a5 as P,a6 as dt,N as ut,B as Z,y as q,R as pt,a0 as mt,aa as tt,O as et,P as at,r as H,i as _t,G as yt,g as vt,o as ft,ab as L,L as ht,D as gt,c as i,E as xt,z as p,t as y,F as C,d as J,ac as kt,ad as wt}from"./index-BzXpjNAC.js";const st=c=>(et("data-v-33f694a7"),c=c(),at(),c),bt={class:"absolute inset-0 h-full overflow-auto"},St={class:"main-gradient relative mx-auto my-[64px] w-[90%] rounded-[50px] border border-[#FFFFFF33] bg-black p-14 md:my-[128px] md:w-[489px] md:p-20"},$t=st(()=>e("p",{class:"text-heading-s"},"修改記錄",-1)),Mt={class:"mt-8 space-y-6"},Ft={class:"mt-8 space-y-3"},It=st(()=>e("i",{class:"icon-close text-[32px]"},null,-1)),Lt=[It],Ct={__name:"edit-movie-modal",props:{updatedMovie:{type:Function},name:{type:String},original_name:{type:String},year:{type:String},country:{type:String},poster_img:{type:String},background_image:{type:String},type:{type:String},genres:{type:Object},categoryList:{type:Object},mark:{type:Number},watched:{type:Boolean},favorite:{type:Boolean}},setup(c){const m=c,t=it(),S=X(),{name:w,original_name:$,year:M,country:F,type:v,mark:I,watched:r,favorite:d}=m,a=nt({name:w,original_name:$,year:M,country:F,type:v,mark:I,watched:r,favorite:d}),f=l=>a.type=l,h=l=>a.favorite=l,g=l=>a.watched=l,x=l=>a.mark=l,k=async()=>{a.watched_date=a.watched?mt(new Date).format("DD-MM-YYYY"):"",await tt(S.params.id,a),await m.updatedMovie(),t.close("edit-movie-id")};return(l,s)=>(o(),lt(q(pt),{"modal-id":"edit-movie-id","content-class":"absolute inset-0  bg-[#30313299]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:K(()=>[e("div",bt,[e("div",St,[e("div",null,[$t,e("div",Mt,[u(ct,{attrSelected:a==null?void 0:a.type,onSelected:f},null,8,["attrSelected"]),u(b,{placeholder:"名稱",text:a.name,"onUpdate:text":s[0]||(s[0]=n=>a.name=n)},null,8,["text"]),u(b,{placeholder:"原始名稱(選項)",text:a.original_name,"onUpdate:text":s[1]||(s[1]=n=>a.original_name=n)},null,8,["text"]),u(b,{placeholder:"年份",text:a.year,"onUpdate:text":s[2]||(s[2]=n=>a.year=n)},null,8,["text"]),u(b,{placeholder:"產地",text:a.country,"onUpdate:text":s[3]||(s[3]=n=>a.country=n)},null,8,["text"]),u(rt,{data:m.categoryList,category:a.categoryList,"onUpdate:category":s[4]||(s[4]=n=>a.categoryList=n)},null,8,["data","category"])]),e("div",Ft,[u(P,{title:"最愛",current:a.favorite,onSelected:h},null,8,["current"]),u(P,{title:"已觀看",current:a.watched,onSelected:g},null,8,["current"]),u(dt,{current:a.mark,onSelected:x},null,8,["current"])]),u(ut,{class:"mt-8",disable:!0,onClick:s[5]||(s[5]=n=>k())},{default:K(()=>[Z("修改")]),_:1})]),e("button",{type:"button",class:"absolute right-10 top-10",onClick:s[6]||(s[6]=n=>q(t).close("edit-movie-id"))},Lt)])])]),_:1}))}},Dt=Q(Ct,[["__scopeId","data-v-33f694a7"]]),D=c=>(et("data-v-fa2a418f"),c=c(),at(),c),zt={class:"z-1 relative flex h-[375px] items-end md:flex md:h-full md:min-h-[500px] md:items-center",id:"backdrop"},Bt={key:0,alt:"",class:"absolute inset-0 size-full object-cover"},Tt=D(()=>e("div",{class:"bg-overlay absolute bottom-0 left-0 h-full w-[100%]"},null,-1)),Ut={class:"container relative z-10"},jt={class:"text-heading-m"},Nt={class:"text-heading-s mt-1"},Yt={class:"mb-20 mt-10 md:mt-20"},Ot={class:"container"},Vt={class:"relative z-10 w-full items-center justify-between md:flex"},Et={class:"mx-auto w-full md:ml-0 md:w-[35%]",id:"poster"},Gt=["src"],Rt={class:"w-full md:w-[55%]"},Wt={key:0,class:"text-body-s-medium info-anim mt-6 w-fit rounded-[4px] bg-primary px-1 py-[2px] text-second md:mt-0",id:"watched-wrap"},At={class:"text-body-l mt-3 grid gap-y-2",id:"info-wrap"},Kt={key:0,class:"info-anim"},Pt={key:1,class:"info-anim"},qt={key:2,class:"info-anim"},Ht={key:3,class:"info-anim"},Jt={key:4,class:"info-anim"},Qt={key:5,class:"info-anim"},Xt={class:"info-anim mt-6 flex items-center",id:"star-wrap"},Zt={key:0,class:"icon-star-fill text-[24px]"},te={key:1,class:"icon-star text-[24px]"},ee={class:"info-anim info-anim mt-6 flex space-x-6 text-[32px] opacity-0"},ae={key:0,class:"icon-heart-fill"},se={key:1,class:"icon-heart"},oe=D(()=>e("i",{class:"icon-pencil-simple"},null,-1)),ie=[oe],ne=D(()=>e("i",{class:"icon-trash"},null,-1)),le=[ne],ce={__name:"detail",setup(c){const m=X(),t=H();H({language:"zh-TW"});const S=_t(()=>{var r;return kt[(r=t.value)==null?void 0:r.type]??""}),w=yt({component:Dt,attrs:{updatedMovie:async()=>{t.value=await L(m.params.id)}}}),$=async()=>{var r;await tt(m.params.id,{favorite:!((r=t.value)!=null&&r.favorite)}),t.value=await L(m.params.id)},M=async()=>{const{name:r,original_name:d,year:a,country:f,type:h,mark:g,watched:x,favorite:k,categoryList:l}=t.value;w.open(),w.patchOptions({attrs:{name:r,original_name:d,year:a,country:f,type:h,mark:g,watched:x,favorite:k,categoryList:l}})},F=async()=>{await wt(m.params.id)};let v=vt.timeline();const I=async()=>{v.fromTo("#backdrop",{opacity:0},{duration:1,delay:0,opacity:1}),v.fromTo("#backdrop p",{opacity:0,x:200},{x:0,duration:.5,opacity:1,stagger:.2},"-=0.5"),v.fromTo("#poster",{opacity:0,scale:.5},{x:0,duration:1,scale:1,opacity:1},"-=0.3"),v.fromTo(".info-anim",{opacity:0,x:100},{x:0,duration:.5,opacity:1,stagger:.1},"-=1")};return ft(async()=>{t.value=await L(m.params.id),ht(async()=>{await I()})}),(r,d)=>{var f,h,g,x,k,l,s,n,z,B,T,U,j,N,Y,O,V,E,G,R;const a=gt("lazy");return o(),i(C,null,[e("section",null,[e("div",zt,[((f=t.value)==null?void 0:f.background_image)??((h=t.value)==null?void 0:h.postImageUrl)?xt((o(),i("img",Bt,null,512)),[[a,((g=t.value)==null?void 0:g.background_image)??((x=t.value)==null?void 0:x.postImageUrl)]]):p("",!0),Tt,e("div",Ut,[e("p",jt,y((k=t.value)==null?void 0:k.name),1),e("p",Nt,y((l=t.value)==null?void 0:l.original_name),1)])])]),e("section",Yt,[e("div",Ot,[e("div",Vt,[e("div",Et,[e("img",{src:(s=t.value)==null?void 0:s.postImageUrl,alt:"",class:"rounded-[8px]"},null,8,Gt)]),e("div",Rt,[(n=t.value)!=null&&n.watched?(o(),i("div",Wt," 已觀看 ")):p("",!0),e("div",At,[(z=t.value)!=null&&z.year?(o(),i("p",Kt,"上映年份: "+y((B=t.value)==null?void 0:B.year),1)):p("",!0),(T=t.value)!=null&&T.record_date?(o(),i("p",Pt," 記錄日期: "+y((U=t.value)==null?void 0:U.record_date),1)):p("",!0),(j=t.value)!=null&&j.watched?(o(),i("p",qt," 觀看日期: "+y((N=t.value)==null?void 0:N.watched_date),1)):p("",!0),(Y=t.value)!=null&&Y.type?(o(),i("p",Ht,"種類: "+y(S.value),1)):p("",!0),(O=t.value)!=null&&O.categoryList?(o(),i("p",Jt,[Z(" 分類: "),(o(!0),i(C,null,J((V=t.value)==null?void 0:V.categoryList,_=>(o(),i("span",{key:_},y(_.label)+",",1))),128))])):p("",!0),(E=t.value)!=null&&E.country?(o(),i("p",Qt,"產地: "+y((G=t.value)==null?void 0:G.country),1)):p("",!0)]),e("div",Xt,[(o(),i(C,null,J(5,(_,ot)=>{var W,A;return e("div",{key:ot},[_<=((W=t.value)==null?void 0:W.mark)?(o(),i("i",Zt)):p("",!0),_>((A=t.value)==null?void 0:A.mark)?(o(),i("i",te)):p("",!0)])}),64))]),e("div",ee,[e("button",{onClick:d[0]||(d[0]=_=>$()),class:"transition-transform duration-200 hover:scale-125"},[(R=t.value)!=null&&R.favorite?(o(),i("i",ae)):(o(),i("i",se))]),e("button",{class:"transition-transform duration-200 hover:scale-125",onClick:d[1]||(d[1]=_=>M())},ie),e("button",{class:"transition-transform duration-200 hover:scale-125",onClick:d[2]||(d[2]=_=>F())},le)])])])])])],64)}}},de=Q(ce,[["__scopeId","data-v-fa2a418f"]]);export{de as default};
