import{r as f,g as N,o as P,a as d,c as y,b as t,F as $,d as E,n as S,t as w,e as Z,f as se,h as I,i as R,s as le,w as G,j as W,k as z,l as ae,m as ne,p as re,q as oe,u as m,v as B,x as Y,y as H,z as V,A as ee,B as ie,C as ce,D as ue,E as de,G as pe,S as K,H as ve}from"./index-BN0c5sCF.js";const fe={class:"sticky top-0 z-10 bg-second",id:"category-section"},ye={class:"container relative"},he={class:"z-10 flex items-center justify-center pt-6"},ge={class:"relative"},xe=["onClick"],_e=t("div",{class:"border-b border-enable",id:"category-bar"},null,-1),me={__name:"category",emits:["selected"],setup(r,{emit:o}){const v=o,n=f(0),p=f(0),i=f(""),u=(x,s)=>{i.value=x;const a=document.querySelector(`.btn-${s}`);n.value=a.clientWidth,p.value=a.offsetLeft,v("selected",x)},c=f([{title:"全部",slug:""},{title:"電影",slug:"movie"},{title:"電視劇",slug:"tv"},{title:"綜藝",slug:"show"}]);let e=N.timeline();const h=()=>{e.fromTo("#category-bar",{width:0,opacity:0},{duration:.5,opacity:1,width:"100%",onComplete:()=>{const x=document.querySelector(".btn-0");n.value=x.clientWidth}}),e.fromTo(".category-text",{opacity:0,y:10},{duration:.5,opacity:1,stagger:.1,y:0})};return P(()=>{h()}),(x,s)=>(d(),y("div",fe,[t("div",ye,[t("div",he,[t("div",ge,[(d(!0),y($,null,E(c.value,(a,l)=>(d(),y("button",{key:a.slug,class:S(["text-body-xl-medium category-text relative px-6 py-4 text-enable hover:text-white md:px-[60px]",[{"text-white":i.value==a.slug},`btn-${l}`]]),onClick:g=>u(a.slug,l)},w(a.title),11,xe))),128)),t("div",{class:"absolute bottom-0 h-[3px] bg-primary transition-all duration-300",style:Z({width:`${n.value}px`,left:`${p.value}px`})},null,4)])])]),_e]))}},te="--vc-auto-duration",be=`height var(${te}) cubic-bezier(0.33, 1, 0.68, 1)`,M={padding:0},Ce=300,Le={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"},ke=()=>typeof navigator<"u"&&navigator.userAgent.includes("Firefox");function Q(r){return r.value?parseFloat(getComputedStyle(r.value).height):0}function U(r){var o;return{height:`${((o=r.value)==null?void 0:o.scrollHeight)||0}px`}}function J(r){if(!r.value)return{};const{transition:o}=getComputedStyle(r.value);return o==="all 0s ease 0s"||ke()&&o==="all"?{transition:be}:{transition:o}}function X(r){if(!r.value)return!0;const{transition:o}=getComputedStyle(r.value);return typeof window.requestAnimationFrame>"u"||window.matchMedia("(prefers-reduced-motion: reduce)").matches||o.includes("none")||o.includes("height 0s")}function we(r=0){if(r===0)return 0;const o=r/36,v=Math.round((4+15*o**.25+o/5)*10);return Number.isFinite(v)?v:0}const D=se({inheritAttrs:!0,__name:"Collapse",props:{when:{type:Boolean},baseHeight:{default:0},as:{default:"div"}},emits:["collapse","expand","collapsed","expanded"],setup(r,{emit:o}){const v=r,n=o,p=I(v,"when"),i=I(v,"baseHeight"),u=R(()=>({overflow:"hidden",height:`${i.value}px`})),c=R(()=>({...M,...i.value===0?{display:"none"}:u.value})),e=f(null),h=f(p.value?"expanded":"collapsed"),x=_=>h.value=_;function s(){return p.value?M:i.value===0?Le:c.value}const a=le(s()),l=_=>a.value=_,g=_=>l({...a.value,..._}),L=f(Ce),C=_=>L.value=_,j=R(()=>({[te]:`${L.value}ms`}));function A(){l(M),x("expanded"),n("expanded")}function O(){l(c.value),x("collapsed"),n("collapsed")}P(()=>{if(!e.value)return;const _=we(e.value.scrollHeight-i.value);_>0&&C(_),!p.value&&i.value===0&&l(c.value)}),G(p,_=>{if(e.value)if(_){if(X(e))return A();x("expanding"),n("expand"),l({...M,...u.value,...j.value}),requestAnimationFrame(()=>{if(e.value.scrollHeight===0)return A();g({...U(e),...J(e),willChange:"height"})})}else{if(X(e)||(x("collapsing"),n("collapse"),g({...j.value,...U(e)}),e.value.scrollHeight===0))return O();requestAnimationFrame(()=>{g({...u.value,...J(e),willChange:"height"})})}}),G(i,_=>{p.value||(_>0?g({display:void 0,height:`${_}px`}):g({display:"none"}))});function F(_){_.target&&_.target===e.value&&_.propertyName==="height"&&(p.value?Math.abs(e.value.scrollHeight-Q(e))<1&&A():Math.abs(i.value-Q(e))<1&&O())}return(_,b)=>(d(),W(oe(v.as),{ref_key:"collapseRef",ref:e,style:Z(a.value),onTransitionend:F,"data-collapse":h.value},{default:z(()=>[ae(_.$slots,"default",ne(re({state:h.value})))]),_:3},40,["style","data-collapse"]))}}),$e={class:"cursor-pointer rounded-[8px] bg-card"},Se=t("div",{class:"flex space-x-2"},[t("i",{class:"icon-sort text-[22px]"}),t("p",null,"排序")],-1),Ae={class:"flex flex-col space-y-6 p-6 pb-4"},Re=["onClick"],Ee={__name:"sort",emits:["order"],setup(r,{emit:o}){const v=o,n=f(!1),p=[{title:"最新加入",slug:"desc"},{title:"最舊加入",slug:"asc"}],i=u=>{v("order",u)};return(u,c)=>(d(),y("div",$e,[t("div",{class:"flex items-center justify-between px-6 py-2",onClick:c[0]||(c[0]=e=>n.value=!n.value)},[Se,t("i",{class:S(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":n.value}])},null,2)]),m(B(D),{when:n.value},{default:z(()=>[t("div",Ae,[(d(),y($,null,E(p,e=>t("button",{type:"button",class:"text-body-m-medium text-left",key:e.slug,onClick:h=>i(e.slug)},w(e.title),9,Re)),64))])]),_:1},8,["when"])]))}},je={key:0,class:"absolute size-full rounded-[4px] bg-primary"},Oe=t("i",{class:"icon-check text-[20px] text-second"},null,-1),Ye=[Oe],q={__name:"checkbox",props:{title:String,slug:String|Number,disabled:{type:Boolean,default:!1}},emits:["selected"],setup(r,{expose:o,emit:v}){const n=r,p=v,i=f(!1),u=()=>{n.disabled||(i.value=!i.value,p("selected",{slug:n.slug,status:i.value}))};return o({clearCheckbox:()=>{i.value=!1,p("selected","clear")}}),(e,h)=>(d(),y("div",{onClick:h[0]||(h[0]=x=>u()),class:S(["flex items-center space-x-2",[{"text-disable":r.disabled},{"cursor-pointer":!r.disabled}]])},[t("div",{class:S(["relative size-[20px] rounded-[4px]",[{border:!i.value},{"border-disable":r.disabled}]])},[i.value?(d(),y("div",je,Ye)):Y("",!0)],2),t("p",null,w(r.title),1)],2))}},ze=t("p",null,"狀態",-1),Fe={class:"flex flex-col space-y-3 pt-3"},Te={__name:"status",props:{isAllExpanded:{type:Boolean}},emits:["currStatusLists"],setup(r,{expose:o,emit:v}){const n=v,p=[{title:"最愛",slug:"favorite"},{title:"已觀看",slug:"watched"},{title:"待觀看",slug:"to_be_watching"}],i=f(!0),u=H([]),c=f(),e=s=>!!(u.includes("watched")&&s=="to_be_watching"||u.includes("to_be_watching")&&s=="watched"),h=s=>{if(s=="clear")u.length=0;else{const a=u.indexOf(s.slug);a!==-1?u.splice(a,1):u.push(s.slug),n("currStatusLists",u)}};return o({clearAllCheckbox:()=>{c.value.forEach(s=>{s.clearCheckbox()})}}),(s,a)=>(d(),y("div",null,[t("div",{class:"flex cursor-pointer items-center justify-between",onClick:a[0]||(a[0]=l=>i.value=!i.value)},[ze,t("i",{class:S(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":i.value}])},null,2)]),m(B(D),{when:i.value},{default:z(()=>[t("div",Fe,[(d(),y($,null,E(p,(l,g)=>t("div",{key:g,class:""},[m(q,{title:l.title,slug:l.slug,disabled:e(l.slug),onSelected:h,ref_for:!0,ref_key:"statusRef",ref:c},null,8,["title","slug","disabled"])])),64))])]),_:1},8,["when"])]))}},Be={key:0},He={class:"flex flex-col space-y-3 pt-3"},De={__name:"year",props:{yearList:{type:Object}},emits:["currYearLists"],setup(r,{expose:o,emit:v}){const n=v,p=r,i=R(()=>p.yearList.map(s=>({title:s,slug:s}))),u=f(),c=f(!0),e=H([]),h=s=>{if(s=="clear")e.length=0;else{const a=e.indexOf(s.slug);a!==-1?e.splice(a,1):e.push(s.slug),n("currYearLists",e)}};return o({clearAllCheckbox:()=>{u.value.forEach(s=>{s.clearCheckbox()})}}),(s,a)=>(d(),y("div",null,[t("div",{class:"flex cursor-pointer items-center justify-between",onClick:a[0]||(a[0]=l=>c.value=!c.value)},[t("p",null,[V(" 年份 "),e.length>0?(d(),y("span",Be,"("+w(e.length)+")",1)):Y("",!0)]),t("i",{class:S(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":c.value}])},null,2)]),m(B(D),{when:c.value},{default:z(()=>[t("div",He,[(d(!0),y($,null,E(i.value,(l,g)=>(d(),y("div",{key:g,class:""},[m(q,{title:l.title,slug:l.slug,onSelected:h,ref_for:!0,ref_key:"yearRef",ref:u},null,8,["title","slug"])]))),128))])]),_:1},8,["when"])]))}},Me={key:0},Ne={class:"flex flex-col space-y-3 pt-3"},Ve={__name:"category",props:{categoryList:{type:Object}},emits:["emitCurrCategory"],setup(r,{expose:o,emit:v}){const n=v,p=r,i=R(()=>p.categoryList.map(s=>({title:ee[s],slug:Number(s)}))),u=f(),c=f(!0),e=H([]),h=s=>{if(s=="clear")e.length=0;else{const a=e.indexOf(s.slug);a!==-1?e.splice(a,1):e.push(s.slug),n("emitCurrCategory",e)}};return o({clearAllCheckbox:()=>{u.value.forEach(s=>{s.clearCheckbox()})}}),(s,a)=>(d(),y("div",null,[t("div",{class:"flex cursor-pointer items-center justify-between",onClick:a[0]||(a[0]=l=>c.value=!c.value)},[t("p",null,[V(" 類別 "),e.length>0?(d(),y("span",Me,"("+w(e.length)+")",1)):Y("",!0)]),t("i",{class:S(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":c.value}])},null,2)]),m(B(D),{when:c.value},{default:z(()=>[t("div",Ne,[(d(!0),y($,null,E(i.value,(l,g)=>(d(),y("div",{key:g,class:""},[m(q,{title:l.title,slug:l.slug,onSelected:h,ref_for:!0,ref_key:"categoryRef",ref:u},null,8,["title","slug"])]))),128))])]),_:1},8,["when"])]))}},qe={key:0},Ge={class:"flex flex-col space-y-3 pt-3"},Pe={__name:"country",props:{countryList:{type:Object}},emits:["selectedLists"],setup(r,{expose:o,emit:v}){const n=v,p=r,i=R(()=>p.countryList.map(s=>({title:s,slug:s}))),u=f(),c=f(!0),e=H([]),h=s=>{if(s=="clear")e.length=0;else{const a=e.indexOf(s.slug);a!==-1?e.splice(a,1):e.push(s.slug),n("selectedLists",e)}};return o({clearAllCheckbox:()=>{u.value.forEach(s=>{s.clearCheckbox()})}}),(s,a)=>(d(),y("div",null,[t("div",{class:"flex cursor-pointer items-center justify-between",onClick:a[0]||(a[0]=l=>c.value=!c.value)},[t("p",null,[V(" 產地 "),e.length>0?(d(),y("span",qe,"("+w(e.length)+")",1)):Y("",!0)]),t("i",{class:S(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":c.value}])},null,2)]),m(B(D),{when:c.value},{default:z(()=>[t("div",Ge,[(d(!0),y($,null,E(i.value,(l,g)=>(d(),y("div",{key:g,class:""},[m(q,{title:l.title,slug:l.slug,onSelected:h,ref_for:!0,ref_key:"countryRef",ref:u},null,8,["title","slug"])]))),128))])]),_:1},8,["when"])]))}},We={class:"rounded-[8px] bg-card"},Ie={class:"flex items-center justify-between px-6 py-2"},Ke={class:"flex space-x-2"},Qe=t("i",{class:"icon-filter text-[22px]"},null,-1),Ue={class:"flex flex-col space-y-6 px-6 pb-4 pt-6"},Je={__name:"filter",emits:["currStatusLists","currCategoryLists","currYearLists","currCountryLists"],setup(r,{emit:o}){const v=o,n=f(!0),p=f([]),i=f([]),u=f([]),c=f([]),e=f([]),h=f([]),x=f([]),s=f(),a=f(),l=f(),g=f();(async()=>{const{yearOptLists:b,countryOtpLists:k,categoryOtpList:T}=await ie();p.value=b,i.value=k,u.value=T})();const C=b=>{c.value=b,v("currStatusLists",b)},j=b=>{const k=b.map(T=>({id:T,label:ee[T]}));x.value=k,v("currCategoryLists",k)},A=b=>{e.value=b,v("currYearLists",b)},O=b=>{h.value=b,v("currCountryLists",b)},F=()=>{s.value.clearAllCheckbox(),a.value.clearAllCheckbox(),l.value.clearAllCheckbox(),g.value.clearAllCheckbox()},_=R(()=>c.value.length>0||e.value.length>0||h.value.length>0||x.value.length>0);return(b,k)=>(d(),y("div",We,[t("div",Ie,[t("div",Ke,[Qe,t("p",{class:"cursor-pointer",onClick:k[0]||(k[0]=T=>n.value=!n.value)},"篩選")]),t("p",{class:S(["text-body-s",[_.value?"cursor-pointer text-primary hover:text-white":"text-disable"]]),onClick:k[1]||(k[1]=T=>F())}," 清除 ",2)]),t("div",Ue,[m(Te,{isAllExpanded:n.value,onCurrStatusLists:C,ref_key:"statusRef",ref:s},null,8,["isAllExpanded"]),m(De,{yearList:p.value,onCurrYearLists:A,ref_key:"yearRef",ref:a},null,8,["yearList"]),m(Ve,{categoryList:u.value,onEmitCurrCategory:j,ref_key:"categoryRef",ref:l},null,8,["categoryList"]),m(Pe,{countryList:i.value,onSelectedLists:O,ref_key:"countryRef",ref:g},null,8,["countryList"])])]))}},Xe={class:""},Ze={alt:"",class:"aspect-[3/4.3] size-full rounded-[8px] object-cover"},et={class:"absolute left-0 top-0"},tt={key:0,class:"text-body-s-medium rounded-[4px] bg-primary px-1 py-[2px] text-second"},st={class:"mt-2 flex justify-between"},lt={class:"text-body-m-medium"},at={key:0,class:"icon-heart-fill pt-1"},nt={key:1,class:"icon-heart pt-1"},rt={class:"text-body-s-medium mt-1 flex justify-between text-enable"},ot={class:"flex flex-wrap gap-x-2"},it={key:0,class:"flex items-center"},ct={key:0},ut={__name:"card",props:{data:{type:Object}},setup(r){ce();const o=r,v=R(()=>{var n,p;return(p=(n=o==null?void 0:o.data)==null?void 0:n.movie)==null?void 0:p.year.slice(0,4)});return(n,p)=>{const i=ue("RouterLink"),u=de("lazy");return d(),W(i,{to:`/list/${o.data.id}`,class:"relative cursor-pointer"},{default:z(()=>{var c,e,h,x,s,a,l,g,L,C;return[t("div",Xe,[pe(t("img",Ze,null,512),[[u,(e=(c=r.data)==null?void 0:c.movie)==null?void 0:e.postImageUrl]])]),t("div",et,[(x=(h=r.data)==null?void 0:h.movie)!=null&&x.watched?(d(),y("div",tt," 已觀看 ")):Y("",!0)]),t("div",null,[t("div",st,[t("div",lt,w((a=(s=r.data)==null?void 0:s.movie)==null?void 0:a.name),1),(g=(l=r.data)==null?void 0:l.movie)!=null&&g.favorite?(d(),y("i",at)):(d(),y("i",nt))]),t("div",rt,[t("div",ot,[(d(!0),y($,null,E((C=(L=r.data)==null?void 0:L.movie)==null?void 0:C.categoryList,(j,A)=>{var O,F;return d(),y("div",{key:j.slug},[A<3?(d(),y("div",it,[V(w(j.label)+" ",1),((F=(O=r.data)==null?void 0:O.movie)==null?void 0:F.categoryList.length)>3&&A==2?(d(),y("span",ct,"...")):Y("",!0)])):Y("",!0)])}),128))]),t("div",null,w(v.value),1)])])]}),_:1},8,["to"])}}},dt={class:"container mb-20"},pt={class:"mt-20 flex md:space-x-5"},vt={class:"hidden min-w-[197px] max-w-[197px] md:block"},ft={class:"space-y-4"},yt={class:"card-wrap grid grid-cols-4 gap-5 md:grid-cols-6 lg:grid-cols-6 xl:grid-cols-10"},gt={__name:"index",setup(r){N.registerPlugin(K);const o=f(""),v=f([]),n=H({selectedStatusLists:[],selectedYearLists:[],selectedCountryLists:[],selectedCategoryLists:[],order:"desc"}),p=async(l,g)=>{(await ve(l,g)).forEach(C=>{v.value.push({id:C.id,movie:C.data()})})};p(o.value,n);const i=l=>{v.value=[],o.value=l,p(o.value,n)},u=l=>n.order=l,c=l=>n.selectedStatusLists=l,e=l=>n.selectedYearLists=l,h=l=>n.selectedCountryLists=l,x=l=>n.selectedCategoryLists=l;G(()=>n,(l,g)=>{v.value=[],p(o.value,n)},{deep:!0});const s=N.timeline(),a=()=>{s.fromTo(".an-sidebar",{display:"hidden",x:-100,opacity:0},{duration:.5,opacity:1,stagger:.2,delay:.5,x:0,display:"block"})};return f(null),N.registerPlugin(K),P(async()=>{await a()}),(l,g)=>(d(),y($,null,[m(me,{onSelected:i}),t("div",dt,[t("main",pt,[t("div",vt,[t("div",ft,[m(Ee,{onOrder:u,class:"an-sidebar"}),m(Je,{class:"an-sidebar",onCurrStatusLists:c,onCurrYearLists:e,onCurrCountryLists:h,onCurrCategoryLists:x})])]),t("div",null,[t("div",yt,[(d(!0),y($,null,E(v.value,(L,C)=>(d(),W(ut,{data:L,class:"card col-span-2",key:C},null,8,["data"]))),128))])])])])],64))}};export{gt as default};
