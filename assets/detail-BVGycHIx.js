import{Z as Q,_ as E,$ as X,v as ee,r as S,a0 as I,i as $,a as g,j as te,k as G,b as t,x as r,a1 as ae,a2 as se,M as k,a3 as oe,a4 as le,a5 as K,a6 as ne,N as ie,B as Y,y as L,R as de,a7 as re,a8 as ce,O as H,P as J,Y as me,G as ue,g as ve,o as pe,L as _e,D as ge,c as h,E as T,t as m,F as ye,d as he,I as fe}from"./index-CBpqAlFv.js";import{f as xe}from"./searchService-Bz-3fSBp.js";const V={JP:"日本",TW:"台灣",US:"美國",KR:"韓國",HK:"香港",CN:"中國"},be=i=>i==null?void 0:i.map(s=>({label:Q[s.id]??s.id,slug:s.id})),Z=i=>(H("data-v-e80c9857"),i=i(),J(),i),we={class:"absolute inset-0 h-full overflow-auto"},ke={class:"main-gradient relative mx-auto my-[64px] w-[90%] rounded-[50px] border border-[#FFFFFF33] bg-black p-14 md:my-[128px] md:w-[489px] md:p-20"},Se=Z(()=>t("p",{class:"text-heading-s"},"添加記錄",-1)),$e={class:"mt-8 space-y-6"},De={class:"space-y-3"},Me=Z(()=>t("i",{class:"icon-close text-[32px]"},null,-1)),Ie=[Me],Te={__name:"search-add-movie-modal",props:{name:{type:String},original_name:{type:String},year:{type:String},country:{type:String},poster_img:{type:String},background_image:{type:String},type:{type:String},genres:{type:Object}},setup(i){const s=i,a=X(),D=ee(),f=S(null),e=S({record_date:I(new Date).format("DD-MM-YYYY"),type:"",name:"",original_name:"",year:"",country:"",mark:0,favorite:!1,categoryList:[],watched:!1,postImageUrl:"",background_image:null}),x=s.genres.some(l=>l.id===16),b=$(()=>x?"cartoon":s.type);x?e.value.type="cartoon":e.value.type=(s==null?void 0:s.type)??"",e.value.name=(s==null?void 0:s.name)??"",e.value.original_name=(s==null?void 0:s.original_name)??"",e.value.year=I(s==null?void 0:s.year).format("YYYY")??"",e.value.country=(s==null?void 0:s.country)??"",e.value.background_image=(s==null?void 0:s.background_image)??null;const w=l=>e.value.record_date=l,_=l=>e.value.type=l,M=l=>e.value.favorite=l,d=l=>e.value.watched=l,c=l=>e.value.mark=l,u=async l=>f.value=l,v=async()=>{e.value={...e.value,watched_date:e.value.watched?I(new Date).format("DD-MM-YYYY"):""},s.poster_img?e.value.postImageUrl=`https://image.tmdb.org/t/p/w780${s.poster_img}`:e.value.postImageUrl=await re(f.value),await ce(e.value),D.setFilterLists(),a.close("add-movie-id")},p=$(()=>!!(e.value.country&&e.value.type&&e.value.name&&e.value.year));return(l,o)=>(g(),te(L(de),{"modal-id":"add-movie-id","content-class":"absolute inset-0  bg-[#30313299]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:G(()=>[t("div",we,[t("div",ke,[t("div",null,[Se,t("div",$e,[r(ae,{onSelected:w,date:e.value.record_date,"onUpdate:date":o[0]||(o[0]=n=>e.value.record_date=n)},null,8,["date"]),r(se,{attrSelected:b.value,onSelected:_},null,8,["attrSelected"]),r(k,{placeholder:"名稱",text:e.value.name,"onUpdate:text":o[1]||(o[1]=n=>e.value.name=n)},null,8,["text"]),r(k,{placeholder:"原始名稱(選項)",text:e.value.original_name,"onUpdate:text":o[2]||(o[2]=n=>e.value.original_name=n)},null,8,["text"]),r(k,{placeholder:"年份",text:e.value.year,"onUpdate:text":o[3]||(o[3]=n=>e.value.year=n)},null,8,["text"]),r(k,{placeholder:"產地",text:e.value.country,"onUpdate:text":o[4]||(o[4]=n=>e.value.country=n)},null,8,["text"]),r(oe,{data:i.genres,category:e.value.categoryList,"onUpdate:category":o[5]||(o[5]=n=>e.value.categoryList=n)},null,8,["data","category"])]),r(le,{class:"my-8",imgUrl:`https://image.tmdb.org/t/p/w780${i.poster_img}`,movieName:i.name,onImageData:u},null,8,["imgUrl","movieName"]),t("div",De,[r(K,{title:"最愛",onSelected:M}),r(K,{title:"已觀看",onSelected:d}),r(ne,{onSelected:c})]),r(ie,{class:"mt-8",disable:p.value,onClick:o[6]||(o[6]=n=>v())},{default:G(()=>[Y("添加")]),_:1},8,["disable"])]),t("button",{type:"button",class:"absolute right-10 top-10",onClick:o[7]||(o[7]=n=>L(a).close("add-movie-id"))},Ie)])])]),_:1}))}},Ye=E(Te,[["__scopeId","data-v-e80c9857"]]),q=i=>(H("data-v-27381b39"),i=i(),J(),i),Fe={class:"relative mb-[60px]"},Ue={class:"z-5 relative flex h-[375px] items-end md:flex md:h-full md:min-h-[500px] md:items-center",id:"backdrop-wrap"},Ce={key:0,alt:"",class:"absolute inset-0 size-full object-cover"},je={key:1,alt:"",class:"absolute inset-0 size-full object-cover"},ze=q(()=>t("div",{class:"bg-overlay absolute bottom-0 left-0 h-full w-[100%]"},null,-1)),Ne={class:"container relative hidden md:block md:py-10"},Be={class:"w-[100%] md:w-[45%]"},Ae={class:"text-heading-m"},Oe={class:"text-heading-s mt-1"},Pe={class:"container relative z-20 mt-[-40px] block md:hidden md:translate-y-0"},Re={class:"w-[100%] md:w-[45%]"},We={class:"text-heading-m"},Ge={class:"text-heading-s mt-1"},Ke={class:"container mt-10 md:mt-20"},Le={class:"items-center md:flex md:justify-between"},Ve={class:"mx-auto w-full md:ml-0 md:w-[35%] lg:w-[30%]",id:"poster"},Ee=["src"],He={class:"mx-auto mt-10 w-full md:ml-auto md:mt-0 md:w-[55%]"},Je=q(()=>t("div",{class:"text-body-s-medium info-anim mt-6 w-fit rounded-[4px] bg-primary px-1 py-[2px] text-second md:mt-0",id:"added-anim"}," 已加入 ",-1)),Ze={class:"info-anim mt-6"},qe={class:"mt-10 flex items-center justify-between"},Qe={class:"text-body-l mt-3 grid gap-y-2"},Xe={class:"info-anim"},et={class:"info-anim"},tt={class:"info-anim"},at={class:"info-anim"},st={class:"info-anim"},ot={__name:"detail",setup(i){const s=me(),a=S(),D=S({language:"zh-TW"}),f=async()=>{const d=await xe(s.path,{params:D.value});a.value=d.data},e=ue({component:Ye,attrs:{}}),x=async()=>{var d,c,u,v,p,l,o,n,y;e.open(),e.patchOptions({attrs:{name:((d=a.value)==null?void 0:d.title)??((c=a.value)==null?void 0:c.name),original_name:((u=a.value)==null?void 0:u.original_title)??((v=a.value)==null?void 0:v.original_name),year:((p=a.value)==null?void 0:p.release_date)??((l=a.value)==null?void 0:l.first_air_date),country:w.value,poster_img:(o=a.value)==null?void 0:o.poster_path,background_image:(n=a.value)!=null&&n.backdrop_path?`https://image.tmdb.org/t/p/w1280${a.value.backdrop_path}`:null,genres:(y=a.value)==null?void 0:y.genres,type:s.params.mediaType}})};f();const b=$(()=>{var d;return be((d=a.value)==null?void 0:d.genres)}),w=$(()=>{var c;const d=(c=a.value)==null?void 0:c.origin_country[0];return V.hasOwnProperty(d)?V[d]:d});let _=ve.timeline();const M=async()=>{_.fromTo("#backdrop-wrap",{opacity:0},{duration:1,delay:0,opacity:1}),_.fromTo("#backdrop-wrap p",{opacity:0,x:200},{x:0,duration:.5,opacity:1,stagger:.2},"-=0.5"),_.fromTo("#poster",{opacity:0,scale:.5},{x:0,duration:1,scale:1,opacity:1}),_.fromTo(".info-anim",{opacity:0,x:100},{x:0,duration:.5,opacity:1,stagger:.1},"-=1")};return pe(async()=>{await _e(),await M()}),(d,c)=>{var v,p,l,o,n,y,F,U,C,j,z,N,B,A,O,P;const u=ge("lazy");return g(),h("div",Fe,[t("div",Ue,[(v=a.value)!=null&&v.backdrop_path?T((g(),h("img",Ce,null,512)),[[u,`https://image.tmdb.org/t/p/w1280${(p=a.value)==null?void 0:p.backdrop_path}`]]):T((g(),h("img",je,null,512)),[[u,`https://image.tmdb.org/t/p/w1280${(l=a.value)==null?void 0:l.poster_path}`]]),ze,t("div",Ne,[t("div",Be,[t("p",Ae,m(((o=a.value)==null?void 0:o.title)??((n=a.value)==null?void 0:n.name)),1),t("p",Oe,m(((y=a.value)==null?void 0:y.original_title)??((F=a.value)==null?void 0:F.original_name)),1)])])]),t("section",Pe,[t("div",Re,[t("p",We,m(((U=a.value)==null?void 0:U.title)??((C=a.value)==null?void 0:C.name)),1),t("p",Ge,m(((j=a.value)==null?void 0:j.original_title)??((z=a.value)==null?void 0:z.original_name)),1)])]),t("section",Ke,[t("div",Le,[t("div",Ve,[t("img",{src:`https://image.tmdb.org/t/p/w780${(N=a.value)==null?void 0:N.poster_path}`,alt:"",class:"rounded-[8px]"},null,8,Ee)]),t("div",He,[Je,t("div",Ze,m((B=a.value)==null?void 0:B.overview),1),t("div",qe,[t("div",Qe,[t("p",Xe," 上映日期: "+m(((A=a.value)==null?void 0:A.release_date)??((O=a.value)==null?void 0:O.first_air_date)),1),t("p",et,"片長:"+m((P=a.value)==null?void 0:P.runtime)+"分鐘",1),t("p",tt,[Y(" 類型: "),(g(!0),h(ye,null,he(b.value,(R,W)=>(g(),h("span",{key:W},[Y(m(R.label)+" ",1),T(t("span",null,", ",512),[[fe,W!==b.value.length-1]])]))),128))]),t("p",at,"產地: "+m(w.value),1)])]),t("div",st,[t("button",{class:"text-body-l-semibold mt-[24px] w-full rounded-[8px] border border-primary py-2 text-center text-primary md:max-w-[329px]",onClick:c[0]||(c[0]=R=>x())}," 添加 ")])])])])])}}},it=E(ot,[["__scopeId","data-v-27381b39"]]);export{it as default};
