import{_ as A,Y as at,V as H,y as ot,a as s,j as st,k as nt,b as a,u as p,a0 as it,J as b,a1 as lt,a3 as R,a4 as ct,K as rt,v as J,a5 as dt,Z as ut,ab as P,M as Q,N as X,r as Z,i as pt,a8 as mt,g as vt,o as _t,ac as I,I as yt,c as n,x as m,t as _,z as ft,F as C,d as q,ad as gt}from"./index-oBVCegeF.js";const tt=r=>(Q("data-v-4652d3c6"),r=r(),X(),r),ht={class:"absolute inset-0 h-full overflow-auto"},xt={class:"main-gradient relative mx-auto my-[128px] w-[489px] rounded-[50px] border border-[#FFFFFF33] bg-black p-20"},kt=tt(()=>a("p",{class:"text-heading-s"},"修改記錄",-1)),wt={class:"mt-8 space-y-6"},bt={class:"mt-8 space-y-3"},St=tt(()=>a("i",{class:"icon-close text-[32px]"},null,-1)),$t=[St],Mt={__name:"edit-movie-modal",props:{updatedMovie:{type:Function},name:{type:String},original_name:{type:String},year:{type:String},country:{type:String},poster_img:{type:String},background_image:{type:String},type:{type:String},genres:{type:Object},categoryList:{type:Object},mark:{type:Number},watched:{type:Boolean},favorite:{type:Boolean}},setup(r){const d=r;console.log(d.categoryList);const t=at(),S=H(),{name:w,original_name:$,year:M,country:F,type:y,mark:D,watched:u,favorite:l}=d,e=ot({name:w,original_name:$,year:M,country:F,type:y,mark:D,watched:u,favorite:l}),f=c=>e.type=c,g=c=>e.favorite=c,h=c=>e.watched=c,x=c=>e.mark=c,k=async()=>{e.watched_date=e.watched?ut(new Date).format("DD-MM-YYYY"):"",await P(S.params.id,e),await d.updatedMovie(),console.log("updated movie"),t.close("edit-movie-id")};return(c,o)=>(s(),st(J(dt),{"modal-id":"edit-movie-id","content-class":"absolute inset-0  bg-[#30313299]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:nt(()=>[a("div",ht,[a("div",xt,[a("div",null,[kt,a("div",wt,[p(it,{attrSelected:e==null?void 0:e.type,onSelected:f},null,8,["attrSelected"]),p(b,{placeholder:"名稱",text:e.name,"onUpdate:text":o[0]||(o[0]=i=>e.name=i)},null,8,["text"]),p(b,{placeholder:"原始名稱(選項)",text:e.original_name,"onUpdate:text":o[1]||(o[1]=i=>e.original_name=i)},null,8,["text"]),p(b,{placeholder:"年份",text:e.year,"onUpdate:text":o[2]||(o[2]=i=>e.year=i)},null,8,["text"]),p(b,{placeholder:"產地",text:e.country,"onUpdate:text":o[3]||(o[3]=i=>e.country=i)},null,8,["text"]),p(lt,{data:d.categoryList,category:e.categoryList,"onUpdate:category":o[4]||(o[4]=i=>e.categoryList=i)},null,8,["data","category"])]),a("div",bt,[p(R,{title:"最愛",current:e.favorite,onSelected:g},null,8,["current"]),p(R,{title:"已觀看",current:e.watched,onSelected:h},null,8,["current"]),p(ct,{current:e.mark,onSelected:x},null,8,["current"])]),p(rt,{text:"修改",class:"mt-8",disable:!0,onClick:o[5]||(o[5]=i=>k())})]),a("button",{type:"button",class:"absolute right-10 top-10",onClick:o[6]||(o[6]=i=>J(t).close("edit-movie-id"))},$t)])])]),_:1}))}},Ft=A(Mt,[["__scopeId","data-v-4652d3c6"]]),L=r=>(Q("data-v-d8095616"),r=r(),X(),r),Dt={class:"z-1 relative flex h-[375px] items-end md:flex md:h-full md:min-h-[500px] md:items-center",id:"backdrop"},It=["src"],Ct=L(()=>a("div",{class:"bg-overlay absolute bottom-0 left-0 h-full w-[100%]"},null,-1)),Lt={class:"container relative z-10"},Tt={class:"text-heading-m"},Ut={class:"text-heading-s mt-1"},jt={class:"mb-20 mt-10 md:mt-20"},zt={class:"container"},Bt={class:"relative z-10 w-full items-center justify-between md:flex"},Nt={class:"mx-auto w-full md:ml-0 md:w-[35%]",id:"poster"},Vt=["src"],Yt={class:"w-full md:w-[55%]"},Ot={key:0,class:"text-body-s-medium info-anim mt-6 w-fit rounded-[4px] bg-primary px-1 py-[2px] text-second md:mt-0",id:"watched-wrap"},Wt={class:"text-body-l mt-3 grid gap-y-2",id:"info-wrap"},Et={key:0,class:"info-anim"},Gt={key:1,class:"info-anim"},Kt={key:2,class:"info-anim"},Rt={key:3,class:"info-anim"},Jt={key:4,class:"info-anim"},Zt={key:5,class:"info-anim"},qt={class:"info-anim mt-6 flex items-center",id:"star-wrap"},At={key:0,class:"icon-star-fill text-[24px]"},Ht={key:1,class:"icon-star text-[24px]"},Pt={class:"info-anim info-anim mt-6 flex space-x-6 text-[32px] opacity-0"},Qt={key:0,class:"icon-heart-fill"},Xt={key:1,class:"icon-heart"},te=L(()=>a("i",{class:"icon-pencil-simple"},null,-1)),ee=[te],ae=L(()=>a("i",{class:"icon-trash"},null,-1)),oe=[ae],se={__name:"movie-detail",setup(r){const d=H(),t=Z();Z({language:"zh-TW"});const S=pt(()=>{var u,l,e;if(((u=t.value)==null?void 0:u.type)==="movie")return"電影";if(((l=t.value)==null?void 0:l.type)==="tv")return"電視劇";if(((e=t.value)==null?void 0:e.type)==="show")return"綜藝"}),w=mt({component:Ft,attrs:{updatedMovie:async()=>{console.log("test"),t.value=await I(d.params.id)}}}),$=async()=>{var u;await P(d.params.id,{favorite:!((u=t.value)!=null&&u.favorite)}),t.value=await I(d.params.id)},M=async()=>{console.log(t.value);const{name:u,original_name:l,year:e,country:f,type:g,mark:h,watched:x,favorite:k,categoryList:c}=t.value;w.open(),w.patchOptions({attrs:{name:u,original_name:l,year:e,country:f,type:g,mark:h,watched:x,favorite:k,categoryList:c}})},F=async()=>{await gt(d.params.id)};let y=vt.timeline();const D=async()=>{y.fromTo("#backdrop",{opacity:0},{duration:1,delay:0,opacity:1}),y.fromTo("#backdrop p",{opacity:0,x:200},{x:0,duration:.5,opacity:1,stagger:.2},"-=0.5"),y.fromTo("#poster",{opacity:0,scale:.5},{x:0,duration:1,scale:1,opacity:1},"-=0.3"),y.fromTo(".info-anim",{opacity:0,x:100},{x:0,duration:.5,opacity:1,stagger:.1},"-=1")};return _t(async()=>{t.value=await I(d.params.id),yt(async()=>{await D()})}),(u,l)=>{var e,f,g,h,x,k,c,o,i,T,U,j,z,B,N,V,Y,O,W,E;return s(),n(C,null,[a("section",null,[a("div",Dt,[((e=t.value)==null?void 0:e.background_image)??((f=t.value)==null?void 0:f.postImageUrl)?(s(),n("img",{key:0,src:((g=t.value)==null?void 0:g.background_image)??((h=t.value)==null?void 0:h.postImageUrl),alt:"",class:"absolute inset-0 size-full object-cover"},null,8,It)):m("",!0),Ct,a("div",Lt,[a("p",Tt,_((x=t.value)==null?void 0:x.name),1),a("p",Ut,_((k=t.value)==null?void 0:k.original_name),1)])])]),a("section",jt,[a("div",zt,[a("div",Bt,[a("div",Nt,[a("img",{src:(c=t.value)==null?void 0:c.postImageUrl,alt:"",class:"rounded-[8px]"},null,8,Vt)]),a("div",Yt,[(o=t.value)!=null&&o.watched?(s(),n("div",Ot," 已觀看 ")):m("",!0),a("div",Wt,[(i=t.value)!=null&&i.year?(s(),n("p",Et,"上映年份: "+_((T=t.value)==null?void 0:T.year),1)):m("",!0),(U=t.value)!=null&&U.record_date?(s(),n("p",Gt," 記錄日期: "+_((j=t.value)==null?void 0:j.record_date),1)):m("",!0),(z=t.value)!=null&&z.watched?(s(),n("p",Kt," 觀看日期: "+_((B=t.value)==null?void 0:B.watched_date),1)):m("",!0),(N=t.value)!=null&&N.type?(s(),n("p",Rt,"種類: "+_(S.value),1)):m("",!0),(V=t.value)!=null&&V.categoryList?(s(),n("p",Jt,[ft(" 分類: "),(s(!0),n(C,null,q((Y=t.value)==null?void 0:Y.categoryList,v=>(s(),n("span",{key:v},_(v.label)+",",1))),128))])):m("",!0),(O=t.value)!=null&&O.country?(s(),n("p",Zt,"產地: "+_((W=t.value)==null?void 0:W.country),1)):m("",!0)]),a("div",qt,[(s(),n(C,null,q(5,(v,et)=>{var G,K;return a("div",{key:et},[v<=((G=t.value)==null?void 0:G.mark)?(s(),n("i",At)):m("",!0),v>((K=t.value)==null?void 0:K.mark)?(s(),n("i",Ht)):m("",!0)])}),64))]),a("div",Pt,[a("button",{onClick:l[0]||(l[0]=v=>$()),class:"transition-transform duration-200 hover:scale-125"},[(E=t.value)!=null&&E.favorite?(s(),n("i",Qt)):(s(),n("i",Xt))]),a("button",{class:"transition-transform duration-200 hover:scale-125",onClick:l[1]||(l[1]=v=>M())},ee),a("button",{class:"transition-transform duration-200 hover:scale-125",onClick:l[2]||(l[2]=v=>F())},oe)])])])])])],64)}}},ie=A(se,[["__scopeId","data-v-d8095616"]]);export{ie as default};
