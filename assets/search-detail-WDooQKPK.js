import{_ as G,Y as P,r as k,Z as $,i as D,a as _,j as E,k as Z,b as a,u as r,$ as q,a0 as H,I as w,a1 as Q,a2 as X,a3 as B,a4 as ee,J as te,v as O,a5 as ae,a6 as se,a7 as le,L as J,M as K,A as oe,V as ne,a8 as ie,c as p,t as u,x as de,z as R,F as re,d as ce,a9 as ue,G as me,U as ve}from"./index-J2Dyeqh_.js";const W={JP:"日本",TW:"台灣",US:"美國",KR:"韓國"},L=n=>(J("data-v-edfab380"),n=n(),K(),n),_e={class:"absolute inset-0 h-full overflow-auto"},pe={class:"main-gradient relative mx-auto my-[128px] w-[489px] rounded-[50px] border border-[#FFFFFF33] bg-black p-20"},ge=L(()=>a("p",{class:"text-heading-s"},"添加記錄",-1)),ye={class:"mt-8 space-y-6"},he={class:"space-y-3"},be=L(()=>a("i",{class:"icon-close text-[32px]"},null,-1)),xe=[be],fe={__name:"add-movie-modal",props:{name:{type:String},original_name:{type:String},year:{type:String},country:{type:String},poster_img:{type:String},background_image:{type:String},type:{type:String},genres:{type:Object}},setup(n){const s=n;console.log(s);const e=P(),b=k(null),t=k({record_date:$(new Date).format("DD-MM-YYYY"),type:"",name:"",original_name:"",year:"",country:"",mark:0,favorite:!1,categoryList:[],watched:!1,postImageUrl:"",background_image:null});t.value.type=(s==null?void 0:s.type)??"",t.value.name=(s==null?void 0:s.name)??"",t.value.original_name=(s==null?void 0:s.original_name)??"",t.value.year=$(s==null?void 0:s.year).format("YYYY")??"",t.value.country=(s==null?void 0:s.country)??"",t.value.background_image=(s==null?void 0:s.background_image)??null;const x=i=>t.value.record_date=i,S=i=>t.value.type=i,g=i=>t.value.favorite=i,f=i=>t.value.watched=i,d=i=>t.value.mark=i,c=async i=>b.value=i,m=async()=>{t.value={...t.value,watched_date:t.value.watched?$(new Date).format("DD-MM-YYYY"):""},s.poster_img?t.value.postImageUrl=`https://image.tmdb.org/t/p/w780${s.poster_img}`:t.value.postImageUrl=await se(b.value),await le(t.value),console.log("added movie"),e.close("add-movie-id")},v=D(()=>!!(t.value.country&&t.value.type&&t.value.name&&t.value.year));return(i,l)=>(_(),E(O(ae),{"modal-id":"add-movie-id","content-class":"absolute inset-0  bg-[#30313299]"},{default:Z(()=>[a("div",_e,[a("div",pe,[a("div",null,[ge,a("div",ye,[r(q,{onSelected:x,date:t.value.record_date,"onUpdate:date":l[0]||(l[0]=o=>t.value.record_date=o)},null,8,["date"]),r(H,{attrSelected:n.type,onSelected:S},null,8,["attrSelected"]),r(w,{placeholder:"名稱",text:t.value.name,"onUpdate:text":l[1]||(l[1]=o=>t.value.name=o)},null,8,["text"]),r(w,{placeholder:"原始名稱(選項)",text:t.value.original_name,"onUpdate:text":l[2]||(l[2]=o=>t.value.original_name=o)},null,8,["text"]),r(w,{placeholder:"年份",text:t.value.year,"onUpdate:text":l[3]||(l[3]=o=>t.value.year=o)},null,8,["text"]),r(w,{placeholder:"產地",text:t.value.country,"onUpdate:text":l[4]||(l[4]=o=>t.value.country=o)},null,8,["text"]),r(Q,{data:n.genres,category:t.value.categoryList,"onUpdate:category":l[5]||(l[5]=o=>t.value.categoryList=o)},null,8,["data","category"])]),r(X,{class:"my-8",imgUrl:`https://image.tmdb.org/t/p/w780${n.poster_img}`,movieName:n.name,onImageData:c},null,8,["imgUrl","movieName"]),a("div",he,[r(B,{title:"最愛",onSelected:g}),r(B,{title:"已觀看",onSelected:f}),r(ee,{onSelected:d})]),r(te,{text:"添加",class:"mt-8",disable:v.value,onClick:l[6]||(l[6]=o=>m())},null,8,["disable"])]),a("button",{type:"button",class:"absolute right-10 top-10",onClick:l[7]||(l[7]=o=>O(e).close("add-movie-id"))},xe)])])]),_:1}))}},we=G(fe,[["__scopeId","data-v-edfab380"]]),ke=n=>n==null?void 0:n.map(s=>({label:oe[s.id]??s.id,slug:s.id})),Se=n=>(J("data-v-5ed0630c"),n=n(),K(),n),$e={class:"relative mb-[60px]"},De={class:"z-5 relative flex h-[375px] items-end md:flex md:h-full md:min-h-[500px] md:items-center"},Ie=["src"],Me=["src"],Ue=Se(()=>a("div",{class:"bg-overlay absolute bottom-0 left-0 h-full w-[100%]"},null,-1)),Ye={class:"container relative hidden md:block md:py-10"},Fe={class:"w-[100%] md:w-[45%]"},Ce={class:"text-heading-m"},Te={class:"text-heading-s mt-1"},je={class:"container relative z-20 mt-[-40px] block md:hidden md:translate-y-0"},ze={class:"w-[100%] md:w-[45%]"},Ne={class:"text-heading-m"},Ve={class:"text-heading-s mt-1"},Ae={class:"container mt-10 md:mt-20"},Be={class:"items-center md:flex md:justify-between"},Oe={class:"mx-auto w-full md:ml-0 md:w-[35%] lg:w-[30%]"},Re=["src"],We={class:"mx-auto mt-10 w-full md:ml-auto md:mt-0 md:w-[55%]"},Ge={class:"mt-6"},Je={class:"mt-10 flex items-center justify-between"},Ke={class:"text-body-l mt-3 grid gap-y-2"},Le={key:0},Pe={__name:"search-detail",setup(n){const s=ne(),e=k(),b=k({language:"zh-TW"}),t=async()=>{const d=await ue(s.path,{params:b.value});e.value=d.data,console.log(e.value)},x=ie({component:we,attrs:{}}),S=async()=>{var d,c,m,v,i,l,o,y,h;x.open(),x.patchOptions({attrs:{name:((d=e.value)==null?void 0:d.title)??((c=e.value)==null?void 0:c.name),original_name:((m=e.value)==null?void 0:m.original_title)??((v=e.value)==null?void 0:v.original_name),year:((i=e.value)==null?void 0:i.release_date)??((l=e.value)==null?void 0:l.first_air_date),country:f.value,poster_img:(o=e.value)==null?void 0:o.poster_path,background_image:(y=e.value)!=null&&y.backdrop_path?`https://image.tmdb.org/t/p/w1280${e.value.backdrop_path}`:null,genres:(h=e.value)==null?void 0:h.genres,type:s.params.mediaType}})};t();const g=D(()=>{var d;return ke((d=e.value)==null?void 0:d.genres)});console.log(g.value);const f=D(()=>{var c;const d=(c=e.value)==null?void 0:c.origin_country[0];return W.hasOwnProperty(d)?W[d]:d});return(d,c)=>{var m,v,i,l,o,y,h,I,M,U,Y,F,C,T,j,z,N;return _(),p("div",$e,[a("div",De,[(m=e.value)!=null&&m.backdrop_path?(_(),p("img",{key:0,src:`https://image.tmdb.org/t/p/w1280${(v=e.value)==null?void 0:v.backdrop_path}`,alt:"",class:"absolute inset-0 size-full object-cover"},null,8,Ie)):(_(),p("img",{key:1,src:`https://image.tmdb.org/t/p/w1280${(i=e.value)==null?void 0:i.poster_path}`,alt:"",class:"absolute inset-0 size-full object-cover"},null,8,Me)),Ue,a("div",Ye,[a("div",Fe,[a("p",Ce,u(((l=e.value)==null?void 0:l.title)??((o=e.value)==null?void 0:o.name)),1),a("p",Te,u(((y=e.value)==null?void 0:y.original_title)??((h=e.value)==null?void 0:h.original_name)),1)])])]),a("section",je,[a("div",ze,[a("p",Ne,u(((I=e.value)==null?void 0:I.title)??((M=e.value)==null?void 0:M.name)),1),a("p",Ve,u(((U=e.value)==null?void 0:U.original_title)??((Y=e.value)==null?void 0:Y.original_name)),1)])]),a("section",Ae,[a("div",Be,[a("div",Oe,[a("img",{src:`https://image.tmdb.org/t/p/w780${(F=e.value)==null?void 0:F.poster_path}`,alt:"",class:"rounded-[8px]"},null,8,Re)]),a("div",We,[a("div",Ge,u((C=e.value)==null?void 0:C.overview),1),a("div",Je,[a("div",Ke,[a("p",null,"上映日期: "+u(((T=e.value)==null?void 0:T.release_date)??((j=e.value)==null?void 0:j.first_air_date)),1),(z=e.value)!=null&&z.runtime?(_(),p("p",Le,"片長:"+u((N=e.value)==null?void 0:N.runtime)+"分鐘",1)):de("",!0),a("p",null,[R(" 類型: "),(_(!0),p(re,null,ce(g.value,(V,A)=>(_(),p("span",{key:A},[R(u(V.label)+" ",1),me(a("span",null,", ",512),[[ve,A!==g.value.length-1]])]))),128))]),a("p",null,"產地: "+u(f.value),1)])]),a("div",null,[a("button",{class:"text-body-l-semibold mt-[24px] w-full rounded-[8px] border border-primary py-2 text-center text-primary md:max-w-[329px]",onClick:c[0]||(c[0]=V=>S())}," 添加 ")])])])])])}}},Ze=G(Pe,[["__scopeId","data-v-5ed0630c"]]);export{Ze as default};
