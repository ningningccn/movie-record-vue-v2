import{u as ne,r as h,w as W,g as V,o as H,a as u,c as p,b as e,F as C,d as w,n as L,t as $,e as ee,f as G,h as P,i as z,s as oe,j as M,k as R,l as ae,m as re,p as ie,q as ce,v as j,x as k,y as S,z as A,A as F,B as D,C as ue,D as de,E as pe,G as te,R as se,H as K,S as J,I as fe,J as xe,K as ve}from"./index-Bao1wwBA.js";import{L as _e}from"./loading-Do0XvJ7D.js";const he={class:"sticky top-0 z-10 bg-second",id:"category-section"},ye={class:"container relative z-10"},ge={class:"z-10 flex items-center justify-center pt-6"},be={class:"relative"},me=["onClick"],ke=e("div",{class:"-translate-y-[1px] border-b border-enable",id:"category-bar"},null,-1),Ce={__name:"type-tab",emits:["selected"],setup(f,{emit:c}){const o=c,{width:d,height:i}=ne(),s=h(0),t=h(0),v=h(""),x=(l,r)=>{v.value=l;const n=document.querySelector(`.btn-${r}`);s.value=n.clientWidth,t.value=n.offsetLeft,o("selected",l)},b=h([{title:"全部",slug:""},{title:"電影",slug:"movie"},{title:"電視劇",slug:"tv"},{title:"動漫",slug:"cartoon"}]);W(()=>d.value,(l,r)=>{const n=document.querySelector(".btn-0");s.value=n.clientWidth});let m=V.timeline();const a=()=>{m.fromTo("#category-bar",{width:0,opacity:0},{duration:.5,opacity:1,width:"100%",onComplete:()=>{const l=document.querySelector(".btn-0");s.value=l.clientWidth}}),m.fromTo(".category-text",{opacity:0,y:10},{duration:.5,opacity:1,stagger:.1,y:0})};return H(()=>{a()}),(l,r)=>(u(),p("div",he,[e("div",ye,[e("div",ge,[e("div",be,[(u(!0),p(C,null,w(b.value,(n,y)=>(u(),p("button",{key:n.slug,class:L(["text-body-xl-medium category-text relative px-6 py-4 text-enable hover:text-white md:px-[60px]",[{"text-white":v.value==n.slug},`btn-${y}`]]),onClick:_=>x(n.slug,y)},$(n.title),11,me))),128)),e("div",{class:"absolute bottom-0 h-[3px] bg-primary transition-all duration-300",style:ee({width:`${s.value}px`,left:`${t.value}px`})},null,4)])])]),ke]))}},le="--vc-auto-duration",$e=`height var(${le}) cubic-bezier(0.33, 1, 0.68, 1)`,B={padding:0},we=300,Le={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"},Se=()=>typeof navigator<"u"&&navigator.userAgent.includes("Firefox");function Q(f){return f.value?parseFloat(getComputedStyle(f.value).height):0}function U(f){var c;return{height:`${((c=f.value)==null?void 0:c.scrollHeight)||0}px`}}function X(f){if(!f.value)return{};const{transition:c}=getComputedStyle(f.value);return c==="all 0s ease 0s"||Se()&&c==="all"?{transition:$e}:{transition:c}}function Z(f){if(!f.value)return!0;const{transition:c}=getComputedStyle(f.value);return typeof window.requestAnimationFrame>"u"||window.matchMedia("(prefers-reduced-motion: reduce)").matches||c.includes("none")||c.includes("height 0s")}function Ae(f=0){if(f===0)return 0;const c=f/36,o=Math.round((4+15*c**.25+c/5)*10);return Number.isFinite(o)?o:0}const T=G({inheritAttrs:!0,__name:"Collapse",props:{when:{type:Boolean},baseHeight:{default:0},as:{default:"div"}},emits:["collapse","expand","collapsed","expanded"],setup(f,{emit:c}){const o=f,d=c,i=P(o,"when"),s=P(o,"baseHeight"),t=z(()=>({overflow:"hidden",height:`${s.value}px`})),v=z(()=>({...B,...s.value===0?{display:"none"}:t.value})),x=h(null),b=h(i.value?"expanded":"collapsed"),m=g=>b.value=g;function a(){return i.value?B:s.value===0?Le:v.value}const l=oe(a()),r=g=>l.value=g,n=g=>r({...l.value,...g}),y=h(we),_=g=>y.value=g,E=z(()=>({[le]:`${y.value}ms`}));function O(){r(B),m("expanded"),d("expanded")}function I(){r(v.value),m("collapsed"),d("collapsed")}H(()=>{if(!x.value)return;const g=Ae(x.value.scrollHeight-s.value);g>0&&_(g),!i.value&&s.value===0&&r(v.value)}),W(i,g=>{if(x.value)if(g){if(Z(x))return O();m("expanding"),d("expand"),r({...B,...t.value,...E.value}),requestAnimationFrame(()=>{if(x.value.scrollHeight===0)return O();n({...U(x),...X(x),willChange:"height"})})}else{if(Z(x)||(m("collapsing"),d("collapse"),n({...E.value,...U(x)}),x.value.scrollHeight===0))return I();requestAnimationFrame(()=>{n({...t.value,...X(x),willChange:"height"})})}}),W(s,g=>{i.value||(g>0?n({display:void 0,height:`${g}px`}):n({display:"none"}))});function Y(g){g.target&&g.target===x.value&&g.propertyName==="height"&&(i.value?Math.abs(x.value.scrollHeight-Q(x))<1&&O():Math.abs(s.value-Q(x))<1&&I())}return(g,q)=>(u(),M(ce(o.as),{ref_key:"collapseRef",ref:x,style:ee(l.value),onTransitionend:Y,"data-collapse":b.value},{default:R(()=>[ae(g.$slots,"default",re(ie({state:b.value})))]),_:3},40,["style","data-collapse"]))}}),Ee={class:"cursor-pointer rounded-[8px] bg-card"},Re=e("div",{class:"flex space-x-2"},[e("i",{class:"icon-sort text-[22px]"}),e("p",null,"排序")],-1),je={class:"flex flex-col space-y-6 p-6 pb-4"},Fe=["onClick"],ze={key:0,class:"icon-check text-[20px]"},Oe={__name:"sort",setup(f){const c=j(),o=h(!1),d=[{title:"最新加入",key:"latest_addition",slug:"desc",filterWord:"createAt"},{title:"最舊加入",key:"oldest_addition",slug:"asc",filterWord:"createAt"},{title:"最新年份",key:"latest_year",slug:"desc",filterWord:"year"},{title:"最舊年份",key:"oldest_year",slug:"asc",filterWord:"year"}],i=(s,t,v)=>{c.setOrder({key:s,slug:t,filterWord:v})};return(s,t)=>(u(),p("div",Ee,[e("div",{class:"flex items-center justify-between px-6 py-2",onClick:t[0]||(t[0]=v=>o.value=!o.value)},[Re,e("i",{class:L(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":o.value}])},null,2)]),k(S(T),{when:o.value},{default:R(()=>[e("div",je,[(u(),p(C,null,w(d,v=>e("button",{type:"button",class:"text-body-m-medium flex items-center justify-between text-left",key:v.key,onClick:x=>i(v.key,v.slug,v.filterWord)},[e("p",null,$(v.title),1),v.key==S(c).currKey?(u(),p("i",ze)):A("",!0)],8,Fe)),64))])]),_:1},8,["when"])]))}},Ie={key:0,class:"absolute size-full rounded-[4px] bg-primary"},Ve=e("i",{class:"icon-check text-[20px] text-second"},null,-1),We=[Ve],N={__name:"checkbox",props:{title:String,slug:String|Number,disabled:{type:Boolean,default:!1},isChecked:Boolean},emits:["selected"],setup(f,{expose:c,emit:o}){const d=o,i=f,s=h(i.isChecked),t=()=>{i.disabled||(s.value=!s.value,d("selected",{label:i.title,id:i.slug}))},v=()=>{s.value=!1,d("selected","clear")};return W(()=>i.isChecked,x=>{s.value=x}),c({clearCheckbox:v}),(x,b)=>(u(),p("div",{onClick:b[0]||(b[0]=m=>t()),class:L(["flex items-center space-x-2",[{"text-disable":f.disabled},{"cursor-pointer":!f.disabled}]])},[e("div",{class:L(["relative size-[20px] rounded-[4px]",[{border:!s.value},{"border-disable":f.disabled}]])},[s.value?(u(),p("div",Ie,We)):A("",!0)],2),e("p",null,$(f.title),1)],2))}},Me=e("p",null,"狀態",-1),Te={class:"flex flex-col space-y-3 pt-3"},Ye={__name:"status",setup(f,{expose:c}){const o=j(),d=[{title:"最愛",slug:"favorite"},{title:"已觀看",slug:"watched"},{title:"待觀看",slug:"to_be_watching"}],i=h(),s=h(!0),t=F(o.currStatusLists),v=l=>!!(t.includes("watched")&&l=="to_be_watching"||t.includes("to_be_watching")&&l=="watched"),x=l=>t.findIndex(n=>n===l)>-1,b=l=>{if(l=="clear")t.length=0;else{const r=t.indexOf(l.id);r!==-1?t.splice(r,1):t.push(l.id),o.setCurrStatusList(t)}};return c({handleALlExpanded:l=>{s.value=l},clearAllCheckbox:()=>{i.value.forEach(l=>{l.clearCheckbox()})}}),(l,r)=>(u(),p("div",null,[e("div",{class:"flex cursor-pointer items-center justify-between",onClick:r[0]||(r[0]=n=>s.value=!s.value)},[Me,e("i",{class:L(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":s.value}])},null,2)]),k(S(T),{when:s.value},{default:R(()=>[e("div",Te,[(u(),p(C,null,w(d,(n,y)=>e("div",{key:y,class:""},[k(N,{title:n.title,slug:n.slug,disabled:v(n.slug),isChecked:x(n.slug),onSelected:b,ref_for:!0,ref_key:"statusRef",ref:i},null,8,["title","slug","disabled","isChecked"])])),64))])]),_:1},8,["when"])]))}},Be={key:0},He={class:"flex flex-col space-y-3 pt-3"},De={__name:"year",setup(f,{expose:c}){const o=j(),d=z(()=>o.yearLists.map(a=>({title:a,slug:a}))),i=h(),s=h(!0),t=F(o.currYearLists),v=a=>{if(a=="clear")t.length=0;else{const l=t.findIndex(r=>r==a.id);l!==-1?t.splice(l,1):t.push(a.id),o.setCurrYearLists(t)}},x=a=>t.findIndex(r=>r===a)>-1;return c({handleALlExpanded:a=>{s.value=a},clearAllCheckbox:()=>{i.value.forEach(a=>{a.clearCheckbox()})}}),(a,l)=>(u(),p("div",null,[e("div",{class:"flex cursor-pointer items-center justify-between",onClick:l[0]||(l[0]=r=>s.value=!s.value)},[e("p",null,[D(" 年份 "),t.length>0?(u(),p("span",Be,"("+$(t.length)+")",1)):A("",!0)]),e("i",{class:L(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":s.value}])},null,2)]),k(S(T),{when:s.value},{default:R(()=>[e("div",He,[(u(!0),p(C,null,w(d.value,(r,n)=>(u(),p("div",{key:n,class:""},[k(N,{title:r.title,slug:r.slug,isChecked:x(r.slug),onSelected:v,ref_for:!0,ref_key:"yearRef",ref:i},null,8,["title","slug","isChecked"])]))),128))])]),_:1},8,["when"])]))}},Ne={key:0},qe={class:"flex flex-col space-y-3 pt-3"},Ge={__name:"category",emits:["emitCurrCategory"],setup(f,{expose:c,emit:o}){const d=j(),i=h(),s=h(!0),t=F(d.currCategoryLists),v=a=>t.findIndex(r=>r.id===a)>-1,x=a=>{if(a=="clear")t.length=0;else{const l=t.findIndex(r=>r.id==a.id);l!==-1?t.splice(l,1):t.push(a),d.setCurrCategoryLists(t)}};return c({handleALlExpanded:a=>s.value=a,clearAllCheckbox:()=>{i.value.forEach(a=>{a.clearCheckbox()})}}),(a,l)=>(u(),p("div",null,[e("div",{class:"flex cursor-pointer items-center justify-between",onClick:l[0]||(l[0]=r=>s.value=!s.value)},[e("p",null,[D(" 類別 "),t.length>0?(u(),p("span",Ne,"("+$(t.length)+")",1)):A("",!0)]),e("i",{class:L(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":s.value}])},null,2)]),k(S(T),{when:s.value},{default:R(()=>[e("div",qe,[(u(!0),p(C,null,w(S(d).categoryLists,(r,n)=>(u(),p("div",{key:n,class:""},[k(N,{title:r.label,slug:r.id,isChecked:v(r.id),onSelected:x,ref_for:!0,ref_key:"categoryRef",ref:i},null,8,["title","slug","isChecked"])]))),128))])]),_:1},8,["when"])]))}},Pe={key:0},Ke={class:"flex flex-col space-y-3 pt-3"},Je={__name:"country",setup(f,{expose:c}){const o=j(),d=z(()=>o.countryLists.map(a=>({title:a,slug:a}))),i=h(),s=h(!0),t=F(o.currCountyLists),v=a=>t.findIndex(r=>r===a)>-1,x=a=>{if(a=="clear")t.length=0;else{const l=t.findIndex(r=>r==a.id);l!==-1?t.splice(l,1):t.push(a.id),o.setCurrCountryLists(t)}};return c({handleALlExpanded:a=>s.value=a,clearAllCheckbox:()=>{i.value.forEach(a=>{a.clearCheckbox()})}}),(a,l)=>(u(),p("div",null,[e("div",{class:"flex cursor-pointer items-center justify-between",onClick:l[0]||(l[0]=r=>s.value=!s.value)},[e("p",null,[D(" 產地 "),t.length>0?(u(),p("span",Pe,"("+$(t.length)+")",1)):A("",!0)]),e("i",{class:L(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":s.value}])},null,2)]),k(S(T),{when:s.value},{default:R(()=>[e("div",Ke,[(u(!0),p(C,null,w(d.value,(r,n)=>(u(),p("div",{key:r.slug,class:""},[k(N,{title:r.title,slug:r.slug,isChecked:v(r.slug),onSelected:x,ref_for:!0,ref_key:"countryRef",ref:i},null,8,["title","slug","isChecked"])]))),128))])]),_:1},8,["when"])]))}},Qe={class:"rounded-[8px] bg-card"},Ue={class:"flex items-center justify-between px-6 py-2"},Xe={class:"flex space-x-2"},Ze=e("i",{class:"icon-filter text-[22px]"},null,-1),et={class:"flex flex-col space-y-6 px-6 pb-4 pt-6"},tt={__name:"index",setup(f){const c=j(),o=h(!0),d=h(),i=h(),s=h(),t=h(),v=()=>{d.value.clearAllCheckbox(),i.value.clearAllCheckbox(),s.value.clearAllCheckbox(),t.value.clearAllCheckbox()},x=()=>{o.value=!o.value,d.value.handleALlExpanded(o.value),i.value.handleALlExpanded(o.value),s.value.handleALlExpanded(o.value),t.value.handleALlExpanded(o.value)},b=z(()=>{const{selectedStatusLists:m,selectedYearLists:a,selectedCategoryLists:l,selectedCountryLists:r}=c.getFilterList;return m.length>0||a.length>0||l.length>0||r.length>0});return(m,a)=>(u(),p("div",Qe,[e("div",Ue,[e("div",Xe,[Ze,e("p",{class:"cursor-pointer",onClick:a[0]||(a[0]=l=>x())},"篩選")]),e("p",{class:L(["text-body-s",[b.value?"cursor-pointer text-primary hover:text-white":"text-disable"]]),onClick:a[1]||(a[1]=l=>v())}," 清除 ",2)]),e("div",et,[k(Ye,{ref_key:"statusRef",ref:d},null,512),k(De,{ref_key:"yearRef",ref:i},null,512),k(Ge,{ref_key:"categoryRef",ref:s},null,512),k(Je,{ref_key:"countryRef",ref:t},null,512)])]))}},st={class:"skeleton-card relative aspect-[3/4.3] overflow-hidden rounded-[8px]"},lt={alt:"",class:"absolute aspect-[3/4.3] size-full cursor-pointer object-cover"},nt={class:"absolute left-0 top-0",id:"card-watched-wrap"},ot={key:0,class:"text-body-s-medium rounded-[4px] bg-primary px-1 py-[2px] text-second"},at={class:"mt-2 flex justify-between"},rt={class:"text-body-m-medium"},it={key:0,class:"icon-heart-fill pt-1"},ct={key:1,class:"icon-heart pt-1"},ut={class:"text-body-s-medium mt-1 flex justify-between text-enable"},dt={class:"flex flex-wrap gap-x-2"},pt={key:0,class:"flex items-center"},ft={key:0},xt={__name:"card",props:{data:{type:Object}},setup(f){const c=f;ue(),h(!1);const o=V.timeline(),d=()=>{o.fromTo("#card-watched-wrap",{x:-200},{x:0,delay:.5})},i=z(()=>{var s,t;return(t=(s=c==null?void 0:c.data)==null?void 0:s.movie)==null?void 0:t.year.slice(0,4)});return H(async()=>{await d()}),(s,t)=>{const v=de("RouterLink"),x=pe("lazy");return u(),M(v,{to:`/list/${c.data.id}`,class:"relative cursor-pointer overflow-hidden"},{default:R(()=>{var b,m,a,l,r,n,y,_,E,O;return[e("div",st,[te(e("img",lt,null,512),[[x,(m=(b=f.data)==null?void 0:b.movie)==null?void 0:m.postImageUrl]])]),e("div",nt,[(l=(a=f.data)==null?void 0:a.movie)!=null&&l.watched?(u(),p("div",ot," 已觀看 ")):A("",!0)]),e("div",null,[e("div",at,[e("div",rt,$((n=(r=f.data)==null?void 0:r.movie)==null?void 0:n.name),1),(_=(y=f.data)==null?void 0:y.movie)!=null&&_.favorite?(u(),p("i",it)):(u(),p("i",ct))]),e("div",ut,[e("div",dt,[(u(!0),p(C,null,w((O=(E=f.data)==null?void 0:E.movie)==null?void 0:O.categoryList,(I,Y)=>{var g,q;return u(),p("div",{key:I.slug},[Y<3?(u(),p("div",pt,[D($(I.label)+" ",1),((q=(g=f.data)==null?void 0:g.movie)==null?void 0:q.categoryList.length)>3&&Y==2?(u(),p("span",ft,"...")):A("",!0)])):A("",!0)])}),128))]),e("div",null,$(i.value),1)])])]}),_:1},8,["to"])}}},vt={class:"container"},_t=e("div",{class:"text-heading-m flex items-center justify-center gap-x-2"},[e("i",{class:"icon-sort"}),e("p",{class:"text-heading-s"},"排序")],-1),ht=["onClick"],yt={key:0,class:"icon-check"},gt=G({__name:"sort-modal",props:{title:{}},setup(f){const c=j(),o=[{title:"最新加入",slug:"desc"},{title:"最舊加入",slug:"asc"}],d=i=>c.setOrder(i);return(i,s)=>(u(),M(S(se),{"content-class":"absolute bottom-0 w-full p-4 bg-card container rounded-t-[20px] pb-10","swipe-to-close":"down","content-transition":"vfm-slide-down","overlay-transition":"vfm-fade"},{default:R(()=>[e("div",vt,[_t,e("div",null,[(u(),p(C,null,w(o,t=>e("button",{type:"button",class:"text-body-xl-medium flex items-center justify-between py-2 w-full",key:t.slug,onClick:v=>d(t.slug)},[e("p",null,$(t.title),1),t.slug==S(c).currOrder?(u(),p("i",yt)):A("",!0)],8,ht)),64))])])]),_:1}))}}),bt={class:"container"},mt=e("div",{class:"text-heading-m flex items-center justify-center gap-x-2"},[e("i",{class:"icon-filter"}),e("p",{class:"text-heading-s"},"篩選")],-1),kt=e("div",{class:"text-body-xl-medium"},"狀態",-1),Ct={class:"mt-2 flex gap-3"},$t=["onClick"],wt={class:"mt-6"},Lt=e("div",{class:"text-body-xl-medium"},"年份",-1),St={class:"mt-2 flex flex-wrap gap-3"},At=["onClick"],Et={class:"mt-6"},Rt=e("div",{class:"text-body-xl-medium"},"類別",-1),jt={class:"mt-2 flex flex-wrap gap-3"},Ft=["onClick"],zt={class:"mt-6"},Ot=e("div",{class:"text-body-xl-medium"},"產地",-1),It={class:"mt-2 flex flex-wrap gap-3"},Vt=["onClick"],Wt=G({__name:"filter-modal",setup(f){const c=[{title:"最愛",slug:"favorite"},{title:"已觀看",slug:"watched"},{title:"待觀看",slug:"to_be_watching"}],o=j(),d=F(o.currStatusLists),i=F(o.currYearLists),s=F(o.currCategoryLists),t=F(o.currCountyLists),v=z(()=>o.countryLists.map(n=>({title:n,slug:n}))),x=n=>s.findIndex(_=>_.id===n)>-1,b=n=>!!(d.includes("watched")&&n=="to_be_watching"||d.includes("to_be_watching")&&n=="watched"),m=n=>{if(console.log(n),n=="clear")d.length=0;else{const y=d.indexOf(n.slug);y!==-1?d.splice(y,1):d.push(n.slug),o.setCurrStatusList(d)}},a=n=>{if(n=="clear")i.length=0;else{const y=i.indexOf(n);y!==-1?i.splice(y,1):i.push(n),o.setCurrYearLists(i)}},l=n=>{if(n=="clear")s.length=0;else{const y=s.findIndex(_=>_.id===n.id);y!==-1?s.splice(y,1):s.push(n)}},r=n=>{if(n=="clear")t.length=0;else{const y=t.indexOf(n.slug);y!==-1?t.splice(y,1):t.push(n.slug),o.setCurrCountryLists(t)}};return(n,y)=>(u(),M(S(se),{"content-class":"absolute bottom-0 w-full p-4 bg-card container rounded-t-[20px] pb-10","swipe-to-close":"down","content-transition":"vfm-slide-down","overlay-transition":"vfm-fade"},{default:R(()=>[e("div",bt,[mt,e("div",null,[kt,e("div",Ct,[(u(),p(C,null,w(c,_=>e("button",{type:"button",class:L(["rounded-[8px] border border-enable px-2 py-1",{"border-primary bg-primary":d.indexOf(_.slug)>=0,"cursor-default border-disable text-disable":b(_.slug)}]),key:_.slug,onClick:E=>m(_)},[e("p",null,$(_.title),1)],10,$t)),64))])]),e("div",wt,[Lt,e("div",St,[(u(!0),p(C,null,w(S(o).yearLists,_=>(u(),p("button",{type:"button",class:L(["rounded-[8px] border border-enable px-2 py-1",{"border-primary bg-primary":i.indexOf(_)>=0}]),key:_,onClick:E=>a(_)},[e("p",null,$(_),1)],10,At))),128))])]),e("div",Et,[Rt,e("div",jt,[(u(!0),p(C,null,w(S(o).categoryLists,_=>(u(),p("button",{type:"button",class:L(["rounded-[8px] border border-enable px-2 py-1",{"border-primary bg-primary":x(_.id)}]),key:_.id,onClick:E=>l(_)},[e("p",null,$(_.label),1)],10,Ft))),128))])]),e("div",zt,[Ot,e("div",It,[(u(!0),p(C,null,w(v.value,_=>(u(),p("button",{type:"button",class:L(["rounded-[8px] border border-enable px-2 py-1",{"border-primary bg-primary":t.indexOf(_.slug)>=0}]),key:_.slug,onClick:E=>r(_)},[e("p",null,$(_.title),1)],10,Vt))),128))])])])]),_:1}))}}),Mt={class:"mt-6 flex items-center gap-x-2"},Tt=e("i",{class:"icon-sort text-[24px]"},null,-1),Yt=e("p",{class:"text-body-xl-medium"},"排序",-1),Bt=[Tt,Yt],Ht=e("i",{class:"icon-filter text-[24px]"},null,-1),Dt=e("p",{class:"text-body-xl-medium"},"篩選",-1),Nt=[Ht,Dt],qt={__name:"filter-m",setup(f){const c=K({component:gt,attrs:{}}),o=K({component:Wt,attrs:{}}),d=()=>{c.open()},i=()=>{o.open()};return(s,t)=>(u(),p("section",Mt,[e("button",{type:"button",class:"flex flex-1 items-center justify-center gap-x-2 rounded-[8px] bg-card py-3",onClick:t[0]||(t[0]=v=>d())},Bt),e("button",{type:"button",class:"flex flex-1 items-center justify-center gap-x-2 rounded-[8px] bg-card py-3",onClick:t[1]||(t[1]=v=>i())},Nt)]))}},Gt={class:"container mb-20"},Pt={class:"mt-6 flex md:mt-14 md:space-x-5"},Kt={class:"hidden min-w-[197px] max-w-[197px] md:block"},Jt={class:"space-y-4"},Qt={class:"card-wrap grid grid-cols-4 gap-5 md:grid-cols-6 lg:grid-cols-6 xl:grid-cols-10",id:"card-wrap"},Ut={key:0,class:"text-heading-s flex size-full items-center justify-center"},Xt={key:0},ts={__name:"index",setup(f){const c=j(),o=h(!1),d=h(""),i=h([]),s=h(null),t=async(l,r)=>{o.value=!0;const{dataDoc:n,latestDoc:y}=await ve(l,r,s.value);s.value=y,n.forEach(_=>{i.value.push({id:_.id,movie:_.data()})}),o.value=!1};V.registerPlugin(J),t(d.value,c.getFilterList);const v=l=>{i.value=[],s.value=null,d.value=l,t(d.value,c.getFilterList)};W(()=>c.getFilterList,(l,r)=>{i.value=[],s.value=null,t(d.value,c.getFilterList)},{deep:!0});const x=h(null),b=h(null);fe(b,([{isIntersecting:l}])=>{l&&s.value&&t(d.value,c.getFilterList)},{pageViewRef:x});const m=V.timeline(),a=()=>{m.fromTo(".an-sidebar",{display:"hidden",x:-100,opacity:0},{duration:.5,opacity:1,stagger:.2,delay:.5,x:0,display:"block"})};return V.registerPlugin(J),H(async()=>{await a()}),(l,r)=>(u(),p(C,null,[k(Ce,{onSelected:v}),e("div",Gt,[k(qt,{class:"block md:hidden"}),e("main",Pt,[e("div",Kt,[e("div",Jt,[k(Oe,{class:"an-sidebar"}),k(tt,{class:"an-sidebar"})])]),e("div",{class:"w-full",ref_key:"pageViewRef",ref:x},[e("div",Qt,[(u(!0),p(C,null,w(i.value,(n,y)=>(u(),M(xt,{data:n,class:"card col-span-2",key:y},null,8,["data"]))),128))]),i.value.length==0||o.value?(u(),p("div",Ut,[te(k(_e,null,null,512),[[xe,o.value]]),i.value.length==0&&!o.value?(u(),p("div",Xt,"尚無資料")):A("",!0)])):A("",!0),e("div",{ref_key:"infiniteRef",ref:b},null,512)],512)])])],64))}};export{ts as default};
