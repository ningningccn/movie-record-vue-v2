import{u as le,r as y,w as V,g as B,o as H,a as u,c as p,b as e,F as C,d as w,n as L,t as $,e as Z,f as G,h as P,i as z,s as ne,j as W,k as R,l as oe,m as ae,p as re,q as ie,v as j,x as k,y as S,z as A,A as F,B as D,C as ce,D as ue,E as ee,R as te,G as K,H as de,S as pe,I as fe,J as xe}from"./index-CBpqAlFv.js";import{L as ve}from"./loading-BwTr1VP7.js";const he={class:"sticky top-0 z-10 bg-second",id:"category-section"},_e={class:"container relative z-10"},ye={class:"z-10 flex items-center justify-center pt-6"},ge={class:"relative"},be=["onClick"],me=e("div",{class:"-translate-y-[1px] border-b border-enable",id:"category-bar"},null,-1),ke={__name:"type-tab",emits:["selected"],setup(f,{emit:c}){const o=c,{width:d,height:i}=le(),s=y(0),t=y(0),v=y(""),x=(l,r)=>{v.value=l;const n=document.querySelector(`.btn-${r}`);s.value=n.clientWidth,t.value=n.offsetLeft,o("selected",l)},b=y([{title:"全部",slug:""},{title:"電影",slug:"movie"},{title:"電視劇",slug:"tv"},{title:"動漫",slug:"cartoon"}]);V(()=>d.value,(l,r)=>{const n=document.querySelector(".btn-0");s.value=n.clientWidth});let m=B.timeline();const a=()=>{m.fromTo("#category-bar",{width:0,opacity:0},{duration:.5,opacity:1,width:"100%",onComplete:()=>{const l=document.querySelector(".btn-0");s.value=l.clientWidth}}),m.fromTo(".category-text",{opacity:0,y:10},{duration:.5,opacity:1,stagger:.1,y:0})};return H(()=>{a()}),(l,r)=>(u(),p("div",he,[e("div",_e,[e("div",ye,[e("div",ge,[(u(!0),p(C,null,w(b.value,(n,_)=>(u(),p("button",{key:n.slug,class:L(["text-body-xl-medium category-text relative px-6 py-4 text-enable hover:text-white md:px-[60px]",[{"text-white":v.value==n.slug},`btn-${_}`]]),onClick:h=>x(n.slug,_)},$(n.title),11,be))),128)),e("div",{class:"absolute bottom-0 h-[3px] bg-primary transition-all duration-300",style:Z({width:`${s.value}px`,left:`${t.value}px`})},null,4)])])]),me]))}},se="--vc-auto-duration",Ce=`height var(${se}) cubic-bezier(0.33, 1, 0.68, 1)`,Y={padding:0},$e=300,we={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"},Le=()=>typeof navigator<"u"&&navigator.userAgent.includes("Firefox");function J(f){return f.value?parseFloat(getComputedStyle(f.value).height):0}function Q(f){var c;return{height:`${((c=f.value)==null?void 0:c.scrollHeight)||0}px`}}function U(f){if(!f.value)return{};const{transition:c}=getComputedStyle(f.value);return c==="all 0s ease 0s"||Le()&&c==="all"?{transition:Ce}:{transition:c}}function X(f){if(!f.value)return!0;const{transition:c}=getComputedStyle(f.value);return typeof window.requestAnimationFrame>"u"||window.matchMedia("(prefers-reduced-motion: reduce)").matches||c.includes("none")||c.includes("height 0s")}function Se(f=0){if(f===0)return 0;const c=f/36,o=Math.round((4+15*c**.25+c/5)*10);return Number.isFinite(o)?o:0}const M=G({inheritAttrs:!0,__name:"Collapse",props:{when:{type:Boolean},baseHeight:{default:0},as:{default:"div"}},emits:["collapse","expand","collapsed","expanded"],setup(f,{emit:c}){const o=f,d=c,i=P(o,"when"),s=P(o,"baseHeight"),t=z(()=>({overflow:"hidden",height:`${s.value}px`})),v=z(()=>({...Y,...s.value===0?{display:"none"}:t.value})),x=y(null),b=y(i.value?"expanded":"collapsed"),m=g=>b.value=g;function a(){return i.value?Y:s.value===0?we:v.value}const l=ne(a()),r=g=>l.value=g,n=g=>r({...l.value,...g}),_=y($e),h=g=>_.value=g,E=z(()=>({[se]:`${_.value}ms`}));function O(){r(Y),m("expanded"),d("expanded")}function I(){r(v.value),m("collapsed"),d("collapsed")}H(()=>{if(!x.value)return;const g=Se(x.value.scrollHeight-s.value);g>0&&h(g),!i.value&&s.value===0&&r(v.value)}),V(i,g=>{if(x.value)if(g){if(X(x))return O();m("expanding"),d("expand"),r({...Y,...t.value,...E.value}),requestAnimationFrame(()=>{if(x.value.scrollHeight===0)return O();n({...Q(x),...U(x),willChange:"height"})})}else{if(X(x)||(m("collapsing"),d("collapse"),n({...E.value,...Q(x)}),x.value.scrollHeight===0))return I();requestAnimationFrame(()=>{n({...t.value,...U(x),willChange:"height"})})}}),V(s,g=>{i.value||(g>0?n({display:void 0,height:`${g}px`}):n({display:"none"}))});function T(g){g.target&&g.target===x.value&&g.propertyName==="height"&&(i.value?Math.abs(x.value.scrollHeight-J(x))<1&&O():Math.abs(s.value-J(x))<1&&I())}return(g,q)=>(u(),W(ie(o.as),{ref_key:"collapseRef",ref:x,style:Z(l.value),onTransitionend:T,"data-collapse":b.value},{default:R(()=>[oe(g.$slots,"default",ae(re({state:b.value})))]),_:3},40,["style","data-collapse"]))}}),Ae={class:"cursor-pointer rounded-[8px] bg-card"},Ee=e("div",{class:"flex space-x-2"},[e("i",{class:"icon-sort text-[22px]"}),e("p",null,"排序")],-1),Re={class:"flex flex-col space-y-6 p-6 pb-4"},je=["onClick"],Fe={key:0,class:"icon-check text-[20px]"},ze={__name:"sort",setup(f){const c=j(),o=y(!1),d=[{title:"最新加入",key:"latest_addition",slug:"desc",filterWord:"createAt"},{title:"最舊加入",key:"oldest_addition",slug:"asc",filterWord:"createAt"},{title:"最新年份",key:"latest_year",slug:"desc",filterWord:"year"},{title:"最舊年份",key:"oldest_year",slug:"asc",filterWord:"year"}],i=(s,t,v)=>{c.setOrder({key:s,slug:t,filterWord:v})};return(s,t)=>(u(),p("div",Ae,[e("div",{class:"flex items-center justify-between px-6 py-2",onClick:t[0]||(t[0]=v=>o.value=!o.value)},[Ee,e("i",{class:L(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":o.value}])},null,2)]),k(S(M),{when:o.value},{default:R(()=>[e("div",Re,[(u(),p(C,null,w(d,v=>e("button",{type:"button",class:"text-body-m-medium flex items-center justify-between text-left",key:v.key,onClick:x=>i(v.key,v.slug,v.filterWord)},[e("p",null,$(v.title),1),v.key==S(c).currKey?(u(),p("i",Fe)):A("",!0)],8,je)),64))])]),_:1},8,["when"])]))}},Oe={key:0,class:"absolute size-full rounded-[4px] bg-primary"},Ie=e("i",{class:"icon-check text-[20px] text-second"},null,-1),Ve=[Ie],N={__name:"checkbox",props:{title:String,slug:String|Number,disabled:{type:Boolean,default:!1},isChecked:Boolean},emits:["selected"],setup(f,{expose:c,emit:o}){const d=o,i=f,s=y(i.isChecked),t=()=>{i.disabled||(s.value=!s.value,d("selected",{label:i.title,id:i.slug}))},v=()=>{s.value=!1,d("selected","clear")};return V(()=>i.isChecked,x=>{s.value=x}),c({clearCheckbox:v}),(x,b)=>(u(),p("div",{onClick:b[0]||(b[0]=m=>t()),class:L(["flex items-center space-x-2",[{"text-disable":f.disabled},{"cursor-pointer":!f.disabled}]])},[e("div",{class:L(["relative size-[20px] rounded-[4px]",[{border:!s.value},{"border-disable":f.disabled}]])},[s.value?(u(),p("div",Oe,Ve)):A("",!0)],2),e("p",null,$(f.title),1)],2))}},We=e("p",null,"狀態",-1),Me={class:"flex flex-col space-y-3 pt-3"},Te={__name:"status",setup(f,{expose:c}){const o=j(),d=[{title:"最愛",slug:"favorite"},{title:"已觀看",slug:"watched"},{title:"待觀看",slug:"to_be_watching"}],i=y(),s=y(!0),t=F(o.currStatusLists),v=l=>!!(t.includes("watched")&&l=="to_be_watching"||t.includes("to_be_watching")&&l=="watched"),x=l=>t.findIndex(n=>n===l)>-1,b=l=>{if(l==="clear")t.length=0;else{const r=t.indexOf(l.id);r!==-1?t.splice(r,1):t.push(l.id),o.setCurrStatusList(t)}};return c({handleALlExpanded:l=>{s.value=l},clearAllCheckbox:()=>{i.value.forEach(l=>{l.clearCheckbox()})}}),(l,r)=>(u(),p("div",null,[e("div",{class:"flex cursor-pointer items-center justify-between",onClick:r[0]||(r[0]=n=>s.value=!s.value)},[We,e("i",{class:L(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":s.value}])},null,2)]),k(S(M),{when:s.value},{default:R(()=>[e("div",Me,[(u(),p(C,null,w(d,(n,_)=>e("div",{key:_,class:""},[k(N,{title:n.title,slug:n.slug,disabled:v(n.slug),isChecked:x(n.slug),onSelected:b,ref_for:!0,ref_key:"statusRef",ref:i},null,8,["title","slug","disabled","isChecked"])])),64))])]),_:1},8,["when"])]))}},Ye={key:0},Be={class:"flex flex-col space-y-3 pt-3"},He={__name:"year",setup(f,{expose:c}){const o=j(),d=z(()=>o.yearLists.map(a=>({title:a,slug:a}))),i=y(),s=y(!0),t=F(o.currYearLists),v=a=>{if(a==="clear")t.length=0;else{const l=t.findIndex(r=>r===a.id);l!==-1?t.splice(l,1):t.push(a.id),o.setCurrYearLists(t)}},x=a=>t.findIndex(r=>r===a)>-1;return c({handleALlExpanded:a=>{s.value=a},clearAllCheckbox:()=>{i.value.forEach(a=>{a.clearCheckbox()})}}),(a,l)=>(u(),p("div",null,[e("div",{class:"flex cursor-pointer items-center justify-between",onClick:l[0]||(l[0]=r=>s.value=!s.value)},[e("p",null,[D(" 年份 "),t.length>0?(u(),p("span",Ye,"("+$(t.length)+")",1)):A("",!0)]),e("i",{class:L(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":s.value}])},null,2)]),k(S(M),{when:s.value},{default:R(()=>[e("div",Be,[(u(!0),p(C,null,w(d.value,(r,n)=>(u(),p("div",{key:n,class:""},[k(N,{title:r.title,slug:r.slug,isChecked:x(r.slug),onSelected:v,ref_for:!0,ref_key:"yearRef",ref:i},null,8,["title","slug","isChecked"])]))),128))])]),_:1},8,["when"])]))}},De={key:0},Ne={class:"flex flex-col space-y-3 pt-3"},qe={__name:"category",emits:["emitCurrCategory"],setup(f,{expose:c,emit:o}){const d=j(),i=y(),s=y(!0),t=F(d.currCategoryLists),v=a=>t.findIndex(r=>r.id===a)>-1,x=a=>{if(a==="clear")t.length=0;else{const l=t.findIndex(r=>r.id===a.id);l!==-1?t.splice(l,1):t.push(a),d.setCurrCategoryLists(t)}};return c({handleALlExpanded:a=>s.value=a,clearAllCheckbox:()=>{i.value.forEach(a=>{a.clearCheckbox()})}}),(a,l)=>(u(),p("div",null,[e("div",{class:"flex cursor-pointer items-center justify-between",onClick:l[0]||(l[0]=r=>s.value=!s.value)},[e("p",null,[D(" 類別 "),t.length>0?(u(),p("span",De,"("+$(t.length)+")",1)):A("",!0)]),e("i",{class:L(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":s.value}])},null,2)]),k(S(M),{when:s.value},{default:R(()=>[e("div",Ne,[(u(!0),p(C,null,w(S(d).categoryLists,(r,n)=>(u(),p("div",{key:n,class:""},[k(N,{title:r.label,slug:r.id,isChecked:v(r.id),onSelected:x,ref_for:!0,ref_key:"categoryRef",ref:i},null,8,["title","slug","isChecked"])]))),128))])]),_:1},8,["when"])]))}},Ge={key:0},Pe={class:"flex flex-col space-y-3 pt-3"},Ke={__name:"country",setup(f,{expose:c}){const o=j(),d=z(()=>o.countryLists.map(a=>({title:a,slug:a}))),i=y(),s=y(!0),t=F(o.currCountryLists),v=a=>t.findIndex(r=>r===a)>-1,x=a=>{if(a==="clear")t.length=0;else{const l=t.findIndex(r=>r===a.id);l!==-1?t.splice(l,1):t.push(a.id),o.setCurrCountryLists(t)}};return c({handleALlExpanded:a=>s.value=a,clearAllCheckbox:()=>{i.value.forEach(a=>{a.clearCheckbox()})}}),(a,l)=>(u(),p("div",null,[e("div",{class:"flex cursor-pointer items-center justify-between",onClick:l[0]||(l[0]=r=>s.value=!s.value)},[e("p",null,[D(" 產地 "),t.length>0?(u(),p("span",Ge,"("+$(t.length)+")",1)):A("",!0)]),e("i",{class:L(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":s.value}])},null,2)]),k(S(M),{when:s.value},{default:R(()=>[e("div",Pe,[(u(!0),p(C,null,w(d.value,(r,n)=>(u(),p("div",{key:r.slug,class:""},[k(N,{title:r.title,slug:r.slug,isChecked:v(r.slug),onSelected:x,ref_for:!0,ref_key:"countryRef",ref:i},null,8,["title","slug","isChecked"])]))),128))])]),_:1},8,["when"])]))}},Je={class:"rounded-[8px] bg-card"},Qe={class:"flex items-center justify-between px-6 py-2"},Ue={class:"flex space-x-2"},Xe=e("i",{class:"icon-filter text-[22px]"},null,-1),Ze={class:"flex flex-col space-y-6 px-6 pb-4 pt-6"},et={__name:"index",setup(f){const c=j(),o=y(!0),d=y(),i=y(),s=y(),t=y(),v=()=>{d.value.clearAllCheckbox(),i.value.clearAllCheckbox(),s.value.clearAllCheckbox(),t.value.clearAllCheckbox()},x=()=>{o.value=!o.value,d.value.handleALlExpanded(o.value),i.value.handleALlExpanded(o.value),s.value.handleALlExpanded(o.value),t.value.handleALlExpanded(o.value)},b=z(()=>{const{selectedStatusLists:m,selectedYearLists:a,selectedCategoryLists:l,selectedCountryLists:r}=c.getFilterList;return m.length>0||a.length>0||l.length>0||r.length>0});return(m,a)=>(u(),p("div",Je,[e("div",Qe,[e("div",Ue,[Xe,e("p",{class:"cursor-pointer",onClick:a[0]||(a[0]=l=>x())},"篩選")]),e("p",{class:L(["text-body-s",[b.value?"cursor-pointer text-primary hover:text-white":"text-disable"]]),onClick:a[1]||(a[1]=l=>v())}," 清除 ",2)]),e("div",Ze,[k(Te,{ref_key:"statusRef",ref:d},null,512),k(He,{ref_key:"yearRef",ref:i},null,512),k(qe,{ref_key:"categoryRef",ref:s},null,512),k(Ke,{ref_key:"countryRef",ref:t},null,512)])]))}},tt={class:"skeleton-card relative aspect-[3/4.3] overflow-hidden rounded-[8px]"},st={alt:"",class:"absolute aspect-[3/4.3] size-full cursor-pointer object-cover"},lt={class:"absolute left-0 top-0",id:"card-watched-wrap"},nt={key:0,class:"text-body-s-medium rounded-[4px] bg-primary px-1 py-[2px] text-second"},ot={class:"mt-2 flex justify-between"},at={class:"text-body-m-medium"},rt={key:0,class:"icon-heart-fill pt-1"},it={key:1,class:"icon-heart pt-1"},ct={class:"text-body-s-medium mt-1 flex justify-between text-enable"},ut={class:"flex flex-wrap gap-x-2"},dt={key:0,class:"flex items-center"},pt={key:0},ft={__name:"card",props:{data:{type:Object}},setup(f){const c=f,o=B.timeline(),d=()=>{o.fromTo("#card-watched-wrap",{x:-200},{x:0,delay:.5})},i=z(()=>{var s,t;return(t=(s=c==null?void 0:c.data)==null?void 0:s.movie)==null?void 0:t.year.slice(0,4)});return H(async()=>{await d()}),(s,t)=>{const v=ce("RouterLink"),x=ue("lazy");return u(),W(v,{to:`/list/${c.data.id}`,class:"relative cursor-pointer overflow-hidden"},{default:R(()=>{var b,m,a,l,r,n,_,h,E,O;return[e("div",tt,[ee(e("img",st,null,512),[[x,(m=(b=f.data)==null?void 0:b.movie)==null?void 0:m.postImageUrl]])]),e("div",lt,[(l=(a=f.data)==null?void 0:a.movie)!=null&&l.watched?(u(),p("div",nt," 已觀看 ")):A("",!0)]),e("div",null,[e("div",ot,[e("div",at,$((n=(r=f.data)==null?void 0:r.movie)==null?void 0:n.name),1),(h=(_=f.data)==null?void 0:_.movie)!=null&&h.favorite?(u(),p("i",rt)):(u(),p("i",it))]),e("div",ct,[e("div",ut,[(u(!0),p(C,null,w((O=(E=f.data)==null?void 0:E.movie)==null?void 0:O.categoryList,(I,T)=>{var g,q;return u(),p("div",{key:I.slug},[T<3?(u(),p("div",dt,[D($(I.label)+" ",1),((q=(g=f.data)==null?void 0:g.movie)==null?void 0:q.categoryList.length)>3&&T==2?(u(),p("span",pt,"...")):A("",!0)])):A("",!0)])}),128))]),e("div",null,$(i.value),1)])])]}),_:1},8,["to"])}}},xt={class:"container"},vt=e("div",{class:"text-heading-m flex items-center justify-center gap-x-2"},[e("i",{class:"icon-sort"}),e("p",{class:"text-heading-s"},"排序")],-1),ht=["onClick"],_t={key:0,class:"icon-check"},yt=G({__name:"sort-modal",props:{title:{}},setup(f){const c=j(),o=[{title:"最新加入",slug:"desc"},{title:"最舊加入",slug:"asc"}],d=i=>c.setOrder(i);return(i,s)=>(u(),W(S(te),{"content-class":"absolute bottom-0 w-full p-4 bg-card container rounded-t-[20px] pb-10","swipe-to-close":"down","content-transition":"vfm-slide-down","overlay-transition":"vfm-fade"},{default:R(()=>[e("div",xt,[vt,e("div",null,[(u(),p(C,null,w(o,t=>e("button",{type:"button",class:"text-body-xl-medium flex items-center justify-between py-2 w-full",key:t.slug,onClick:v=>d(t.slug)},[e("p",null,$(t.title),1),t.slug==S(c).currOrder?(u(),p("i",_t)):A("",!0)],8,ht)),64))])])]),_:1}))}}),gt={class:"container"},bt=e("div",{class:"text-heading-m flex items-center justify-center gap-x-2"},[e("i",{class:"icon-filter"}),e("p",{class:"text-heading-s"},"篩選")],-1),mt=e("div",{class:"text-body-xl-medium"},"狀態",-1),kt={class:"mt-2 flex gap-3"},Ct=["onClick"],$t={class:"mt-6"},wt=e("div",{class:"text-body-xl-medium"},"年份",-1),Lt={class:"mt-2 flex flex-wrap gap-3"},St=["onClick"],At={class:"mt-6"},Et=e("div",{class:"text-body-xl-medium"},"類別",-1),Rt={class:"mt-2 flex flex-wrap gap-3"},jt=["onClick"],Ft={class:"mt-6"},zt=e("div",{class:"text-body-xl-medium"},"產地",-1),Ot={class:"mt-2 flex flex-wrap gap-3"},It=["onClick"],Vt=G({__name:"filter-modal",setup(f){const c=[{title:"最愛",slug:"favorite"},{title:"已觀看",slug:"watched"},{title:"待觀看",slug:"to_be_watching"}],o=j(),d=F(o.currStatusLists),i=F(o.currYearLists),s=F(o.currCategoryLists),t=F(o.currCountryLists),v=z(()=>o.countryLists.map(n=>({title:n,slug:n}))),x=n=>s.findIndex(h=>h.id===n)>-1,b=n=>!!(d.includes("watched")&&n=="to_be_watching"||d.includes("to_be_watching")&&n=="watched"),m=n=>{if(n==="clear")d.length=0;else{const _=d.indexOf(n.slug);_!==-1?d.splice(_,1):d.push(n.slug),o.setCurrStatusList(d)}},a=n=>{if(n==="clear")i.length=0;else{const _=i.indexOf(n);_!==-1?i.splice(_,1):i.push(n),o.setCurrYearLists(i)}},l=n=>{if(n==="clear")s.length=0;else{const _=s.findIndex(h=>h.id===n.id);_!==-1?s.splice(_,1):s.push(n)}},r=n=>{if(n==="clear")t.length=0;else{const _=t.indexOf(n.slug);_!==-1?t.splice(_,1):t.push(n.slug),o.setCurrCountryLists(t)}};return(n,_)=>(u(),W(S(te),{"content-class":"absolute bottom-0 w-full p-4 bg-card container rounded-t-[20px] pb-10","swipe-to-close":"down","content-transition":"vfm-slide-down","overlay-transition":"vfm-fade"},{default:R(()=>[e("div",gt,[bt,e("div",null,[mt,e("div",kt,[(u(),p(C,null,w(c,h=>e("button",{type:"button",class:L(["rounded-[8px] border border-enable px-2 py-1",{"border-primary bg-primary":d.indexOf(h.slug)>=0,"cursor-default border-disable text-disable":b(h.slug)}]),key:h.slug,onClick:E=>m(h)},[e("p",null,$(h.title),1)],10,Ct)),64))])]),e("div",$t,[wt,e("div",Lt,[(u(!0),p(C,null,w(S(o).yearLists,h=>(u(),p("button",{type:"button",class:L(["rounded-[8px] border border-enable px-2 py-1",{"border-primary bg-primary":i.indexOf(h)>=0}]),key:h,onClick:E=>a(h)},[e("p",null,$(h),1)],10,St))),128))])]),e("div",At,[Et,e("div",Rt,[(u(!0),p(C,null,w(S(o).categoryLists,h=>(u(),p("button",{type:"button",class:L(["rounded-[8px] border border-enable px-2 py-1",{"border-primary bg-primary":x(h.id)}]),key:h.id,onClick:E=>l(h)},[e("p",null,$(h.label),1)],10,jt))),128))])]),e("div",Ft,[zt,e("div",Ot,[(u(!0),p(C,null,w(v.value,h=>(u(),p("button",{type:"button",class:L(["rounded-[8px] border border-enable px-2 py-1",{"border-primary bg-primary":t.indexOf(h.slug)>=0}]),key:h.slug,onClick:E=>r(h)},[e("p",null,$(h.title),1)],10,It))),128))])])])]),_:1}))}}),Wt={class:"mt-6 flex items-center gap-x-2"},Mt=e("i",{class:"icon-sort text-[24px]"},null,-1),Tt=e("p",{class:"text-body-xl-medium"},"排序",-1),Yt=[Mt,Tt],Bt=e("i",{class:"icon-filter text-[24px]"},null,-1),Ht=e("p",{class:"text-body-xl-medium"},"篩選",-1),Dt=[Bt,Ht],Nt={__name:"filter-m",setup(f){const c=K({component:yt,attrs:{}}),o=K({component:Vt,attrs:{}}),d=()=>{c.open()},i=()=>{o.open()};return(s,t)=>(u(),p("section",Wt,[e("button",{type:"button",class:"flex flex-1 items-center justify-center gap-x-2 rounded-[8px] bg-card py-3",onClick:t[0]||(t[0]=v=>d())},Yt),e("button",{type:"button",class:"flex flex-1 items-center justify-center gap-x-2 rounded-[8px] bg-card py-3",onClick:t[1]||(t[1]=v=>i())},Dt)]))}},qt={class:"container mb-20"},Gt={class:"mt-6 flex md:mt-14 md:space-x-5"},Pt={class:"hidden min-w-[197px] max-w-[197px] md:block"},Kt={class:"space-y-4"},Jt={class:"card-wrap grid grid-cols-4 gap-5 md:grid-cols-6 lg:grid-cols-6 xl:grid-cols-10",id:"card-wrap"},Qt={key:0,class:"text-heading-s flex size-full items-center justify-center"},Ut={key:0},es={__name:"home",setup(f){const c=j(),o=y(!1),d=y(""),i=y([]),s=y(null),t=async(l,r)=>{o.value=!0;const{dataDoc:n,latestDoc:_}=await xe(l,r,s.value);s.value=_,n.forEach(h=>{i.value.push({id:h.id,movie:h.data()})}),o.value=!1};t(d.value,c.getFilterList);const v=l=>{i.value=[],s.value=null,d.value=l,t(d.value,c.getFilterList)};V(()=>c.getFilterList,(l,r)=>{i.value=[],s.value=null,t(d.value,c.getFilterList)},{deep:!0});const x=y(null),b=y(null);de(b,([{isIntersecting:l}])=>{l&&s.value&&t(d.value,c.getFilterList)},{pageViewRef:x});const m=B.timeline(),a=()=>{m.fromTo(".an-sidebar",{display:"hidden",x:-100,opacity:0},{duration:.5,opacity:1,stagger:.2,delay:.5,x:0,display:"block"})};return H(()=>{B.registerPlugin(pe),a()}),(l,r)=>(u(),p(C,null,[k(ke,{onSelected:v}),e("div",qt,[k(Nt,{class:"block md:hidden"}),e("main",Gt,[e("div",Pt,[e("div",Kt,[k(ze,{class:"an-sidebar"}),k(et,{class:"an-sidebar"})])]),e("div",{class:"w-full",ref_key:"pageViewRef",ref:x},[e("div",Jt,[(u(!0),p(C,null,w(i.value,(n,_)=>(u(),W(ft,{data:n,class:"card col-span-2",key:_},null,8,["data"]))),128))]),i.value.length==0||o.value?(u(),p("div",Qt,[ee(k(ve,null,null,512),[[fe,o.value]]),i.value.length==0&&!o.value?(u(),p("div",Ut,"尚無資料")):A("",!0)])):A("",!0),e("div",{ref_key:"infiniteRef",ref:b},null,512)],512)])])],64))}};export{es as default};
