import{_ as R,Y as L,r as S,Z as I,i as M,a as v,j as Z,k as q,b as a,u as r,$ as H,a0 as Q,J as k,a1 as X,a2 as ee,a3 as W,a4 as te,K as ae,v as G,a5 as se,a6 as oe,a7 as le,M as J,N as P,A as ne,V as ie,a8 as de,g as re,o as ce,I as ue,c as f,t as u,z as K,F as me,d as ve,a9 as pe,G as _e,aa as ge}from"./index-oBVCegeF.js";const O={JP:"日本",TW:"台灣",US:"美國",KR:"韓國"},E=n=>(J("data-v-79fa976e"),n=n(),P(),n),ye={class:"absolute inset-0 h-full overflow-auto"},he={class:"main-gradient relative mx-auto my-[128px] w-[489px] rounded-[50px] border border-[#FFFFFF33] bg-black p-20"},fe=E(()=>a("p",{class:"text-heading-s"},"添加記錄",-1)),be={class:"mt-8 space-y-6"},xe={class:"space-y-3"},we=E(()=>a("i",{class:"icon-close text-[32px]"},null,-1)),ke=[we],Se={__name:"add-movie-modal",props:{name:{type:String},original_name:{type:String},year:{type:String},country:{type:String},poster_img:{type:String},background_image:{type:String},type:{type:String},genres:{type:Object}},setup(n){const s=n;console.log(s);const t=L(),b=S(null),e=S({record_date:I(new Date).format("DD-MM-YYYY"),type:"",name:"",original_name:"",year:"",country:"",mark:0,favorite:!1,categoryList:[],watched:!1,postImageUrl:"",background_image:null});e.value.type=(s==null?void 0:s.type)??"",e.value.name=(s==null?void 0:s.name)??"",e.value.original_name=(s==null?void 0:s.original_name)??"",e.value.year=I(s==null?void 0:s.year).format("YYYY")??"",e.value.country=(s==null?void 0:s.country)??"",e.value.background_image=(s==null?void 0:s.background_image)??null;const x=i=>e.value.record_date=i,$=i=>e.value.type=i,p=i=>e.value.favorite=i,w=i=>e.value.watched=i,m=i=>e.value.mark=i,D=async i=>b.value=i,d=async()=>{e.value={...e.value,watched_date:e.value.watched?I(new Date).format("DD-MM-YYYY"):""},s.poster_img?e.value.postImageUrl=`https://image.tmdb.org/t/p/w780${s.poster_img}`:e.value.postImageUrl=await oe(b.value),await le(e.value),console.log("added movie"),t.close("add-movie-id")},c=M(()=>!!(e.value.country&&e.value.type&&e.value.name&&e.value.year));return(i,o)=>(v(),Z(G(se),{"modal-id":"add-movie-id","content-class":"absolute inset-0  bg-[#30313299]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:q(()=>[a("div",ye,[a("div",he,[a("div",null,[fe,a("div",be,[r(H,{onSelected:x,date:e.value.record_date,"onUpdate:date":o[0]||(o[0]=l=>e.value.record_date=l)},null,8,["date"]),r(Q,{attrSelected:n.type,onSelected:$},null,8,["attrSelected"]),r(k,{placeholder:"名稱",text:e.value.name,"onUpdate:text":o[1]||(o[1]=l=>e.value.name=l)},null,8,["text"]),r(k,{placeholder:"原始名稱(選項)",text:e.value.original_name,"onUpdate:text":o[2]||(o[2]=l=>e.value.original_name=l)},null,8,["text"]),r(k,{placeholder:"年份",text:e.value.year,"onUpdate:text":o[3]||(o[3]=l=>e.value.year=l)},null,8,["text"]),r(k,{placeholder:"產地",text:e.value.country,"onUpdate:text":o[4]||(o[4]=l=>e.value.country=l)},null,8,["text"]),r(X,{data:n.genres,category:e.value.categoryList,"onUpdate:category":o[5]||(o[5]=l=>e.value.categoryList=l)},null,8,["data","category"])]),r(ee,{class:"my-8",imgUrl:`https://image.tmdb.org/t/p/w780${n.poster_img}`,movieName:n.name,onImageData:D},null,8,["imgUrl","movieName"]),a("div",xe,[r(W,{title:"最愛",onSelected:p}),r(W,{title:"已觀看",onSelected:w}),r(te,{onSelected:m})]),r(ae,{text:"添加",class:"mt-8",disable:c.value,onClick:o[6]||(o[6]=l=>d())},null,8,["disable"])]),a("button",{type:"button",class:"absolute right-10 top-10",onClick:o[7]||(o[7]=l=>G(t).close("add-movie-id"))},ke)])])]),_:1}))}},$e=R(Se,[["__scopeId","data-v-79fa976e"]]),De=n=>n==null?void 0:n.map(s=>({label:ne[s.id]??s.id,slug:s.id})),Ie=n=>(J("data-v-ed16c310"),n=n(),P(),n),Me={class:"relative mb-[60px]"},Te={class:"z-5 relative flex h-[375px] items-end md:flex md:h-full md:min-h-[500px] md:items-center",id:"backdrop-wrap"},Ye=["src"],Ue=["src"],Fe=Ie(()=>a("div",{class:"bg-overlay absolute bottom-0 left-0 h-full w-[100%]"},null,-1)),Ce={class:"container relative hidden md:block md:py-10"},je={class:"w-[100%] md:w-[45%]"},ze={class:"text-heading-m"},Ne={class:"text-heading-s mt-1"},Ae={class:"container relative z-20 mt-[-40px] block md:hidden md:translate-y-0"},Be={class:"w-[100%] md:w-[45%]"},Ve={class:"text-heading-m"},We={class:"text-heading-s mt-1"},Ge={class:"container mt-10 md:mt-20"},Ke={class:"items-center md:flex md:justify-between"},Oe={class:"mx-auto w-full md:ml-0 md:w-[35%] lg:w-[30%]",id:"poster"},Re=["src"],Je={class:"mx-auto mt-10 w-full md:ml-auto md:mt-0 md:w-[55%]"},Pe={class:"info-anim mt-6"},Ee={class:"mt-10 flex items-center justify-between"},Le={class:"text-body-l mt-3 grid gap-y-2"},Ze={class:"info-anim"},qe={class:"info-anim"},He={class:"info-anim"},Qe={class:"info-anim"},Xe={class:"info-anim"},et={__name:"search-detail",setup(n){const s=ie(),t=S(),b=S({language:"zh-TW"}),e=async()=>{const d=await pe(s.path,{params:b.value});t.value=d.data,console.log(t.value)},x=de({component:$e,attrs:{}}),$=async()=>{var d,c,i,o,l,_,g,y,h;x.open(),x.patchOptions({attrs:{name:((d=t.value)==null?void 0:d.title)??((c=t.value)==null?void 0:c.name),original_name:((i=t.value)==null?void 0:i.original_title)??((o=t.value)==null?void 0:o.original_name),year:((l=t.value)==null?void 0:l.release_date)??((_=t.value)==null?void 0:_.first_air_date),country:w.value,poster_img:(g=t.value)==null?void 0:g.poster_path,background_image:(y=t.value)!=null&&y.backdrop_path?`https://image.tmdb.org/t/p/w1280${t.value.backdrop_path}`:null,genres:(h=t.value)==null?void 0:h.genres,type:s.params.mediaType}})};e();const p=M(()=>{var d;return De((d=t.value)==null?void 0:d.genres)});console.log(p.value);const w=M(()=>{var c;const d=(c=t.value)==null?void 0:c.origin_country[0];return O.hasOwnProperty(d)?O[d]:d});let m=re.timeline();const D=async()=>{m.fromTo("#backdrop-wrap",{opacity:0},{duration:1,delay:0,opacity:1}),m.fromTo("#backdrop-wrap p",{opacity:0,x:200},{x:0,duration:.5,opacity:1,stagger:.2},"-=0.5"),m.fromTo("#poster",{opacity:0,scale:.5},{x:0,duration:1,scale:1,opacity:1}),m.fromTo(".info-anim",{opacity:0,x:100},{x:0,duration:.5,opacity:1,stagger:.1},"-=1")};return ce(async()=>{await ue(),await D()}),(d,c)=>{var i,o,l,_,g,y,h,T,Y,U,F,C,j,z,N,A;return v(),f("div",Me,[a("div",Te,[(i=t.value)!=null&&i.backdrop_path?(v(),f("img",{key:0,src:`https://image.tmdb.org/t/p/w1280${(o=t.value)==null?void 0:o.backdrop_path}`,alt:"",class:"absolute inset-0 size-full object-cover"},null,8,Ye)):(v(),f("img",{key:1,src:`https://image.tmdb.org/t/p/w1280${(l=t.value)==null?void 0:l.poster_path}`,alt:"",class:"absolute inset-0 size-full object-cover"},null,8,Ue)),Fe,a("div",Ce,[a("div",je,[a("p",ze,u(((_=t.value)==null?void 0:_.title)??((g=t.value)==null?void 0:g.name)),1),a("p",Ne,u(((y=t.value)==null?void 0:y.original_title)??((h=t.value)==null?void 0:h.original_name)),1)])])]),a("section",Ae,[a("div",Be,[a("p",Ve,u(((T=t.value)==null?void 0:T.title)??((Y=t.value)==null?void 0:Y.name)),1),a("p",We,u(((U=t.value)==null?void 0:U.original_title)??((F=t.value)==null?void 0:F.original_name)),1)])]),a("section",Ge,[a("div",Ke,[a("div",Oe,[a("img",{src:`https://image.tmdb.org/t/p/w780${(C=t.value)==null?void 0:C.poster_path}`,alt:"",class:"rounded-[8px]"},null,8,Re)]),a("div",Je,[a("div",Pe,u((j=t.value)==null?void 0:j.overview),1),a("div",Ee,[a("div",Le,[a("p",Ze," 上映日期: "+u(((z=t.value)==null?void 0:z.release_date)??((N=t.value)==null?void 0:N.first_air_date)),1),a("p",qe,"片長:"+u((A=t.value)==null?void 0:A.runtime)+"分鐘",1),a("p",He,[K(" 類型: "),(v(!0),f(me,null,ve(p.value,(B,V)=>(v(),f("span",{key:V},[K(u(B.label)+" ",1),_e(a("span",null,", ",512),[[ge,V!==p.value.length-1]])]))),128))]),a("p",Qe,"產地: "+u(w.value),1)])]),a("div",Xe,[a("button",{class:"text-body-l-semibold mt-[24px] w-full rounded-[8px] border border-primary py-2 text-center text-primary md:max-w-[329px]",onClick:c[0]||(c[0]=B=>$())}," 添加 ")])])])])])}}},at=R(et,[["__scopeId","data-v-ed16c310"]]);export{at as default};
