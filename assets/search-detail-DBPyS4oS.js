import{_ as V,a0 as Z,v as q,r as S,a1 as M,i as T,a as p,j as X,k as ee,b as a,x as r,a2 as te,a3 as ae,M as w,a4 as se,a5 as oe,a6 as K,a7 as le,N as ne,y as L,R as ie,a8 as de,a9 as re,P as E,Q as H,aa as ce,Z as me,H as ue,g as ve,o as pe,L as _e,E as ge,c as f,G as I,t as m,B as O,F as ye,d as he,ab as fe,J as xe}from"./index-ibfYiHqV.js";const P={JP:"日本",TW:"台灣",US:"美國",KR:"韓國",HK:"香港",CN:"中國"},J=n=>(E("data-v-5014872c"),n=n(),H(),n),be={class:"absolute inset-0 h-full overflow-auto"},we={class:"main-gradient relative mx-auto my-[64px] w-[90%] rounded-[50px] border border-[#FFFFFF33] bg-black p-14 md:my-[128px] md:w-[489px] md:p-20"},Se=J(()=>a("p",{class:"text-heading-s"},"添加記錄",-1)),ke={class:"mt-8 space-y-6"},$e={class:"space-y-3"},De=J(()=>a("i",{class:"icon-close text-[32px]"},null,-1)),Me=[De],Ie={__name:"search-add-modal",props:{name:{type:String},original_name:{type:String},year:{type:String},country:{type:String},poster_img:{type:String},background_image:{type:String},type:{type:String},genres:{type:Object}},setup(n){const s=n,t=Z(),k=q(),x=S(null),e=S({record_date:M(new Date).format("DD-MM-YYYY"),type:"",name:"",original_name:"",year:"",country:"",mark:0,favorite:!1,categoryList:[],watched:!1,postImageUrl:"",background_image:null});e.value.type=(s==null?void 0:s.type)??"",e.value.name=(s==null?void 0:s.name)??"",e.value.original_name=(s==null?void 0:s.original_name)??"",e.value.year=M(s==null?void 0:s.year).format("YYYY")??"",e.value.country=(s==null?void 0:s.country)??"",e.value.background_image=(s==null?void 0:s.background_image)??null;const $=i=>e.value.record_date=i,_=i=>e.value.type=i,b=i=>e.value.favorite=i,v=i=>e.value.watched=i,D=i=>e.value.mark=i,d=async i=>x.value=i,c=async()=>{e.value={...e.value,watched_date:e.value.watched?M(new Date).format("DD-MM-YYYY"):""},s.poster_img?e.value.postImageUrl=`https://image.tmdb.org/t/p/w780${s.poster_img}`:e.value.postImageUrl=await de(x.value),await re(e.value),k.setFilterLists(),t.close("add-movie-id")},u=T(()=>!!(e.value.country&&e.value.type&&e.value.name&&e.value.year));return(i,o)=>(p(),X(L(ie),{"modal-id":"add-movie-id","content-class":"absolute inset-0  bg-[#30313299]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:ee(()=>[a("div",be,[a("div",we,[a("div",null,[Se,a("div",ke,[r(te,{onSelected:$,date:e.value.record_date,"onUpdate:date":o[0]||(o[0]=l=>e.value.record_date=l)},null,8,["date"]),r(ae,{attrSelected:n.type,onSelected:_},null,8,["attrSelected"]),r(w,{placeholder:"名稱",text:e.value.name,"onUpdate:text":o[1]||(o[1]=l=>e.value.name=l)},null,8,["text"]),r(w,{placeholder:"原始名稱(選項)",text:e.value.original_name,"onUpdate:text":o[2]||(o[2]=l=>e.value.original_name=l)},null,8,["text"]),r(w,{placeholder:"年份",text:e.value.year,"onUpdate:text":o[3]||(o[3]=l=>e.value.year=l)},null,8,["text"]),r(w,{placeholder:"產地",text:e.value.country,"onUpdate:text":o[4]||(o[4]=l=>e.value.country=l)},null,8,["text"]),r(se,{data:n.genres,category:e.value.categoryList,"onUpdate:category":o[5]||(o[5]=l=>e.value.categoryList=l)},null,8,["data","category"])]),r(oe,{class:"my-8",imgUrl:`https://image.tmdb.org/t/p/w780${n.poster_img}`,movieName:n.name,onImageData:d},null,8,["imgUrl","movieName"]),a("div",$e,[r(K,{title:"最愛",onSelected:b}),r(K,{title:"已觀看",onSelected:v}),r(le,{onSelected:D})]),r(ne,{text:"添加",class:"mt-8",disable:u.value,onClick:o[6]||(o[6]=l=>c())},null,8,["disable"])]),a("button",{type:"button",class:"absolute right-10 top-10",onClick:o[7]||(o[7]=l=>L(t).close("add-movie-id"))},Me)])])]),_:1}))}},Te=V(Ie,[["__scopeId","data-v-5014872c"]]),Ue=n=>n==null?void 0:n.map(s=>({label:ce[s.id]??s.id,slug:s.id})),Q=n=>(E("data-v-215ee03b"),n=n(),H(),n),Ye={class:"relative mb-[60px]"},Fe={class:"z-5 relative flex h-[375px] items-end md:flex md:h-full md:min-h-[500px] md:items-center",id:"backdrop-wrap"},Ce={key:0,alt:"",class:"absolute inset-0 size-full object-cover"},je={key:1,alt:"",class:"absolute inset-0 size-full object-cover"},ze=Q(()=>a("div",{class:"bg-overlay absolute bottom-0 left-0 h-full w-[100%]"},null,-1)),Ne={class:"container relative hidden md:block md:py-10"},Be={class:"w-[100%] md:w-[45%]"},Re={class:"text-heading-m"},We={class:"text-heading-s mt-1"},Ae={class:"container relative z-20 mt-[-40px] block md:hidden md:translate-y-0"},Ge={class:"w-[100%] md:w-[45%]"},Ke={class:"text-heading-m"},Le={class:"text-heading-s mt-1"},Oe={class:"container mt-10 md:mt-20"},Pe={class:"items-center md:flex md:justify-between"},Ve={class:"mx-auto w-full md:ml-0 md:w-[35%] lg:w-[30%]",id:"poster"},Ee=["src"],He={class:"mx-auto mt-10 w-full md:ml-auto md:mt-0 md:w-[55%]"},Je=Q(()=>a("div",{class:"text-body-s-medium info-anim mt-6 w-fit rounded-[4px] bg-primary px-1 py-[2px] text-second md:mt-0",id:"added-anim"}," 已加入 ",-1)),Qe={class:"info-anim mt-6"},Ze={class:"mt-10 flex items-center justify-between"},qe={class:"text-body-l mt-3 grid gap-y-2"},Xe={class:"info-anim"},et={class:"info-anim"},tt={class:"info-anim"},at={class:"info-anim"},st={class:"info-anim"},ot={__name:"search-detail",setup(n){const s=me(),t=S(),k=S({language:"zh-TW"}),x=async()=>{const d=await fe(s.path,{params:k.value});t.value=d.data,console.log(t.value)},e=ue({component:Te,attrs:{}}),$=async()=>{var d,c,u,i,o,l,g,y,h;e.open(),e.patchOptions({attrs:{name:((d=t.value)==null?void 0:d.title)??((c=t.value)==null?void 0:c.name),original_name:((u=t.value)==null?void 0:u.original_title)??((i=t.value)==null?void 0:i.original_name),year:((o=t.value)==null?void 0:o.release_date)??((l=t.value)==null?void 0:l.first_air_date),country:b.value,poster_img:(g=t.value)==null?void 0:g.poster_path,background_image:(y=t.value)!=null&&y.backdrop_path?`https://image.tmdb.org/t/p/w1280${t.value.backdrop_path}`:null,genres:(h=t.value)==null?void 0:h.genres,type:s.params.mediaType}})};x();const _=T(()=>{var d;return Ue((d=t.value)==null?void 0:d.genres)});console.log(_.value);const b=T(()=>{var c;const d=(c=t.value)==null?void 0:c.origin_country[0];return P.hasOwnProperty(d)?P[d]:d});let v=ve.timeline();const D=async()=>{v.fromTo("#backdrop-wrap",{opacity:0},{duration:1,delay:0,opacity:1}),v.fromTo("#backdrop-wrap p",{opacity:0,x:200},{x:0,duration:.5,opacity:1,stagger:.2},"-=0.5"),v.fromTo("#poster",{opacity:0,scale:.5},{x:0,duration:1,scale:1,opacity:1}),v.fromTo(".info-anim",{opacity:0,x:100},{x:0,duration:.5,opacity:1,stagger:.1},"-=1")};return pe(async()=>{await _e(),await D()}),(d,c)=>{var i,o,l,g,y,h,U,Y,F,C,j,z,N,B,R,W;const u=ge("lazy");return p(),f("div",Ye,[a("div",Fe,[(i=t.value)!=null&&i.backdrop_path?I((p(),f("img",Ce,null,512)),[[u,`https://image.tmdb.org/t/p/w1280${(o=t.value)==null?void 0:o.backdrop_path}`]]):I((p(),f("img",je,null,512)),[[u,`https://image.tmdb.org/t/p/w1280${(l=t.value)==null?void 0:l.poster_path}`]]),ze,a("div",Ne,[a("div",Be,[a("p",Re,m(((g=t.value)==null?void 0:g.title)??((y=t.value)==null?void 0:y.name)),1),a("p",We,m(((h=t.value)==null?void 0:h.original_title)??((U=t.value)==null?void 0:U.original_name)),1)])])]),a("section",Ae,[a("div",Ge,[a("p",Ke,m(((Y=t.value)==null?void 0:Y.title)??((F=t.value)==null?void 0:F.name)),1),a("p",Le,m(((C=t.value)==null?void 0:C.original_title)??((j=t.value)==null?void 0:j.original_name)),1)])]),a("section",Oe,[a("div",Pe,[a("div",Ve,[a("img",{src:`https://image.tmdb.org/t/p/w780${(z=t.value)==null?void 0:z.poster_path}`,alt:"",class:"rounded-[8px]"},null,8,Ee)]),a("div",He,[Je,a("div",Qe,m((N=t.value)==null?void 0:N.overview),1),a("div",Ze,[a("div",qe,[a("p",Xe," 上映日期: "+m(((B=t.value)==null?void 0:B.release_date)??((R=t.value)==null?void 0:R.first_air_date)),1),a("p",et,"片長:"+m((W=t.value)==null?void 0:W.runtime)+"分鐘",1),a("p",tt,[O(" 類型: "),(p(!0),f(ye,null,he(_.value,(A,G)=>(p(),f("span",{key:G},[O(m(A.label)+" ",1),I(a("span",null,", ",512),[[xe,G!==_.value.length-1]])]))),128))]),a("p",at,"產地: "+m(b.value),1)])]),a("div",st,[a("button",{class:"text-body-l-semibold mt-[24px] w-full rounded-[8px] border border-primary py-2 text-center text-primary md:max-w-[329px]",onClick:c[0]||(c[0]=A=>$())}," 添加 ")])])])])])}}},nt=V(ot,[["__scopeId","data-v-215ee03b"]]);export{nt as default};
