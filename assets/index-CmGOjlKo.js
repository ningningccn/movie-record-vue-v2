import{r as f,o as U,a as u,c as h,b as s,F as k,d as A,n as $,t as C,e as J,f as ee,g as P,h as S,s as te,w as T,i as W,j as O,k as se,l as le,m as ne,p as ae,q as m,u as H,v as j,x as M,y as V,z as X,A as re,B as oe,C as ie,D as ce}from"./index-BjXT1xGw.js";const ue={class:"border-b border-enable"},de={class:"container"},ve={class:"flex items-center justify-center pt-6"},pe={class:"relative"},fe=["onClick"],he={__name:"category",emits:["selected"],setup(n,{emit:a}){const d=a,l=f(0),v=f(0),o=f(""),i=(t,x)=>{o.value=t;const _=document.querySelector(`.btn-${x}`);l.value=_.clientWidth,v.value=_.offsetLeft,d("selected",t)},c=f([{title:"全部",slug:""},{title:"電影",slug:"movie"},{title:"電視劇",slug:"tv"},{title:"綜藝",slug:"show"}]);return U(()=>{const t=document.querySelector(".btn-0");l.value=t.clientWidth}),(t,x)=>(u(),h("div",ue,[s("div",de,[s("div",ve,[s("div",pe,[(u(!0),h(k,null,A(c.value,(_,e)=>(u(),h("button",{key:_.slug,class:$(["text-body-xl-medium relative px-6 py-4 text-enable hover:text-white md:px-[60px]",[{"text-white":o.value==_.slug},`btn-${e}`]]),onClick:r=>i(_.slug,e)},C(_.title),11,fe))),128)),s("div",{class:"absolute bottom-0 h-[3px] bg-primary transition-all duration-300",style:J({width:`${l.value}px`,left:`${v.value}px`})},null,4)])])])]))}},Z="--vc-auto-duration",xe=`height var(${Z}) cubic-bezier(0.33, 1, 0.68, 1)`,z={padding:0},_e=300,ye={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"},ge=()=>typeof navigator<"u"&&navigator.userAgent.includes("Firefox");function G(n){return n.value?parseFloat(getComputedStyle(n.value).height):0}function I(n){var a;return{height:`${((a=n.value)==null?void 0:a.scrollHeight)||0}px`}}function K(n){if(!n.value)return{};const{transition:a}=getComputedStyle(n.value);return a==="all 0s ease 0s"||ge()&&a==="all"?{transition:xe}:{transition:a}}function Q(n){if(!n.value)return!0;const{transition:a}=getComputedStyle(n.value);return typeof window.requestAnimationFrame>"u"||window.matchMedia("(prefers-reduced-motion: reduce)").matches||a.includes("none")||a.includes("height 0s")}function me(n=0){if(n===0)return 0;const a=n/36,d=Math.round((4+15*a**.25+a/5)*10);return Number.isFinite(d)?d:0}const N=ee({inheritAttrs:!0,__name:"Collapse",props:{when:{type:Boolean},baseHeight:{default:0},as:{default:"div"}},emits:["collapse","expand","collapsed","expanded"],setup(n,{emit:a}){const d=n,l=a,v=P(d,"when"),o=P(d,"baseHeight"),i=S(()=>({overflow:"hidden",height:`${o.value}px`})),c=S(()=>({...z,...o.value===0?{display:"none"}:i.value})),t=f(null),x=f(v.value?"expanded":"collapsed"),_=g=>x.value=g;function e(){return v.value?z:o.value===0?ye:c.value}const r=te(e()),p=g=>r.value=g,y=g=>p({...r.value,...g}),Y=f(_e),F=g=>Y.value=g,R=S(()=>({[Z]:`${Y.value}ms`}));function w(){p(z),_("expanded"),l("expanded")}function E(){p(c.value),_("collapsed"),l("collapsed")}U(()=>{if(!t.value)return;const g=me(t.value.scrollHeight-o.value);g>0&&F(g),!v.value&&o.value===0&&p(c.value)}),T(v,g=>{if(t.value)if(g){if(Q(t))return w();_("expanding"),l("expand"),p({...z,...i.value,...R.value}),requestAnimationFrame(()=>{if(t.value.scrollHeight===0)return w();y({...I(t),...K(t),willChange:"height"})})}else{if(Q(t)||(_("collapsing"),l("collapse"),y({...R.value,...I(t)}),t.value.scrollHeight===0))return E();requestAnimationFrame(()=>{y({...i.value,...K(t),willChange:"height"})})}}),T(o,g=>{v.value||(g>0?y({display:void 0,height:`${g}px`}):y({display:"none"}))});function D(g){g.target&&g.target===t.value&&g.propertyName==="height"&&(v.value?Math.abs(t.value.scrollHeight-G(t))<1&&w():Math.abs(o.value-G(t))<1&&E())}return(g,b)=>(u(),W(ae(d.as),{ref_key:"collapseRef",ref:t,style:J(r.value),onTransitionend:D,"data-collapse":x.value},{default:O(()=>[se(g.$slots,"default",le(ne({state:x.value})))]),_:3},40,["style","data-collapse"]))}}),be={class:"cursor-pointer rounded-[8px] bg-card"},Ce=s("div",{class:"flex space-x-2"},[s("i",{class:"icon-sort text-[22px]"}),s("p",null,"排序")],-1),Le={class:"flex flex-col space-y-6 p-6 pb-4"},ke=["onClick"],$e={__name:"sort",emits:["order"],setup(n,{emit:a}){const d=a,l=f(!1),v=[{title:"最新加入",slug:"desc"},{title:"最舊加入",slug:"asc"}],o=i=>{d("order",i)};return(i,c)=>(u(),h("div",be,[s("div",{class:"flex items-center justify-between px-6 py-2",onClick:c[0]||(c[0]=t=>l.value=!l.value)},[Ce,s("i",{class:$(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":l.value}])},null,2)]),m(H(N),{when:l.value},{default:O(()=>[s("div",Le,[(u(),h(k,null,A(v,t=>s("button",{type:"button",class:"text-body-m-medium text-left",key:t.slug,onClick:x=>o(t.slug)},C(t.title),9,ke)),64))])]),_:1},8,["when"])]))}},we={key:0,class:"absolute size-full rounded-[4px] bg-primary"},Se=s("i",{class:"icon-check text-[20px] text-second"},null,-1),Ae=[Se],q={__name:"checkbox",props:{title:String,slug:String|Number,disabled:{type:Boolean,default:!1}},emits:["selected"],setup(n,{expose:a,emit:d}){const l=n,v=d,o=f(!1),i=()=>{l.disabled||(o.value=!o.value,v("selected",{slug:l.slug,status:o.value}))};return a({clearCheckbox:()=>{o.value=!1,v("selected","clear")}}),(t,x)=>(u(),h("div",{onClick:x[0]||(x[0]=_=>i()),class:$(["flex items-center space-x-2",[{"text-disable":n.disabled},{"cursor-pointer":!n.disabled}]])},[s("div",{class:$(["relative size-[20px] rounded-[4px]",[{border:!o.value},{"border-disable":n.disabled}]])},[o.value?(u(),h("div",we,Ae)):j("",!0)],2),s("p",null,C(n.title),1)],2))}},Re=s("p",null,"狀態",-1),Ee={class:"flex flex-col space-y-3 pt-3"},je={__name:"status",props:{isAllExpanded:{type:Boolean}},emits:["currStatusLists"],setup(n,{expose:a,emit:d}){const l=d,v=[{title:"最愛",slug:"favorite"},{title:"已觀看",slug:"watched"},{title:"待觀看",slug:"to_be_watching"}],o=f(!0),i=M([]),c=f(),t=e=>!!(i.includes("watched")&&e=="to_be_watching"||i.includes("to_be_watching")&&e=="watched"),x=e=>{if(e=="clear")i.length=0;else{const r=i.indexOf(e.slug);r!==-1?i.splice(r,1):i.push(e.slug),l("currStatusLists",i)}};return a({clearAllCheckbox:()=>{c.value.forEach(e=>{e.clearCheckbox()})}}),(e,r)=>(u(),h("div",null,[s("div",{class:"flex cursor-pointer items-center justify-between",onClick:r[0]||(r[0]=p=>o.value=!o.value)},[Re,s("i",{class:$(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":o.value}])},null,2)]),m(H(N),{when:o.value},{default:O(()=>[s("div",Ee,[(u(),h(k,null,A(v,(p,y)=>s("div",{key:y,class:""},[m(q,{title:p.title,slug:p.slug,disabled:t(p.slug),onSelected:x,ref_for:!0,ref_key:"statusRef",ref:c},null,8,["title","slug","disabled"])])),64))])]),_:1},8,["when"])]))}},Oe={key:0},Ye={class:"flex flex-col space-y-3 pt-3"},Fe={__name:"year",props:{yearList:{type:Object}},emits:["currYearLists"],setup(n,{expose:a,emit:d}){const l=d,v=n,o=S(()=>v.yearList.map(e=>({title:e,slug:e}))),i=f(),c=f(!0),t=M([]),x=e=>{if(e=="clear")t.length=0;else{const r=t.indexOf(e.slug);r!==-1?t.splice(r,1):t.push(e.slug),l("currYearLists",t)}};return a({clearAllCheckbox:()=>{i.value.forEach(e=>{e.clearCheckbox()})}}),(e,r)=>(u(),h("div",null,[s("div",{class:"flex cursor-pointer items-center justify-between",onClick:r[0]||(r[0]=p=>c.value=!c.value)},[s("p",null,[V(" 年份 "),t.length>0?(u(),h("span",Oe,"("+C(t.length)+")",1)):j("",!0)]),s("i",{class:$(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":c.value}])},null,2)]),m(H(N),{when:c.value},{default:O(()=>[s("div",Ye,[(u(!0),h(k,null,A(o.value,(p,y)=>(u(),h("div",{key:y,class:""},[m(q,{title:p.title,slug:p.slug,onSelected:x,ref_for:!0,ref_key:"yearRef",ref:i},null,8,["title","slug"])]))),128))])]),_:1},8,["when"])]))}},Be={key:0},He={class:"flex flex-col space-y-3 pt-3"},Me={__name:"category",props:{categoryList:{type:Object}},emits:["emitCurrCategory"],setup(n,{expose:a,emit:d}){const l=d,v=n,o=S(()=>v.categoryList.map(e=>({title:X[e],slug:Number(e)}))),i=f(),c=f(!0),t=M([]),x=e=>{if(e=="clear")t.length=0;else{const r=t.indexOf(e.slug);r!==-1?t.splice(r,1):t.push(e.slug),l("emitCurrCategory",t)}};return a({clearAllCheckbox:()=>{i.value.forEach(e=>{e.clearCheckbox()})}}),(e,r)=>(u(),h("div",null,[s("div",{class:"flex cursor-pointer items-center justify-between",onClick:r[0]||(r[0]=p=>c.value=!c.value)},[s("p",null,[V(" 類別 "),t.length>0?(u(),h("span",Be,"("+C(t.length)+")",1)):j("",!0)]),s("i",{class:$(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":c.value}])},null,2)]),m(H(N),{when:c.value},{default:O(()=>[s("div",He,[(u(!0),h(k,null,A(o.value,(p,y)=>(u(),h("div",{key:y,class:""},[m(q,{title:p.title,slug:p.slug,onSelected:x,ref_for:!0,ref_key:"categoryRef",ref:i},null,8,["title","slug"])]))),128))])]),_:1},8,["when"])]))}},Ne={key:0},ze={class:"flex flex-col space-y-3 pt-3"},Ve={__name:"country",props:{countryList:{type:Object}},emits:["selectedLists"],setup(n,{expose:a,emit:d}){const l=d,v=n,o=S(()=>v.countryList.map(e=>({title:e,slug:e}))),i=f(),c=f(!0),t=M([]),x=e=>{if(e=="clear")t.length=0;else{const r=t.indexOf(e.slug);r!==-1?t.splice(r,1):t.push(e.slug),l("selectedLists",t)}};return a({clearAllCheckbox:()=>{i.value.forEach(e=>{e.clearCheckbox()})}}),(e,r)=>(u(),h("div",null,[s("div",{class:"flex cursor-pointer items-center justify-between",onClick:r[0]||(r[0]=p=>c.value=!c.value)},[s("p",null,[V(" 產地 "),t.length>0?(u(),h("span",Ne,"("+C(t.length)+")",1)):j("",!0)]),s("i",{class:$(["icon-caret-down text-[20px] transition-transform duration-500",{"rotate-180":c.value}])},null,2)]),m(H(N),{when:c.value},{default:O(()=>[s("div",ze,[(u(!0),h(k,null,A(o.value,(p,y)=>(u(),h("div",{key:y,class:""},[m(q,{title:p.title,slug:p.slug,onSelected:x,ref_for:!0,ref_key:"countryRef",ref:i},null,8,["title","slug"])]))),128))])]),_:1},8,["when"])]))}},qe={class:"rounded-[8px] bg-card"},De={class:"flex items-center justify-between px-6 py-2"},Te={class:"flex space-x-2"},We=s("i",{class:"icon-filter text-[22px]"},null,-1),Pe={class:"flex flex-col space-y-6 px-6 pb-4 pt-6"},Ge={__name:"filter",emits:["currStatusLists","currCategoryLists","currYearLists","currCountryLists"],setup(n,{emit:a}){const d=a,l=f(!0),v=f([]),o=f([]),i=f([]),c=f([]),t=f([]),x=f([]),_=f([]),e=f(),r=f(),p=f(),y=f();(async()=>{const{yearOptLists:b,countryOtpLists:L,categoryOtpList:B}=await re();v.value=b,o.value=L,i.value=B})();const F=b=>{c.value=b,d("currStatusLists",b)},R=b=>{const L=b.map(B=>({id:B,label:X[B]}));_.value=L,d("currCategoryLists",L)},w=b=>{t.value=b,d("currYearLists",b)},E=b=>{x.value=b,d("currCountryLists",b)},D=()=>{e.value.clearAllCheckbox(),r.value.clearAllCheckbox(),p.value.clearAllCheckbox(),y.value.clearAllCheckbox()},g=S(()=>c.value.length>0||t.value.length>0||x.value.length>0||_.value.length>0);return(b,L)=>(u(),h("div",qe,[s("div",De,[s("div",Te,[We,s("p",{class:"cursor-pointer",onClick:L[0]||(L[0]=B=>l.value=!l.value)},"篩選")]),s("p",{class:$(["text-body-s",[g.value?"cursor-pointer text-primary hover:text-white":"text-disable"]]),onClick:L[1]||(L[1]=B=>D())}," 清除 ",2)]),s("div",Pe,[m(je,{isAllExpanded:l.value,onCurrStatusLists:F,ref_key:"statusRef",ref:e},null,8,["isAllExpanded"]),m(Fe,{yearList:v.value,onCurrYearLists:w,ref_key:"yearRef",ref:r},null,8,["yearList"]),m(Me,{categoryList:i.value,onEmitCurrCategory:R,ref_key:"categoryRef",ref:p},null,8,["categoryList"]),m(Ve,{countryList:o.value,onSelectedLists:E,ref_key:"countryRef",ref:y},null,8,["countryList"])])]))}},Ie={class:""},Ke=["src"],Qe={class:"absolute left-0 top-0"},Ue={key:0,class:"text-body-s-medium rounded-[4px] bg-primary px-1 py-[2px] text-second"},Je={class:"mt-2 flex justify-between"},Xe={class:"text-body-m-medium"},Ze={key:0,class:"icon-heart-fill pt-1"},et={key:1,class:"icon-heart pt-1"},tt={class:"text-body-s-medium mt-1 flex justify-between text-enable"},st={class:"flex flex-wrap gap-x-2"},lt={key:0,class:"flex items-center"},nt={key:0},at={__name:"card",props:{data:{type:Object}},setup(n){oe();const a=n,d=S(()=>{var l,v;return(v=(l=a==null?void 0:a.data)==null?void 0:l.movie)==null?void 0:v.year.slice(0,4)});return(l,v)=>{const o=ie("RouterLink");return u(),W(o,{to:`/list/${a.data.id}`,class:"relative cursor-pointer"},{default:O(()=>{var i,c,t,x,_,e,r,p,y,Y;return[s("div",Ie,[s("img",{src:(c=(i=n.data)==null?void 0:i.movie)==null?void 0:c.postImageUrl,alt:"",class:"aspect-[3/4.3] rounded-[8px] object-cover"},null,8,Ke)]),s("div",Qe,[(x=(t=n.data)==null?void 0:t.movie)!=null&&x.watched?(u(),h("div",Ue," 已觀看 ")):j("",!0)]),s("div",null,[s("div",Je,[s("div",Xe,C((e=(_=n.data)==null?void 0:_.movie)==null?void 0:e.name),1),(p=(r=n.data)==null?void 0:r.movie)!=null&&p.favorite?(u(),h("i",Ze)):(u(),h("i",et))]),s("div",tt,[s("div",st,[(u(!0),h(k,null,A((Y=(y=n.data)==null?void 0:y.movie)==null?void 0:Y.categoryList,(F,R)=>{var w,E;return u(),h("div",{key:F.slug},[R<3?(u(),h("div",lt,[V(C(F.label)+" ",1),((E=(w=n.data)==null?void 0:w.movie)==null?void 0:E.categoryList.length)>3&&R==2?(u(),h("span",nt,"...")):j("",!0)])):j("",!0)])}),128))]),s("div",null,C(d.value),1)])])]}),_:1},8,["to"])}}},rt={class:"container"},ot={class:"text-body-l-semibold mt-[60px]"},it={class:"mt-10 flex md:space-x-5"},ct={class:"hidden min-w-[197px] max-w-[197px] md:block"},ut={class:"space-y-4"},dt={class:"grid grid-cols-4 gap-5 md:grid-cols-6 lg:grid-cols-6 xl:grid-cols-10"},pt={__name:"index",setup(n){const a=f(""),d=f([]),l=M({selectedStatusLists:[],selectedYearLists:[],selectedCountryLists:[],selectedCategoryLists:[],order:"desc"}),v=async(e,r)=>{(await ce(e,r)).forEach(y=>{d.value.push({id:y.id,movie:y.data()})})};v(a.value,l);const o=e=>{d.value=[],a.value=e,v(a.value,l)},i=e=>l.order=e,c=e=>l.selectedStatusLists=e,t=e=>l.selectedYearLists=e,x=e=>l.selectedCountryLists=e,_=e=>l.selectedCategoryLists=e;return T(()=>l,(e,r)=>{d.value=[],v(a.value,l)},{deep:!0}),(e,r)=>(u(),h(k,null,[m(he,{onSelected:o}),s("div",rt,[s("div",ot,"結果顯示:"+C(d.value.length),1),s("main",it,[s("div",ct,[s("div",ut,[m($e,{onOrder:i}),m(Ge,{onCurrStatusLists:c,onCurrYearLists:t,onCurrCountryLists:x,onCurrCategoryLists:_})])]),s("div",null,[s("div",dt,[(u(!0),h(k,null,A(d.value,(p,y)=>(u(),W(at,{data:p,class:"col-span-2",key:y},null,8,["data"]))),128))])])])])],64))}};export{pt as default};
