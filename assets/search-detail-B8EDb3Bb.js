import{_ as E,U as P,r as S,V as $,h as D,a as _,i as q,j as L,b as a,q as r,W as X,X as Z,E as w,Y as H,Z as Q,$ as O,a0 as ee,G as te,u as R,a1 as ae,a2 as se,a3 as le,I as G,J,z as oe,R as ne,a4 as ie,c as p,t as u,v as de,y as W,F as re,d as ce,a5 as ue,O as me,a6 as ve}from"./index-BjXT1xGw.js";const A={JP:"日本",TW:"台灣",US:"美國",KR:"韓國"},K=n=>(G("data-v-edfab380"),n=n(),J(),n),_e={class:"absolute inset-0 h-full overflow-auto"},pe={class:"main-gradient relative mx-auto my-[128px] w-[489px] rounded-[50px] border border-[#FFFFFF33] bg-black p-20"},ge=K(()=>a("p",{class:"text-heading-s"},"添加記錄",-1)),ye={class:"mt-8 space-y-6"},he={class:"space-y-3"},be=K(()=>a("i",{class:"icon-close text-[32px]"},null,-1)),xe=[be],fe={__name:"add-movie-modal",props:{name:{type:String},original_name:{type:String},year:{type:String},country:{type:String},poster_img:{type:String},background_image:{type:String},type:{type:String},genres:{type:Object}},setup(n){const s=n;console.log(s);const e=P(),b=S(null),t=S({record_date:$(new Date).format("DD-MM-YYYY"),type:"",name:"",original_name:"",year:"",country:"",mark:0,favorite:!1,categoryList:[],watched:!1,postImageUrl:"",background_image:null});t.value.type=(s==null?void 0:s.type)??"",t.value.name=(s==null?void 0:s.name)??"",t.value.original_name=(s==null?void 0:s.original_name)??"",t.value.year=$(s==null?void 0:s.year).format("YYYY")??"",t.value.country=(s==null?void 0:s.country)??"",t.value.background_image=(s==null?void 0:s.background_image)??null;const x=i=>t.value.record_date=i,k=i=>t.value.type=i,g=i=>t.value.favorite=i,f=i=>t.value.watched=i,d=i=>t.value.mark=i,c=async i=>b.value=i,m=async()=>{t.value={...t.value,watched_date:t.value.watched?$(new Date).format("DD-MM-YYYY"):""},s.poster_img?t.value.postImageUrl=`https://image.tmdb.org/t/p/w780${s.poster_img}`:t.value.postImageUrl=await se(b.value),await le(t.value),console.log("added movie"),e.close("add-movie-id")},v=D(()=>!!(t.value.country&&t.value.type&&t.value.name&&t.value.year));return(i,l)=>(_(),q(R(ae),{"modal-id":"add-movie-id","content-class":"absolute inset-0  bg-[#30313299]"},{default:L(()=>[a("div",_e,[a("div",pe,[a("div",null,[ge,a("div",ye,[r(X,{onSelected:x,date:t.value.record_date,"onUpdate:date":l[0]||(l[0]=o=>t.value.record_date=o)},null,8,["date"]),r(Z,{attrSelected:n.type,onSelected:k},null,8,["attrSelected"]),r(w,{placeholder:"名稱",text:t.value.name,"onUpdate:text":l[1]||(l[1]=o=>t.value.name=o)},null,8,["text"]),r(w,{placeholder:"原始名稱(選項)",text:t.value.original_name,"onUpdate:text":l[2]||(l[2]=o=>t.value.original_name=o)},null,8,["text"]),r(w,{placeholder:"年份",text:t.value.year,"onUpdate:text":l[3]||(l[3]=o=>t.value.year=o)},null,8,["text"]),r(w,{placeholder:"產地",text:t.value.country,"onUpdate:text":l[4]||(l[4]=o=>t.value.country=o)},null,8,["text"]),r(H,{data:n.genres,category:t.value.categoryList,"onUpdate:category":l[5]||(l[5]=o=>t.value.categoryList=o)},null,8,["data","category"])]),r(Q,{class:"my-8",imgUrl:`https://image.tmdb.org/t/p/w780${n.poster_img}`,movieName:n.name,onImageData:c},null,8,["imgUrl","movieName"]),a("div",he,[r(O,{title:"最愛",onSelected:g}),r(O,{title:"已觀看",onSelected:f}),r(ee,{onSelected:d})]),r(te,{text:"添加",class:"mt-8",disable:v.value,onClick:l[6]||(l[6]=o=>m())},null,8,["disable"])]),a("button",{type:"button",class:"absolute right-10 top-10",onClick:l[7]||(l[7]=o=>R(e).close("add-movie-id"))},xe)])])]),_:1}))}},we=E(fe,[["__scopeId","data-v-edfab380"]]),Se=n=>n==null?void 0:n.map(s=>({label:oe[s.id]??s.id,slug:s.id})),ke=n=>(G("data-v-5ed0630c"),n=n(),J(),n),$e={class:"relative mb-[60px]"},De={class:"z-5 relative flex h-[375px] items-end md:flex md:h-full md:min-h-[500px] md:items-center"},Ie=["src"],Ue=["src"],Ye=ke(()=>a("div",{class:"bg-overlay absolute bottom-0 left-0 h-full w-[100%]"},null,-1)),Me={class:"container relative hidden md:block md:py-10"},Fe={class:"w-[100%] md:w-[45%]"},Ce={class:"text-heading-m"},Te={class:"text-heading-s mt-1"},je={class:"container relative z-20 mt-[-40px] block md:hidden md:translate-y-0"},ze={class:"w-[100%] md:w-[45%]"},Ne={class:"text-heading-m"},Ve={class:"text-heading-s mt-1"},Be={class:"container mt-10 md:mt-20"},Oe={class:"items-center md:flex md:justify-between"},Re={class:"mx-auto w-full md:ml-0 md:w-[35%] lg:w-[30%]"},We=["src"],Ae={class:"mx-auto mt-10 w-full md:ml-auto md:mt-0 md:w-[55%]"},Ee={class:"mt-6"},Ge={class:"mt-10 flex items-center justify-between"},Je={class:"text-body-l mt-3 grid gap-y-2"},Ke={key:0},Pe={__name:"search-detail",setup(n){const s=ne(),e=S(),b=S({language:"zh-TW"}),t=async()=>{const d=await ue(s.path,{params:b.value});e.value=d.data,console.log(e.value)},x=ie({component:we,attrs:{}}),k=async()=>{var d,c,m,v,i,l,o,y,h;x.open(),x.patchOptions({attrs:{name:((d=e.value)==null?void 0:d.title)??((c=e.value)==null?void 0:c.name),original_name:((m=e.value)==null?void 0:m.original_title)??((v=e.value)==null?void 0:v.original_name),year:((i=e.value)==null?void 0:i.release_date)??((l=e.value)==null?void 0:l.first_air_date),country:f.value,poster_img:(o=e.value)==null?void 0:o.poster_path,background_image:(y=e.value)!=null&&y.backdrop_path?`https://image.tmdb.org/t/p/w1280${e.value.backdrop_path}`:null,genres:(h=e.value)==null?void 0:h.genres,type:s.params.mediaType}})};t();const g=D(()=>{var d;return Se((d=e.value)==null?void 0:d.genres)});console.log(g.value);const f=D(()=>{var c;const d=(c=e.value)==null?void 0:c.origin_country[0];return A.hasOwnProperty(d)?A[d]:d});return(d,c)=>{var m,v,i,l,o,y,h,I,U,Y,M,F,C,T,j,z,N;return _(),p("div",$e,[a("div",De,[(m=e.value)!=null&&m.backdrop_path?(_(),p("img",{key:0,src:`https://image.tmdb.org/t/p/w1280${(v=e.value)==null?void 0:v.backdrop_path}`,alt:"",class:"absolute inset-0 size-full object-cover"},null,8,Ie)):(_(),p("img",{key:1,src:`https://image.tmdb.org/t/p/w1280${(i=e.value)==null?void 0:i.poster_path}`,alt:"",class:"absolute inset-0 size-full object-cover"},null,8,Ue)),Ye,a("div",Me,[a("div",Fe,[a("p",Ce,u(((l=e.value)==null?void 0:l.title)??((o=e.value)==null?void 0:o.name)),1),a("p",Te,u(((y=e.value)==null?void 0:y.original_title)??((h=e.value)==null?void 0:h.original_name)),1)])])]),a("section",je,[a("div",ze,[a("p",Ne,u(((I=e.value)==null?void 0:I.title)??((U=e.value)==null?void 0:U.name)),1),a("p",Ve,u(((Y=e.value)==null?void 0:Y.original_title)??((M=e.value)==null?void 0:M.original_name)),1)])]),a("section",Be,[a("div",Oe,[a("div",Re,[a("img",{src:`https://image.tmdb.org/t/p/w780${(F=e.value)==null?void 0:F.poster_path}`,alt:"",class:"rounded-[8px]"},null,8,We)]),a("div",Ae,[a("div",Ee,u((C=e.value)==null?void 0:C.overview),1),a("div",Ge,[a("div",Je,[a("p",null,"上映日期: "+u(((T=e.value)==null?void 0:T.release_date)??((j=e.value)==null?void 0:j.first_air_date)),1),(z=e.value)!=null&&z.runtime?(_(),p("p",Ke,"片長:"+u((N=e.value)==null?void 0:N.runtime)+"分鐘",1)):de("",!0),a("p",null,[W(" 類型: "),(_(!0),p(re,null,ce(g.value,(V,B)=>(_(),p("span",{key:B},[W(u(V.label)+" ",1),me(a("span",null,", ",512),[[ve,B!==g.value.length-1]])]))),128))]),a("p",null,"產地: "+u(f.value),1)])]),a("div",null,[a("button",{class:"text-body-l-semibold mt-[24px] w-full rounded-[8px] border border-primary py-2 text-center text-primary md:max-w-[329px]",onClick:c[0]||(c[0]=V=>k())}," 添加 ")])])])])])}}},Le=E(Pe,[["__scopeId","data-v-5ed0630c"]]);export{Le as default};
